const chart=function(){let e=["January","February","March","April","May","June","July"],t=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r,a){return e=[],t=[],fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${r}&tsym=USD&limit=6`).then(e=>e.json()).then(r=>{let c=[];r.Data.forEach(t=>{c.push(t.close),e.push(function(e){const t=new Date(1e3*e),n=t.getDate(),r=t.getMonth();return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${n}`}(t.time))}),n(),n(),n(),t.push({label:a,backgroundColor:"transparent",borderColor:"rgba( 0, 0, 0, 0.7)",borderWidth:3,pointBackgroundColor:"#66ff66",pointRadius:5,pointHoverRadius:8,data:c}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:t},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Price in USD",fontSize:20}}],xAxes:[{scaleLabel:{display:!0,labelString:"Day",fontSize:20}}]}}})}()})}}}(),CurrencyTable=function(e){let t=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],c=document.getElementById("currency-chart");function o(o){document.querySelectorAll(".fiat").forEach(e=>e.textContent=` (${r[1]})`),n=o;let s=document.createElement("tbody"),d=[];o.forEach((n,r)=>{d.push(n.symbol);let o=document.createElement("tr");o.innerHTML=`\n                    <td>${n.rank}</td>\n                    <td><span class="currency-name">${n.name}</span> <span class="currency-symbol"> ${n.symbol} </span></td>\n                    <td>${i(n.market_cap_usd)}</td>\n                    <td>${i(n.price_usd)}</td>\n                    <td>${a[r]}%</td>\n                    <td>${l(a[r])}<br><span class='coin-output'>  (à¸¿${t*a[r]/100/n.price_usd})</span></td>\n            `,o.style.cursor="pointer",s.appendChild(o),o.addEventListener("click",t=>{o.classList.contains("active")||c.scrollIntoView({behavior:"smooth"}),function(e){let t=document.querySelectorAll("tr.active");for(let e=0;e<t.length;e++)t[e].classList.remove("active");"span"===e.target.nodeName.toLowerCase()?e.target.parentNode.parentNode.classList.add("active"):e.target.parentNode.classList.add("active")}(t),c.innerHTML="",e.chart.getChartData(n.symbol,n.name)})}),e.currencyTable.appendChild(s),e.getNews(d),e.currencySymbol=d}function i(e){let t=parseFloat(e);return t%1!=0&&t>1?(t=`${r[0]}${t.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):t<1?`${r[0]}${t}`:(t=`${r[0]}${parseInt(t)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function l(e){return i(t*e/100)}return{buildTable:o,formatNum:i,calculateInvestment:l,submitForm:function(r){if(r.preventDefault(),""!==e.input.value){for(t=e.input.value;e.currencyTable.childNodes.length>1;)e.currencyTable.removeChild(e.currencyTable.lastChild);o(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const e="https://min-api.cryptocompare.com/data/news/?categories=";let t=[];const n=5;let r=0,a=n;const c=document.querySelector(".currency-table"),o=document.querySelector(".invest-form"),i=document.querySelector(".invest-input"),l=document.querySelector(".news-table"),s=document.querySelector(".refresh-icon"),d=document.querySelector("#nav-main"),u=d.offsetTop,m=CurrencyTable({form:o,input:i,currencyTable:c,getNews:h,currencySymbols:t,chart:chart});function p(e){return fetch(e).then(e=>e.json())}function h(t){let c=t.join(",");s.children[0].classList.add("spin-animation"),setTimeout(function(){s.children[0].classList.remove("spin-animation")},500),fetchUrl=e.concat(c),p(fetchUrl).then(e=>(function(e){a>=5*n?(r=0,a=n):(r+=n,a+=n);let t=e.slice(r,a),c=document.createElement("tbody");null!==l&&(l.innerHTML=""),t.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`\n            <td><a class="font-weight-bold" href="${e.url}">${e.title}</a> <p>${e.source}</p>\n            </td>\n            `,c.appendChild(t)}),l.appendChild(c)})(e))}o.addEventListener("submit",e=>(function(e){m.submitForm(e)})(e)),s.addEventListener("click",()=>h(t)),window.addEventListener("scroll",function(){window.scrollY>=u?(document.body.style.paddingTop=d.offsetHeight+"px",document.body.classList.add("fixed-nav")):(document.body.style.paddingTop=0,document.body.classList.remove("fixed-nav"))}),p("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(e=>{m.buildTable(e),chart.getChartData("BTC","Bitcoin")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY3VyU3ltYm9sIiwiY3VyTmFtZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImZvckVhY2giLCJkIiwicHVzaCIsImNsb3NlIiwiZGF0ZVRpbWUiLCJkYXRlU3RyaW5nIiwiRGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aEluZGV4IiwiZ2V0TW9udGgiLCJwYXJzZURhdGUiLCJ0aW1lIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJkYXRhIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwicmVzcG9uc2l2ZSIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJzY2FsZXMiLCJ5QXhlcyIsInNjYWxlTGFiZWwiLCJkaXNwbGF5IiwibGFiZWxTdHJpbmciLCJmb250U2l6ZSIsInhBeGVzIiwiYnVpbGRDaGFydCIsIkN1cnJlbmN5VGFibGUiLCJnbG9iYWwiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwiY3VycmVuY3lDaGFydCIsImJ1aWxkVGFibGUiLCJjdXJyZW5jaWVzIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJ0ZXh0Q29udGVudCIsInRib2R5IiwiY3JlYXRlRWxlbWVudCIsImN1cnJTeW1ib2xzIiwiY3VyIiwiY29pbiIsInN5bWJvbCIsInRyIiwiaW5uZXJIVE1MIiwicmFuayIsIm5hbWUiLCJmb3JtYXROdW0iLCJtYXJrZXRfY2FwX3VzZCIsInByaWNlX3VzZCIsImNhbGN1bGF0ZUludmVzdG1lbnQiLCJzdHlsZSIsImN1cnNvciIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJldmVudCIsImFsbEFjdGl2ZSIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImFkZCIsInNob3dhY3RpdmVSb3ciLCJjdXJyZW5jeVRhYmxlIiwiZ2V0TmV3cyIsImN1cnJlbmN5U3ltYm9sIiwidmFsdWUiLCJuZXdOdW0iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlcGxhY2UiLCJwYXJzZUludCIsInN1Ym1pdEZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwibmV3c1VybCIsImN1cnJlbmN5U3ltYm9scyIsIm5ld3NMaW1pdCIsImZpcnN0QXJ0aWNsZSIsImxhc3RBcnRpY2xlIiwicXVlcnlTZWxlY3RvciIsImZvcm0iLCJuZXdzVGFibGUiLCJyZWZyZXNoQnV0dG9uIiwibmF2IiwidG9wT2ZOYXYiLCJvZmZzZXRUb3AiLCJDdXJyZW5jeSIsImdldERhdGEiLCJ1cmwiLCJjdXJyU3RyaW5nIiwiam9pbiIsImNoaWxkcmVuIiwic2V0VGltZW91dCIsImZldGNoVXJsIiwiY29uY2F0IiwiYXJ0aWNsZXMiLCJhcnRpY2xlc1NhbXBsZSIsInNsaWNlIiwiaW5mbyIsInRpdGxlIiwic291cmNlIiwic2hvd05ld3MiLCJ3aW5kb3ciLCJzY3JvbGxZIiwiYm9keSIsInBhZGRpbmdUb3AiLCJvZmZzZXRIZWlnaHQiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsV0FFQSxJQUFBQyxHQUFBLFVBQUEsV0FBQSxRQUFBLFFB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QUMsSUFDQW1ILEVBQUFsRSxXQUFBakQsR0FDQWIsTUFBQVEsYUFBQSxNQUFBIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5jb25zdCBjaGFydCA9ICggZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIGxldCBsYWJlbHMgICA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiXTtcclxuICAgIGxldCBkYXRhc2V0cyA9IFtdO1xyXG4gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcnREYXRhICggY3VyU3ltYm9sLCBjdXJOYW1lICl7XHJcblxyXG4gICAgICAgIGxhYmVscyAgID0gW107XHJcbiAgICAgICAgZGF0YXNldHMgPSBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZldGNoKCBgaHR0cHM6Ly9jb3JzLWFueXdoZXJlLmhlcm9rdWFwcC5jb20vaHR0cHM6Ly9taW4tYXBpLmNyeXB0b2NvbXBhcmUuY29tL2RhdGEvaGlzdG9kYXk/ZnN5bT0ke2N1clN5bWJvbH0mdHN5bT1VU0QmbGltaXQ9NmAgKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vID09PT09IENoZWNrIGZvciBFbXB0eSBEYXRhID09PT09IC8vXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2xvc2luZ1ByaWNlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5EYXRhLmZvckVhY2goIGQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUHJpY2VzLnB1c2goIGQuY2xvc2UgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzLnB1c2goIHBhcnNlRGF0ZSggZC50aW1lICkgKVxyXG4gICAgICAgICAgICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZUNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKVxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXRzLnB1c2goIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGN1ck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICdyZ2JhKCAwLCAwLCAwLCAwLjcpJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiAnIzY2ZmY2NicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50UmFkaXVzOiA1LFx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50SG92ZXJSYWRpdXM6IDgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XHJcbiAgICAgICAgICAgICAgICB9IClcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gcGFyc2VEYXRlKCBkYXRlVGltZSApIHtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IG5ldyBEYXRlKCBkYXRlVGltZSAqIDEwMDAgKTtcclxuICAgICAgICBjb25zdCBtb250aE5hbWVzID0gW1xyXG4gICAgICAgICAgICBcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsXHJcbiAgICAgICAgICAgIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiLFxyXG4gICAgICAgICAgICBcIkF1Z3VzdFwiLCBcIlNlcHRlbWJlclwiLCBcIk9jdG9iZXJcIixcclxuICAgICAgICAgICAgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGRheSA9IGRhdGVTdHJpbmcuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoSW5kZXggPSBkYXRlU3RyaW5nLmdldE1vbnRoKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICByZXR1cm4gYCR7bW9udGhOYW1lc1ttb250aEluZGV4XX0gJHtkYXl9YDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFydCgpIHtcclxuICAgICAgICBjb25zdCBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVuY3ktY2hhcnQnKS5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xyXG4gICAgICAgICAgICAvLyBoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXHJcbiAgICAgICAgICAgIHR5cGU6ICdsaW5lJyxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBmb3Igb3VyIGRhdGFzZXRcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxzLFxyXG4gICAgICAgICAgICAgICAgZGF0YXNldHNcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxyXG4gICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOnRydWUsXHJcbiAgICAgICAgICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOmZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2NhbGVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeUF4ZXM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZUxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nOiAnUHJpY2UgaW4gVVNEJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDIwXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICAgICAgeEF4ZXM6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlTGFiZWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nOiAnRGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSYW5kb21Db2xvcigpIHtcclxuICAgICAgICByZXR1cm4gYHJnYmEoJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAke2dldFJhbmRvbSgpfSwgMC44KWA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbSgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KS50b1N0cmluZygpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldENoYXJ0RGF0YVxyXG4gICAgfVxyXG59ICkoKVxyXG4iLCJjb25zdCBDdXJyZW5jeVRhYmxlID0gZnVuY3Rpb24gKCBnbG9iYWwgKSB7XHJcbiAgICBcclxuICAgIGxldCBpbnZlc3RBbW91bnQgICAgPSAwO1xyXG4gICAgbGV0IGFsbEN1cnJlbmNpZXMgICA9IFtdO1xyXG4gICAgbGV0IGZpYXQgICAgICAgICAgICA9IFsnJCcsICdVU0QnXTtcclxuICAgIGNvbnN0IGMyMEluZGV4ICAgICAgPSBbIDEzLjQsIDEyLjMsIDEwLjUsIDEwLjIsIDkuMiwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA3LjYsIDUuNCwgNC45LCA0LjMsIDQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMy44LCAzLjQsIDIuMSwgMS43LCAxLjUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMS41LCAxLjIsIDEuMiwgMC45LCAwLjkgXTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW5jeUNoYXJ0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdjdXJyZW5jeS1jaGFydCcgKTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Y3VycmVuY2llc30gQXJyYXkgYXJyYXkgb2YgY3VycmVuY2llcyBkYXRhICBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYnVpbGRUYWJsZSggY3VycmVuY2llcyApIHtcclxuICAgICAgICAvLyBBZGQgZmlhdCB0byB0aGVhZFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWF0JykuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS50ZXh0Q29udGVudCA9IGAgKCR7ZmlhdFsxXX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWxsQ3VycmVuY2llcyA9IGN1cnJlbmNpZXM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xyXG4gICAgICAgIGxldCBjdXJyU3ltYm9scyA9IFtdO1xyXG4gICAgICAgIGN1cnJlbmNpZXMuZm9yRWFjaCggKCBjdXIsIGNvaW4gKSA9PiB7XHJcbiAgICAgICAgICAgIGN1cnJTeW1ib2xzLnB1c2goY3VyLnN5bWJvbCk7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0cicgKTtcclxuICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLnJhbmsgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPVwiY3VycmVuY3ktbmFtZVwiPiR7IGN1ci5uYW1lfTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjdXJyZW5jeS1zeW1ib2xcIj4gJHtjdXIuc3ltYm9sfSA8L3NwYW4+PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgZm9ybWF0TnVtKCBjdXIubWFya2V0X2NhcF91c2QgKSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgZm9ybWF0TnVtKCBjdXIucHJpY2VfdXNkICkgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGMyMEluZGV4W2NvaW5dIH0lPC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY2FsY3VsYXRlSW52ZXN0bWVudCggYzIwSW5kZXhbY29pbl0gKSB9PGJyPjxzcGFuIGNsYXNzPSdjb2luLW91dHB1dCc+ICAo4Li/JHsgKGludmVzdEFtb3VudCAqIGMyMEluZGV4W2NvaW5dIC8gMTAwKSAvIGN1ci5wcmljZV91c2R9KTwvc3Bhbj48L3RkPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB0ci5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApICBcclxuXHJcbiAgICAgICAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZSApID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdHIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5Q2hhcnQuc2Nyb2xsSW50b1ZpZXcoIHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3dhY3RpdmVSb3coIGUgKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q2hhcnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICAgICBnbG9iYWwuY2hhcnQuZ2V0Q2hhcnREYXRhKCBjdXIuc3ltYm9sLCBjdXIubmFtZSApOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgIH0gKSAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XHJcbiAgICAgICAgZ2xvYmFsLmdldE5ld3MoY3VyclN5bWJvbHMpO1xyXG4gICAgICAgIGdsb2JhbC5jdXJyZW5jeVN5bWJvbCA9IGN1cnJTeW1ib2xzOyAgIFxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBzaG93YWN0aXZlUm93KCBldmVudCApIHtcclxuICAgICAgICBsZXQgYWxsQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJ3RyLmFjdGl2ZScgKTtcclxuICAgICAgICBmb3IoIGxldCBpID0gMCA7IGkgPCBhbGxBY3RpdmUubGVuZ3RoIDsgaSArKyApe1xyXG4gICAgICAgICAgICBhbGxBY3RpdmVbaV0uY2xhc3NMaXN0LnJlbW92ZSggJ2FjdGl2ZScgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCAnYWN0aXZlJyApO1xyXG4gICAgICAgIGV2ZW50LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3BhbidcclxuICAgICAgICAgICAgPyAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCAnYWN0aXZlJyApXHJcbiAgICAgICAgICAgIDogIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoICdhY3RpdmUnICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3ZhbHVlfSBOdW1iZXIgZnJvbSBjZWxsRGF0YVxyXG4gICAgICogQHJldHVybnMge051bWJlcn0gRm9ybWF0dGVkIHdpdGggY29tbWFzIGFuZCBmaWF0IHN5bWJvbC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZm9ybWF0TnVtKCB2YWx1ZSApIHtcclxuICAgICAgICBsZXQgbmV3TnVtID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBmb3IgZmxvYXRcclxuICAgICAgICBpZiAobmV3TnVtICUgMSAhPT0gMCAmJiBuZXdOdW0gPiAxKSB7XHJcbiAgICAgICAgICAgIC8vIEFkZCBmaWF0IGN1cnJlbmN5IHN5bWJvbCAkXHJcbiAgICAgICAgICAgIC8vIElmIHByaWNlIGlzIG92ZXIgMSwgbGltaXQgZGVjaW1hbHMgdG8gdHdvIHBsYWNlc1xyXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtLnRvRml4ZWQoMil9YDtcclxuICAgICAgICAgICAgLy8gQWRkIGNvbW1hIGFmdGVyIGV2ZXJ5IHRocmVlIG51bWJlcnNcclxuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobmV3TnVtIDwgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bX1gO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG1hcmtldCBjYXAsIG5vIGRlY2ltYWwgcGxhY2VcclxuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke3BhcnNlSW50KG5ld051bSl9YDtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0gXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBjdXJyZW5jeSdzIGluZGV4IHBlcmNlbnRhZ2VcclxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVJbnZlc3RtZW50KCB2YWx1ZSApIHtcclxuICAgICAgICAvLyA9PT09PSBOZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGNhbGN1bGF0aW9ucyBoZXJlID09PT09IC8vXHJcbiAgICAgICAgbGV0IGFtb3VudCA9IGludmVzdEFtb3VudCAqIHZhbHVlIC8gMTAwO1xyXG4gICAgICAgIHJldHVybiBmb3JtYXROdW0oIGFtb3VudCApOyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSggZSApIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIGludmVzdEFtb3VudCA9IGdsb2JhbC5pbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cclxuICAgICAgICAgICAgd2hpbGUgKGdsb2JhbC5jdXJyZW5jeVRhYmxlLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBidWlsZFRhYmxlKCBhbGxDdXJyZW5jaWVzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJ1aWxkVGFibGUsXHJcbiAgICAgICAgZm9ybWF0TnVtLCBcclxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxyXG4gICAgICAgIHN1Ym1pdEZvcm1cclxuICAgIH1cclxuXHJcbn0iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXHJcbiAgICBcclxuXHJcbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xyXG4gICAgY29uc3QgbmV3c1VybCA9ICdodHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9uZXdzLz9jYXRlZ29yaWVzPSc7XHJcbiAgICBsZXQgY3VycmVuY3lTeW1ib2xzID0gW107XHJcblxyXG4gICAgLy8gbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gc2hvd1xyXG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcclxuICAgIGxldCBmaXJzdEFydGljbGUgPSAwO1xyXG4gICAgbGV0IGxhc3RBcnRpY2xlID0gbmV3c0xpbWl0O1xyXG5cclxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xyXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XHJcbiAgICBjb25zdCBmb3JtICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5pbnZlc3QtZm9ybScgKTtcclxuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcclxuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XHJcbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5yZWZyZXNoLWljb24nICk7XHJcbiAgICBjb25zdCBuYXYgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1tYWluJyk7XHJcbiAgICBjb25zdCB0b3BPZk5hdiAgICAgID0gbmF2Lm9mZnNldFRvcDtcclxuICAgIFxyXG5cclxuXHJcbiAgICAvLyA9PT09PSB0aGlzIHZhcmlhYmxlIGhvbGRzIGFsbCB0aGUgZnVuY3Rpb25zIGZvciBjdXJyZW5jeSB0YWJsZSA9PT09PSAvL1xyXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzLCBjdXJyZW5jeVN5bWJvbHMsIGNoYXJ0IH0gKTtcclxuXHJcbiAgICAvLyA9PT09PSBET00gTGlzdGVuZXJzID09PT09IC8vIFxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApICk7XHJcbiAgICByZWZyZXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IGdldE5ld3MoIGN1cnJlbmN5U3ltYm9scyApIClcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmaXhOYXYpO1xyXG5cclxuXHJcblxyXG4gICAgZ2V0RGF0YShjMjBVcmwpLnRoZW4oIHJlcyA9PiB7XHJcbiAgICAgICAgQ3VycmVuY3kuYnVpbGRUYWJsZSggcmVzICk7XHJcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCAnQlRDJywgJ0JpdGNvaW4nICk7XHJcbiAgICB9IClcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZml4TmF2KCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+PSB0b3BPZk5hdikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSBuYXYub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmaXhlZC1uYXYnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLW5hdicpO1xyXG4gICAgICAgIH0gICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7IHByb21pc2UgfSBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCggdXJsIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXHJcbiAgICB9OyBcclxuXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XHJcbiAgICAgICAgLy8gSWYgdXNlciByZWZyZXNoZXMgbmV3cywgcHVsbCBuZXcgYmF0Y2hcclxuICAgICAgICAvLyBXaGVuIHVzZXIgY3ljbGVzIDUgdGltZXMsIHN0YXJ0IGFnYWluXHJcbiAgICAgICAgaWYgKGxhc3RBcnRpY2xlID49IG5ld3NMaW1pdCAqIDUpIHtcclxuICAgICAgICAgICAgZmlyc3RBcnRpY2xlID0gMDtcclxuICAgICAgICAgICAgbGFzdEFydGljbGUgPSBuZXdzTGltaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZmlyc3RBcnRpY2xlICs9IG5ld3NMaW1pdDtcclxuICAgICAgICAgICAgbGFzdEFydGljbGUgKz0gbmV3c0xpbWl0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXJ0aWNsZXNTYW1wbGUgPSBhcnRpY2xlcy5zbGljZShmaXJzdEFydGljbGUsIGxhc3RBcnRpY2xlKTsgIFxyXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcclxuIFxyXG4gICAgICAgIC8vIGlmIG5ld3N0YWJsZSBpcyBhbHJlYWR5IHByZXNlbnQsIGNsZWFyIGJlZm9yZVxyXG4gICAgICAgIC8vIGFwcGVuZGluZ1xyXG4gICAgICAgIGlmIChuZXdzVGFibGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbmV3c1RhYmxlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIGFydGljbGVzU2FtcGxlLmZvckVhY2goKGluZm8pID0+IHtcclxuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xyXG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDx0ZD48YSBjbGFzcz1cImZvbnQtd2VpZ2h0LWJvbGRcIiBocmVmPVwiJHtpbmZvLnVybH1cIj4ke2luZm8udGl0bGV9PC9hPiA8cD4ke2luZm8uc291cmNlfTwvcD5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBuZXdzVGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogY29uc3RydWN0IG5ld3MgYmFzZWQgb24gdG9wIDIwIGNyeXB0b1xyXG4gICAgICogQHBhcmFtIHtjdXJyU3ltYm9sfSBBcnJheSBjdXJyZW5jeXN5bWJvbHNcclxuICAgICAqIGVnOiBbJ0JUQycsICdFVEgnXVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE5ld3MoY3VyclN5bWJvbHMpIHtcclxuICAgICAgICBsZXQgY3VyclN0cmluZyA9IGN1cnJTeW1ib2xzLmpvaW4oXCIsXCIpO1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnc3Bpbi1hbmltYXRpb24nKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIFx0ICAgIHJlZnJlc2hCdXR0b24uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnc3Bpbi1hbmltYXRpb24nKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgZmV0Y2hVcmwgPSBuZXdzVXJsLmNvbmNhdChjdXJyU3RyaW5nKTtcclxuXHJcbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XHJcbiAgICAgICAgQ3VycmVuY3kuc3VibWl0Rm9ybSggZSApO1xyXG4gICAgfVxyXG59IClcclxuIl19
