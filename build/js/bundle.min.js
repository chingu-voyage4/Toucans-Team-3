const chart=function(){let e=["January","February","March","April","May","June","July"],t=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r,a){return e=[],t=[],fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${r}&tsym=USD&limit=6`).then(e=>e.json()).then(r=>{let o=[];r.Data.forEach(t=>{o.push(t.close),e.push(function(e){const t=new Date(1e3*e),n=t.getDate(),r=t.getMonth();return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${n}`}(t.time))}),n(),n(),n(),t.push({label:a,backgroundColor:"transparent",borderColor:"rgba( 0, 0, 0, 0.7)",borderWidth:3,pointBackgroundColor:"#66ff66",pointRadius:5,pointHoverRadius:8,data:o}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:t},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Price in USD",fontSize:20}}],xAxes:[{scaleLabel:{display:!0,labelString:"Day",fontSize:20}}]}}})}()})}}}(),CurrencyTable=function(e){let t=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],o=document.getElementById("currency-chart");function c(t){document.querySelectorAll(".fiat").forEach(e=>e.textContent=` (${r[1]})`),n=t;let c=document.createElement("tbody"),d=[];t.forEach((t,n)=>{d.push(t.symbol);let r=document.createElement("tr");r.innerHTML=`\n                    <td>${t.rank}</td>\n                    <td><span class="currency-name">${t.name}</span> <span class="currency-symbol"> ${t.symbol} </span></td>\n                    <td>${l(t.market_cap_usd)}</td>\n                    <td>${l(t.price_usd)}</td>\n                    <td>${a[n]}%</td>\n                    <td>${i(a[n])}</td>\n            `,r.style.cursor="pointer",c.appendChild(r),r.addEventListener("click",n=>{!function(e){let t=document.querySelectorAll("tr.active");for(let e=0;e<t.length;e++)t[e].classList.remove("active");"span"===e.target.nodeName.toLowerCase()?e.target.parentNode.parentNode.classList.add("active"):e.target.parentNode.classList.add("active")}(n),o.innerHTML="",e.chart.getChartData(t.symbol,t.name),o.scrollIntoView({behavior:"smooth"})})}),e.currencyTable.appendChild(c),e.getNews(d),e.currencySymbol=d}function l(e){let t=parseFloat(e);return t%1!=0&&t>1?(t=`${r[0]}${t.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):t<1?`${r[0]}${t}`:(t=`${r[0]}${parseInt(t)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function i(e){let n=t*e/100;return t-=n,l(n)}return{buildTable:c,formatNum:l,calculateInvestment:i,submitForm:function(r){if(r.preventDefault(),""!==e.input.value){for(t=e.input.value;e.currencyTable.childNodes.length>1;)e.currencyTable.removeChild(e.currencyTable.lastChild);c(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const e="https://min-api.cryptocompare.com/data/news/?categories=";let t=[];const n=5;let r=0,a=n;const o=document.querySelector(".currency-table"),c=document.querySelector(".invest-form"),l=document.querySelector(".invest-input"),i=document.querySelector(".news-table"),d=document.querySelector(".refresh-icon"),s=document.querySelector("#nav-main"),u=s.offsetTop,m=CurrencyTable({form:c,input:l,currencyTable:o,getNews:h,currencySymbols:t,chart:chart});function p(e){return fetch(e).then(e=>e.json())}function h(t){let o=t.join(",");d.children[0].classList.add("spin-animation"),setTimeout(function(){d.children[0].classList.remove("spin-animation")},500),fetchUrl=e.concat(o),p(fetchUrl).then(e=>(function(e){a>=5*n?(r=0,a=n):(r+=n,a+=n);let t=e.slice(r,a),o=document.createElement("tbody");null!==i&&(i.innerHTML=""),t.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`\n            <td><a class="font-weight-bold" href="${e.url}">${e.title}</a> <p>${e.source}</p>\n            </td>\n            `,o.appendChild(t)}),i.appendChild(o)})(e))}c.addEventListener("submit",e=>(function(e){m.submitForm(e)})(e)),d.addEventListener("click",()=>h(t)),window.addEventListener("scroll",function(){window.scrollY>=u?(document.body.style.paddingTop=s.offsetHeight+"px",document.body.classList.add("fixed-nav")):(document.body.style.paddingTop=0,document.body.classList.remove("fixed-nav"))}),p("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(e=>{m.buildTable(e),chart.getChartData("BTC","Bitcoin")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY3VyU3ltYm9sIiwiY3VyTmFtZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImZvckVhY2giLCJkIiwicHVzaCIsImNsb3NlIiwiZGF0ZVRpbWUiLCJkYXRlU3RyaW5nIiwiRGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aEluZGV4IiwiZ2V0TW9udGgiLCJwYXJzZURhdGUiLCJ0aW1lIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJkYXRhIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwicmVzcG9uc2l2ZSIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJzY2FsZXMiLCJ5QXhlcyIsInNjYWxlTGFiZWwiLCJkaXNwbGF5IiwibGFiZWxTdHJpbmciLCJmb250U2l6ZSIsInhBeGVzIiwiYnVpbGRDaGFydCIsIkN1cnJlbmN5VGFibGUiLCJnbG9iYWwiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwiY3VycmVuY3lDaGFydCIsImJ1aWxkVGFibGUiLCJjdXJyZW5jaWVzIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJ0ZXh0Q29udGVudCIsInRib2R5IiwiY3JlYXRlRWxlbWVudCIsImN1cnJTeW1ib2xzIiwiY3VyIiwiY29pbiIsInN5bWJvbCIsInRyIiwiaW5uZXJIVE1MIiwicmFuayIsIm5hbWUiLCJmb3JtYXROdW0iLCJtYXJrZXRfY2FwX3VzZCIsInByaWNlX3VzZCIsImNhbGN1bGF0ZUludmVzdG1lbnQiLCJzdHlsZSIsImN1cnNvciIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJldmVudCIsImFsbEFjdGl2ZSIsImkiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImFkZCIsInNob3dhY3RpdmVSb3ciLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiY3VycmVuY3lUYWJsZSIsImdldE5ld3MiLCJjdXJyZW5jeVN5bWJvbCIsInZhbHVlIiwibmV3TnVtIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJhbW91bnQiLCJzdWJtaXRGb3JtIiwicHJldmVudERlZmF1bHQiLCJpbnB1dCIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsIm5ld3NVcmwiLCJjdXJyZW5jeVN5bWJvbHMiLCJuZXdzTGltaXQiLCJmaXJzdEFydGljbGUiLCJsYXN0QXJ0aWNsZSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwibmV3c1RhYmxlIiwicmVmcmVzaEJ1dHRvbiIsIm5hdiIsInRvcE9mTmF2Iiwib2Zmc2V0VG9wIiwiQ3VycmVuY3kiLCJnZXREYXRhIiwidXJsIiwiY3VyclN0cmluZyIsImpvaW4iLCJjaGlsZHJlbiIsInNldFRpbWVvdXQiLCJmZXRjaFVybCIsImNvbmNhdCIsImFydGljbGVzIiwiYXJ0aWNsZXNTYW1wbGUiLCJzbGljZSIsImluZm8iLCJ0aXRsZSIsInNvdXJjZSIsInNob3dOZXdzIiwid2luZG93Iiwic2Nyb2xsWSIsImJvZHkiLCJwYWRkaW5nVG9wIiwib2Zmc2V0SGVpZ2h0Il0sIm1hcHBpbmdzIjoiQUFDQSxNQUFBQSxNQUFBLFdBRUEsSUFBQUMsR0FBQSxVQUFBLFdBQUEsUUFBQSxRQUFBLE1BQUEsT0FBQSxRQUNBQyxLQThGQSxTQUFBQyxJQUNBLE9BQUFDLEtBQUFDLE1BQUEsSUFBQUQsS0FBQUUsVUFBQUMsV0FJQSxPQUNBQyxhQWpHQSxTQUFBQyxFQUFBQyxHQUtBLE9BSEFULEtBQ0FDLEtBRUFTLGtHQUFBRixzQkFDQUcsS0FBQUMsR0FBQUEsRUFBQUMsUUFDQUYsS0FBQUMsSUFJQSxJQUFBRSxLQUNBRixFQUFBRyxLQUFBQyxRQUFBQyxJQUNBSCxFQUFBSSxLQUFBRCxFQUFBRSxPQUNBbkIsRUFBQWtCLEtBbUJBLFNBQUFFLEdBRUEsTUFBQUMsRUFBQSxJQUFBQyxLQUFBLElBQUFGLEdBT0FHLEVBQUFGLEVBQUFHLFVBQ0FDLEVBQUFKLEVBQUFLLFdBRUEsVUFSQSxVQUFBLFdBQUEsUUFDQSxRQUFBLE1BQUEsT0FBQSxPQUNBLFNBQUEsWUFBQSxVQUNBLFdBQUEsWUFLQUQsTUFBQUYsSUEvQkFJLENBQUFWLEVBQUFXLFNBeUVBMUIsSUFBQUEsSUFBQUEsSUF0RUFELEVBQUFpQixNQUNBVyxNQUFBcEIsRUFDQXFCLGdCQUFBLGNBQ0FDLFlBQUEsc0JBQ0FDLFlBQUEsRUFDQUMscUJBQUEsVUFDQUMsWUFBQSxFQUNBQyxpQkFBQSxFQUNBQyxLQUFBdEIsSUF3QkEsV0FDQSxNQUFBdUIsRUFBQUMsU0FBQUMsZUFBQSxrQkFBQUMsV0FBQSxNQUNBLElBQUFDLE1BQUFKLEdBRUFLLEtBQUEsT0FHQU4sTUFDQXBDLE9BQUFBLEVBQ0FDLFNBQUFBLEdBSUEwQyxTQUNBQyxZQUFBLEVBQ0FDLHFCQUFBLEVBQ0FDLFFBQ0FDLFFBQ0FDLFlBQ0FDLFNBQUEsRUFDQUMsWUFBQSxlQUNBQyxTQUFBLE1BR0FDLFFBQ0FKLFlBQ0FDLFNBQUEsRUFDQUMsWUFBQSxNQUNBQyxTQUFBLFVBakRBRSxPQWxDQSxHQ0RBQyxjQUFBLFNBQUFDLEdBRUEsSUFBQUMsRUFBQSxFQUNBQyxLQUNBQyxHQUFBLElBQUEsT0FDQSxNQUFBQyxHQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUEsSUFDQSxJQUFBLElBQUEsSUFBQSxJQUFBLEVBQ0EsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUNBLElBQUEsSUFBQSxJQUFBLEdBQUEsSUFFQUMsRUFBQXRCLFNBQUFDLGVBQUEsa0JBT0EsU0FBQXNCLEVBQUFDLEdBRUF4QixTQUFBeUIsaUJBQUEsU0FBQS9DLFFBQUFnRCxHQUFBQSxFQUFBQyxpQkFBQVAsRUFBQSxPQUVBRCxFQUFBSyxFQUVBLElBQUFJLEVBQUE1QixTQUFBNkIsY0FBQSxTQUNBQyxLQUNBTixFQUFBOUMsUUFBQSxDQUFBcUQsRUFBQUMsS0FDQUYsRUFBQWxELEtBQUFtRCxFQUFBRSxRQUNBLElBQUFDLEVBQUFsQyxTQUFBNkIsY0FBQSxNQUNBSyxFQUFBQyx1Q0FDQUosRUFBQUssa0VBQ0FMLEVBQUFNLDhDQUFBTixFQUFBRSxnREFDQUssRUFBQVAsRUFBQVEsaURBQ0FELEVBQUFQLEVBQUFTLDRDQUNBbkIsRUFBQVcscUNBQ0FTLEVBQUFwQixFQUFBVyx5QkFFQUUsRUFBQVEsTUFBQUMsT0FBQSxVQUNBZixFQUFBZ0IsWUFBQVYsR0FFQUEsRUFBQVcsaUJBQUEsUUFBQUMsS0FjQSxTQUFBQyxHQUNBLElBQUFDLEVBQUFoRCxTQUFBeUIsaUJBQUEsYUFDQSxJQUFBLElBQUF3QixFQUFBLEVBQUFBLEVBQUFELEVBQUFFLE9BQUFELElBQ0FELEVBQUFDLEdBQUFFLFVBQUFDLE9BQUEsVUFHQSxTQUFBTCxFQUFBTSxPQUFBQyxTQUFBQyxjQUNBUixFQUFBTSxPQUFBRyxXQUFBQSxXQUFBTCxVQUFBTSxJQUFBLFVBQ0FWLEVBQUFNLE9BQUFHLFdBQUFMLFVBQUFNLElBQUEsVUFyQkFDLENBQUFaLEdBQ0F4QixFQUFBYSxVQUFBLEdBQ0FsQixFQUFBeEQsTUFBQVEsYUFBQThELEVBQUFFLE9BQUFGLEVBQUFNLE1BQ0FmLEVBQUFxQyxnQkFBQUMsU0FBQSxlQUlBM0MsRUFBQTRDLGNBQUFqQixZQUFBaEIsR0FDQVgsRUFBQTZDLFFBQUFoQyxHQUNBYixFQUFBOEMsZUFBQWpDLEVBcUJBLFNBQUFRLEVBQUEwQixHQUNBLElBQUFDLEVBQUFDLFdBQUFGLEdBR0EsT0FBQUMsRUFBQSxHQUFBLEdBQUFBLEVBQUEsR0FHQUEsS0FBQTdDLEVBQUEsS0FBQTZDLEVBQUFFLFFBQUEsTUFFQUMsUUFBQSwyQkFBQSxPQUNBSCxFQUFBLEtBQ0E3QyxFQUFBLEtBQUE2QyxLQUdBQSxLQUFBN0MsRUFBQSxLQUFBaUQsU0FBQUosTUFDQUcsUUFBQSwyQkFBQSxPQVVBLFNBQUEzQixFQUFBdUIsR0FFQSxJQUFBTSxFQUFBcEQsRUFBQThDLEVBQUEsSUFFQSxPQURBOUMsR0FBQW9ELEVBQ0FoQyxFQUFBZ0MsR0FrQkEsT0FDQS9DLFdBQUFBLEVBQ0FlLFVBQUFBLEVBQ0FHLG9CQUFBQSxFQUNBOEIsV0FsQkEsU0FBQXpCLEdBRUEsR0FEQUEsRUFBQTBCLGlCQUNBLEtBQUF2RCxFQUFBd0QsTUFBQVQsTUFBQSxDQUlBLElBSEE5QyxFQUFBRCxFQUFBd0QsTUFBQVQsTUFHQS9DLEVBQUE0QyxjQUFBYSxXQUFBeEIsT0FBQSxHQUNBakMsRUFBQTRDLGNBQUFjLFlBQUExRCxFQUFBNEMsY0FBQWUsV0FFQXJELEVBQUFKLE9DaEhBbkIsU0FBQTZDLGlCQUFBLG1CQUFBLEtBS0EsTUFDQWdDLEVBQUEsMkRBQ0EsSUFBQUMsS0FHQSxNQUFBQyxFQUFBLEVBQ0EsSUFBQUMsRUFBQSxFQUNBQyxFQUFBRixFQUdBLE1BQUFsQixFQUFBN0QsU0FBQWtGLGNBQUEsbUJBQ0FDLEVBQUFuRixTQUFBa0YsY0FBQSxnQkFDQVQsRUFBQXpFLFNBQUFrRixjQUFBLGlCQUNBRSxFQUFBcEYsU0FBQWtGLGNBQUEsZUFDQUcsRUFBQXJGLFNBQUFrRixjQUFBLGlCQUNBSSxFQUFBdEYsU0FBQWtGLGNBQUEsYUFDQUssRUFBQUQsRUFBQUUsVUFLQUMsRUFBQXpFLGVBQUFtRSxLQUFBQSxFQUFBVixNQUFBQSxFQUFBWixjQUFBQSxFQUFBQyxRQUFBQSxFQUFBZ0IsZ0JBQUFBLEVBQUFySCxNQUFBQSxRQWdDQSxTQUFBaUksRUFBQUMsR0FDQSxPQUFBdkgsTUFBQXVILEdBQ0F0SCxLQUFBQyxHQUFBQSxFQUFBQyxRQXVDQSxTQUFBdUYsRUFBQWhDLEdBQ0EsSUFBQThELEVBQUE5RCxFQUFBK0QsS0FBQSxLQUNBUixFQUFBUyxTQUFBLEdBQUEzQyxVQUFBTSxJQUFBLGtCQUNBc0MsV0FBQSxXQUNBVixFQUFBUyxTQUFBLEdBQUEzQyxVQUFBQyxPQUFBLG1CQUNBLEtBRUE0QyxTQUFBbkIsRUFBQW9CLE9BQUFMLEdBRUFGLEVBQUFNLFVBQUEzSCxLQUFBQyxJQTVDQSxTQUFBNEgsR0FHQWpCLEdBQUEsRUFBQUYsR0FDQUMsRUFBQSxFQUNBQyxFQUFBRixJQUVBQyxHQUFBRCxFQUNBRSxHQUFBRixHQUVBLElBQUFvQixFQUFBRCxFQUFBRSxNQUFBcEIsRUFBQUMsR0FDQXJELEVBQUE1QixTQUFBNkIsY0FBQSxTQUlBLE9BQUF1RCxJQUNBQSxFQUFBakQsVUFBQSxJQUdBZ0UsRUFBQXpILFFBQUEySCxJQUNBLElBQUFuRSxFQUFBbEMsU0FBQTZCLGNBQUEsTUFDQUssRUFBQUMsaUVBQ0FrRSxFQUFBVixRQUFBVSxFQUFBQyxnQkFBQUQsRUFBQUUsOENBR0EzRSxFQUFBZ0IsWUFBQVYsS0FFQWtELEVBQUF4QyxZQUFBaEIsSUFpQkE0RSxDQUFBbEksSUEvRUE2RyxFQUFBdEMsaUJBQUEsU0FBQUMsSUFtRkEsU0FBQUEsR0FDQTJDLEVBQUFsQixXQUFBekIsSUFwRkF5QixDQUFBekIsSUFDQXVDLEVBQUF4QyxpQkFBQSxRQUFBLElBQUFpQixFQUFBZ0IsSUFDQTJCLE9BQUE1RCxpQkFBQSxTQVdBLFdBQ0E0RCxPQUFBQyxTQUFBbkIsR0FDQXZGLFNBQUEyRyxLQUFBakUsTUFBQWtFLFdBQUF0QixFQUFBdUIsYUFBQSxLQUNBN0csU0FBQTJHLEtBQUF4RCxVQUFBTSxJQUFBLGVBRUF6RCxTQUFBMkcsS0FBQWpFLE1BQUFrRSxXQUFBLEVBQ0E1RyxTQUFBMkcsS0FBQXhELFVBQUFDLE9BQUEsZ0JBYkFzQyxFQTlCQSxxREE4QkFySCxLQUFBQyxJQUNBbUgsRUFBQWxFLFdBQUFqRCxHQUNBYixNQUFBUSxhQUFBLE1BQUEiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IGNoYXJ0ID0gKCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgbGV0IGxhYmVscyAgID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCJdO1xyXG4gICAgbGV0IGRhdGFzZXRzID0gW107XHJcbiAgICBcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDaGFydERhdGEgKCBjdXJTeW1ib2wsIGN1ck5hbWUgKXtcclxuXHJcbiAgICAgICAgbGFiZWxzICAgPSBbXTtcclxuICAgICAgICBkYXRhc2V0cyA9IFtdO1xyXG5cclxuICAgICAgICByZXR1cm4gZmV0Y2goIGBodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9oaXN0b2RheT9mc3ltPSR7Y3VyU3ltYm9sfSZ0c3ltPVVTRCZsaW1pdD02YCApXHJcbiAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT0gQ2hlY2sgZm9yIEVtcHR5IERhdGEgPT09PT0gLy9cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjbG9zaW5nUHJpY2VzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLkRhdGEuZm9yRWFjaCggZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NpbmdQcmljZXMucHVzaCggZC5jbG9zZSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMucHVzaCggcGFyc2VEYXRlKCBkLnRpbWUgKSApXHJcbiAgICAgICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lQ29sb3IgPSBnZXRSYW5kb21Db2xvcigpXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaCgge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY3VyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJ3JnYmEoIDAsIDAsIDAsIDAuNyknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRCYWNrZ3JvdW5kQ29sb3I6ICcjNjZmZjY2JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRSYWRpdXM6IDUsXHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRIb3ZlclJhZGl1czogOCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY2xvc2luZ1ByaWNlcyxcclxuICAgICAgICAgICAgICAgICAgICB9IClcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkQ2hhcnQoKTtcclxuICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBwYXJzZURhdGUoIGRhdGVUaW1lICkge1xyXG5cclxuICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gbmV3IERhdGUoIGRhdGVUaW1lICogMTAwMCApO1xyXG4gICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbXHJcbiAgICAgICAgICAgIFwiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIixcclxuICAgICAgICAgICAgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsXHJcbiAgICAgICAgICAgIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLFxyXG4gICAgICAgICAgICBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIlxyXG4gICAgICAgIF07XHJcbiAgICAgICAgY29uc3QgZGF5ID0gZGF0ZVN0cmluZy5nZXREYXRlKCk7XHJcbiAgICAgICAgY29uc3QgbW9udGhJbmRleCA9IGRhdGVTdHJpbmcuZ2V0TW9udGgoKTtcclxuICAgICAgICBcclxuICAgICAgICAgIHJldHVybiBgJHttb250aE5hbWVzW21vbnRoSW5kZXhdfSAke2RheX1gO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBidWlsZENoYXJ0KCkge1xyXG4gICAgICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW5jeS1jaGFydCcpLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XHJcbiAgICAgICAgICAgIC8vIGhlIHR5cGUgb2YgY2hhcnQgd2Ugd2FudCB0byBjcmVhdGVcclxuICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIFRoZSBkYXRhIGZvciBvdXIgZGF0YXNldFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbHMsXHJcbiAgICAgICAgICAgICAgICBkYXRhc2V0c1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBnbyBoZXJlXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6dHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86ZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzY2FsZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICB5QXhlczogW3tcclxuICAgICAgICAgICAgICAgICAgICAgIHNjYWxlTGFiZWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxTdHJpbmc6ICdQcmljZSBpbiBVU0QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMjBcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgICAgICB4QXhlczogW3tcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVMYWJlbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxTdHJpbmc6ICdEYXknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAyMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCkge1xyXG4gICAgICAgIHJldHVybiBgcmdiYSgke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAwLjgpYDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0Q2hhcnREYXRhXHJcbiAgICB9XHJcbn0gKSgpXHJcbiIsImNvbnN0IEN1cnJlbmN5VGFibGUgPSBmdW5jdGlvbiAoIGdsb2JhbCApIHtcclxuICAgIFxyXG4gICAgbGV0IGludmVzdEFtb3VudCAgICA9IDA7XHJcbiAgICBsZXQgYWxsQ3VycmVuY2llcyAgID0gW107XHJcbiAgICBsZXQgZmlhdCAgICAgICAgICAgID0gWyckJywgJ1VTRCddO1xyXG4gICAgY29uc3QgYzIwSW5kZXggICAgICA9IFsgMTMuNCwgMTIuMywgMTAuNSwgMTAuMiwgOS4yLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDcuNiwgNS40LCA0LjksIDQuMywgNCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzLjgsIDMuNCwgMi4xLCAxLjcsIDEuNSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLjUsIDEuMiwgMS4yLCAwLjksIDAuOSBdO1xyXG5cclxuICAgIGNvbnN0IGN1cnJlbmN5Q2hhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2N1cnJlbmN5LWNoYXJ0JyApO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtjdXJyZW5jaWVzfSBBcnJheSBhcnJheSBvZiBjdXJyZW5jaWVzIGRhdGEgIFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBidWlsZFRhYmxlKCBjdXJyZW5jaWVzICkge1xyXG4gICAgICAgIC8vIEFkZCBmaWF0IHRvIHRoZWFkXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpYXQnKS5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLnRleHRDb250ZW50ID0gYCAoJHtmaWF0WzFdfSlgKTtcclxuICAgICAgICBcclxuICAgICAgICBhbGxDdXJyZW5jaWVzID0gY3VycmVuY2llcztcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGJvZHknICk7XHJcbiAgICAgICAgbGV0IGN1cnJTeW1ib2xzID0gW107XHJcbiAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKCAoIGN1ciwgY29pbiApID0+IHtcclxuICAgICAgICAgICAgY3VyclN5bWJvbHMucHVzaChjdXIuc3ltYm9sKTtcclxuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xyXG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGN1ci5yYW5rIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD48c3BhbiBjbGFzcz1cImN1cnJlbmN5LW5hbWVcIj4keyBjdXIubmFtZX08L3NwYW4+IDxzcGFuIGNsYXNzPVwiY3VycmVuY3ktc3ltYm9sXCI+ICR7Y3VyLnN5bWJvbH0gPC9zcGFuPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLnByaWNlX3VzZCApIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjMjBJbmRleFtjb2luXSB9JTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTwvdGQ+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIHRyLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcclxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICkgIFxyXG5cclxuICAgICAgICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2hvd2FjdGl2ZVJvdyggZSApO1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDaGFydC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgICAgIGdsb2JhbC5jaGFydC5nZXRDaGFydERhdGEoIGN1ci5zeW1ib2wsIGN1ci5uYW1lICk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNoYXJ0LnNjcm9sbEludG9WaWV3KCB7IGJlaGF2aW9yOiAnc21vb3RoJyB9ICk7XHJcbiAgICAgICAgICAgICB9ICkgICAgXHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGdsb2JhbC5jdXJyZW5jeVRhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xyXG4gICAgICAgIGdsb2JhbC5nZXROZXdzKGN1cnJTeW1ib2xzKTtcclxuICAgICAgICBnbG9iYWwuY3VycmVuY3lTeW1ib2wgPSBjdXJyU3ltYm9sczsgICBcclxuICAgIH07XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dhY3RpdmVSb3coIGV2ZW50ICkge1xyXG4gICAgICAgIGxldCBhbGxBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAndHIuYWN0aXZlJyApO1xyXG4gICAgICAgIGZvciggbGV0IGkgPSAwIDsgaSA8IGFsbEFjdGl2ZS5sZW5ndGggOyBpICsrICl7XHJcbiAgICAgICAgICAgIGFsbEFjdGl2ZVtpXS5jbGFzc0xpc3QucmVtb3ZlKCAnYWN0aXZlJyApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoICdhY3RpdmUnICk7XHJcbiAgICAgICAgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzcGFuJ1xyXG4gICAgICAgICAgICA/ICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoICdhY3RpdmUnIClcclxuICAgICAgICAgICAgOiAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCggJ2FjdGl2ZScgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBmcm9tIGNlbGxEYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBmb3JtYXROdW0oIHZhbHVlICkge1xyXG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBmbG9hdFxyXG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcclxuICAgICAgICAgICAgLy8gQWRkIGZpYXQgY3VycmVuY3kgc3ltYm9sICRcclxuICAgICAgICAgICAgLy8gSWYgcHJpY2UgaXMgb3ZlciAxLCBsaW1pdCBkZWNpbWFscyB0byB0d28gcGxhY2VzXHJcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xyXG4gICAgICAgICAgICAvLyBBZGQgY29tbWEgYWZ0ZXIgZXZlcnkgdGhyZWUgbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxyXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7cGFyc2VJbnQobmV3TnVtKX1gO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSBcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxyXG4gICAgICogQHJldHVybnMge051bWJlcn0gXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xyXG4gICAgICAgIC8vID09PT09IE5lZWQgdG8gZmlndXJlIG91dCB0aGUgY2FsY3VsYXRpb25zIGhlcmUgPT09PT0gLy9cclxuICAgICAgICBsZXQgYW1vdW50ID0gaW52ZXN0QW1vdW50ICogdmFsdWUgLyAxMDA7XHJcbiAgICAgICAgaW52ZXN0QW1vdW50ID0gaW52ZXN0QW1vdW50IC0gYW1vdW50O1xyXG4gICAgICAgIHJldHVybiBmb3JtYXROdW0oIGFtb3VudCApOyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSggZSApIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIGludmVzdEFtb3VudCA9IGdsb2JhbC5pbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cclxuICAgICAgICAgICAgd2hpbGUgKGdsb2JhbC5jdXJyZW5jeVRhYmxlLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBidWlsZFRhYmxlKCBhbGxDdXJyZW5jaWVzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJ1aWxkVGFibGUsXHJcbiAgICAgICAgZm9ybWF0TnVtLCBcclxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxyXG4gICAgICAgIHN1Ym1pdEZvcm1cclxuICAgIH1cclxuXHJcbn0iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXHJcbiAgICBcclxuXHJcbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xyXG4gICAgY29uc3QgbmV3c1VybCA9ICdodHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9uZXdzLz9jYXRlZ29yaWVzPSc7XHJcbiAgICBsZXQgY3VycmVuY3lTeW1ib2xzID0gW107XHJcblxyXG4gICAgLy8gbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gc2hvd1xyXG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcclxuICAgIGxldCBmaXJzdEFydGljbGUgPSAwO1xyXG4gICAgbGV0IGxhc3RBcnRpY2xlID0gbmV3c0xpbWl0O1xyXG5cclxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xyXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XHJcbiAgICBjb25zdCBmb3JtICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5pbnZlc3QtZm9ybScgKTtcclxuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcclxuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XHJcbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5yZWZyZXNoLWljb24nICk7XHJcbiAgICBjb25zdCBuYXYgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1tYWluJyk7XHJcbiAgICBjb25zdCB0b3BPZk5hdiAgICAgID0gbmF2Lm9mZnNldFRvcDtcclxuICAgIFxyXG5cclxuXHJcbiAgICAvLyA9PT09PSB0aGlzIHZhcmlhYmxlIGhvbGRzIGFsbCB0aGUgZnVuY3Rpb25zIGZvciBjdXJyZW5jeSB0YWJsZSA9PT09PSAvL1xyXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzLCBjdXJyZW5jeVN5bWJvbHMsIGNoYXJ0IH0gKTtcclxuXHJcbiAgICAvLyA9PT09PSBET00gTGlzdGVuZXJzID09PT09IC8vIFxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApICk7XHJcbiAgICByZWZyZXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IGdldE5ld3MoIGN1cnJlbmN5U3ltYm9scyApIClcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmaXhOYXYpO1xyXG5cclxuXHJcblxyXG4gICAgZ2V0RGF0YShjMjBVcmwpLnRoZW4oIHJlcyA9PiB7XHJcbiAgICAgICAgQ3VycmVuY3kuYnVpbGRUYWJsZSggcmVzICk7XHJcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCAnQlRDJywgJ0JpdGNvaW4nICk7XHJcbiAgICB9IClcclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGZpeE5hdigpIHtcclxuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPj0gdG9wT2ZOYXYpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nVG9wID0gbmF2Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnZml4ZWQtbmF2Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZC1uYXYnKTtcclxuICAgICAgICB9ICAgICAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHt1cmx9IFN0cmluZyAgdXJsIHN0cmluZ1xyXG4gICAgICogQHJldHVybnMgeyBwcm9taXNlIH0gXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldERhdGEoIHVybCApIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goIHVybCApXHJcbiAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxyXG4gICAgfTsgXHJcblxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBzaG93TmV3cyhhcnRpY2xlcykge1xyXG4gICAgICAgIC8vIElmIHVzZXIgcmVmcmVzaGVzIG5ld3MsIHB1bGwgbmV3IGJhdGNoXHJcbiAgICAgICAgLy8gV2hlbiB1c2VyIGN5Y2xlcyA1IHRpbWVzLCBzdGFydCBhZ2FpblxyXG4gICAgICAgIGlmIChsYXN0QXJ0aWNsZSA+PSBuZXdzTGltaXQgKiA1KSB7XHJcbiAgICAgICAgICAgIGZpcnN0QXJ0aWNsZSA9IDA7XHJcbiAgICAgICAgICAgIGxhc3RBcnRpY2xlID0gbmV3c0xpbWl0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZpcnN0QXJ0aWNsZSArPSBuZXdzTGltaXQ7XHJcbiAgICAgICAgICAgIGxhc3RBcnRpY2xlICs9IG5ld3NMaW1pdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFydGljbGVzU2FtcGxlID0gYXJ0aWNsZXMuc2xpY2UoZmlyc3RBcnRpY2xlLCBsYXN0QXJ0aWNsZSk7ICBcclxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGJvZHknICk7XHJcbiBcclxuICAgICAgICAvLyBpZiBuZXdzdGFibGUgaXMgYWxyZWFkeSBwcmVzZW50LCBjbGVhciBiZWZvcmVcclxuICAgICAgICAvLyBhcHBlbmRpbmdcclxuICAgICAgICBpZiAobmV3c1RhYmxlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG5ld3NUYWJsZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB9XHJcbiBcclxuICAgICAgICBhcnRpY2xlc1NhbXBsZS5mb3JFYWNoKChpbmZvKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0cicgKTtcclxuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8dGQ+PGEgY2xhc3M9XCJmb250LXdlaWdodC1ib2xkXCIgaHJlZj1cIiR7aW5mby51cmx9XCI+JHtpbmZvLnRpdGxlfTwvYT4gPHA+JHtpbmZvLnNvdXJjZX08L3A+XHJcbiAgICAgICAgICAgIDwvdGQ+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbmV3c1RhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBcclxuICAgICAqIGNvbnN0cnVjdCBuZXdzIGJhc2VkIG9uIHRvcCAyMCBjcnlwdG9cclxuICAgICAqIEBwYXJhbSB7Y3VyclN5bWJvbH0gQXJyYXkgY3VycmVuY3lzeW1ib2xzXHJcbiAgICAgKiBlZzogWydCVEMnLCAnRVRIJ11cclxuICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXROZXdzKGN1cnJTeW1ib2xzKSB7XHJcbiAgICAgICAgbGV0IGN1cnJTdHJpbmcgPSBjdXJyU3ltYm9scy5qb2luKFwiLFwiKTtcclxuICAgICAgICByZWZyZXNoQnV0dG9uLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ3NwaW4tYW5pbWF0aW9uJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICBcdCAgICByZWZyZXNoQnV0dG9uLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3NwaW4tYW5pbWF0aW9uJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcblxyXG4gICAgICAgIGZldGNoVXJsID0gbmV3c1VybC5jb25jYXQoY3VyclN0cmluZyk7XHJcblxyXG4gICAgICAgIGdldERhdGEoZmV0Y2hVcmwpLnRoZW4ocmVzID0+IHNob3dOZXdzKHJlcykpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xyXG4gICAgICAgIEN1cnJlbmN5LnN1Ym1pdEZvcm0oIGUgKTtcclxuICAgIH1cclxufSApXHJcbiJdfQ==
