const chart=function(){let t=["January","February","March","April","May","June","July"],e=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){let o=r.filter((t,e)=>e<=9);Promise.all(o.map(t=>fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${t.symbol}&tsym=USD&limit=6`).then(t=>t.json()))).then(r=>{r.forEach((t,r)=>{let c=[];t.Data.forEach(t=>c.push(t.close));let a=`rgba(${n()}, ${n()}, ${n()}, 0.8)`;e.push({label:o[r].symbol,backgroundColor:"transparent",borderColor:a,borderWidth:4.5,pointBackgroundColor:a,pointRadius:5,pointHoverRadius:8,data:c})}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:t,datasets:e},options:{responsive:!0,maintainAspectRatio:!1}})}()})}}}(),CurrencyTable=function(t){let e=0,n=[],r=["$","USD"];const o=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9];function c(e){document.querySelectorAll(".fiat").forEach(t=>t.textContent=` (${r[1]})`),n=e;let c=document.createElement("tbody"),d=[];e.forEach((t,e)=>{d.push(t.symbol);let n=document.createElement("tr");n.innerHTML=`\n                    <td>${t.rank}</td>\n                    <td>${t.name}</td>\n                    <td>${a(t.market_cap_usd)}</td>\n                    <td>${a(t.price_usd)}</td>\n                    <td>${o[e]}%</td>\n                    <td>${l(o[e])}</td>\n            `,c.appendChild(n)}),t.currencyTable.appendChild(c),t.getNews(d),t.currencySymbol=d}function a(t){let e=parseFloat(t);return e%1!=0&&e>1?(e=`${r[0]}${e.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e<1?`${r[0]}${e}`:(e=`${r[0]}${parseInt(e)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function l(t){let n=e*t/100;return e-=n,a(n)}return{buildTable:c,formatNum:a,calculateInvestment:l,submitForm:function(r){if(r.preventDefault(),""!==t.input.value){for(e=t.input.value;t.currencyTable.childNodes.length>1;)t.currencyTable.removeChild(t.currencyTable.lastChild);c(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const t="https://min-api.cryptocompare.com/data/news/?categories=";let e=[];const n=5,r=document.querySelector(".currency-table"),o=document.querySelector(".invest-form"),c=document.querySelector(".invest-input"),a=document.querySelector(".news-table"),l=document.querySelector(".refresh-icon"),d=CurrencyTable({form:o,input:c,currencyTable:r,getNews:i,currencySymbols:e});function u(t){return fetch(t).then(t=>t.json())}function i(e){let r=e.join(",");fetchUrl=t.concat(r),u(fetchUrl).then(t=>(function(t){let e=t.slice(0,n),r=document.createElement("tbody");null!==a&&(a.innerHTML=""),e.forEach(t=>{let e=document.createElement("tr");e.innerHTML=`\n            <td><a class="font-weight-bold" href="${t.url}">${t.title}</a> <p>${t.source}</p>\n            </td>\n            `,r.appendChild(e)}),a.appendChild(r)})(t))}o.addEventListener("submit",t=>(function(t){d.submitForm(t)})(t)),l.addEventListener("click",()=>i(e)),u("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(t=>{d.buildTable(t),chart.getChartData(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY2hhcnREYXRhIiwiY3VycmVuY2llcyIsImZpbHRlciIsImNkIiwiaW5kZXgiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZmV0Y2giLCJzeW1ib2wiLCJ0aGVuIiwicmVzIiwianNvbiIsImZvckVhY2giLCJkYXRhIiwiY2xvc2luZ1ByaWNlcyIsIkRhdGEiLCJkIiwicHVzaCIsImNsb3NlIiwibGluZUNvbG9yIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJjdHgiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkNoYXJ0IiwidHlwZSIsIm9wdGlvbnMiLCJyZXNwb25zaXZlIiwibWFpbnRhaW5Bc3BlY3RSYXRpbyIsImJ1aWxkQ2hhcnQiLCJDdXJyZW5jeVRhYmxlIiwiZ2xvYmFsIiwiaW52ZXN0QW1vdW50IiwiYWxsQ3VycmVuY2llcyIsImZpYXQiLCJjMjBJbmRleCIsImJ1aWxkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjcmVhdGVFbGVtZW50IiwiY3VyclN5bWJvbHMiLCJjdXIiLCJjb2luIiwidHIiLCJpbm5lckhUTUwiLCJyYW5rIiwibmFtZSIsImZvcm1hdE51bSIsIm1hcmtldF9jYXBfdXNkIiwicHJpY2VfdXNkIiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsImFwcGVuZENoaWxkIiwiY3VycmVuY3lUYWJsZSIsImdldE5ld3MiLCJjdXJyZW5jeVN5bWJvbCIsInZhbHVlIiwibmV3TnVtIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJhbW91bnQiLCJzdWJtaXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaW5wdXQiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwibmV3c1VybCIsImN1cnJlbmN5U3ltYm9scyIsIm5ld3NMaW1pdCIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwibmV3c1RhYmxlIiwicmVmcmVzaEJ1dHRvbiIsIkN1cnJlbmN5IiwiZ2V0RGF0YSIsInVybCIsImN1cnJTdHJpbmciLCJqb2luIiwiZmV0Y2hVcmwiLCJjb25jYXQiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJpbmZvIiwidGl0bGUiLCJzb3VyY2UiLCJzaG93TmV3cyJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBQUEsTUFBQSxXQUVBLElBQUFDLEdBQUEsVUFBQSxXQUFBLFFBQUEsUUFBQSxNQUFBLE9BQUEsUUFDQUMsS0E0REEsU0FBQUMsSUFDQSxPQUFBQyxLQUFBQyxNQUFBLElBQUFELEtBQUFFLFVBQUFDLFdBSUEsT0FDQUMsYUEvREEsU0FBQUMsR0FFQSxJQUFBQyxFQUFBRCxFQUFBRSxPQUFBLENBQUFDLEVBQUFDLElBQUFBLEdBQUEsR0FFQUMsUUFBQUMsSUFBQUwsRUFBQU0sSUFBQUosR0FDQUssa0dBQUFMLEVBQUFNLDJCQUNBQyxLQUFBQyxHQUFBQSxFQUFBQyxVQUVBRixLQUFBQyxJQUVBQSxFQUFBRSxRQUFBLENBQUFDLEVBQUFWLEtBQ0EsSUFBQVcsS0FDQUQsRUFBQUUsS0FBQUgsUUFBQUksR0FBQUYsRUFBQUcsS0FBQUQsRUFBQUUsUUFDQSxJQUFBQyxVQXdDQTFCLFFBQUFBLFFBQUFBLFlBdkNBRCxFQUFBeUIsTUFDQUcsTUFBQXBCLEVBQUFHLEdBQUFLLE9BQ0FhLGdCQUFBLGNBQ0FDLFlBQUFILEVBQ0FJLFlBQUEsSUFDQUMs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QUFBaEMsVUFBQSxJQUdBMEMsRUFBQW5GLFFBQUFxRixJQUNBLElBQUE3QyxFQUFBeEIsU0FBQW9CLGNBQUEsTUFDQUksRUFBQUMsaUVBQ0E0QyxFQUFBUixRQUFBUSxFQUFBQyxnQkFBQUQsRUFBQUUsOENBR0FwRCxFQUFBYSxZQUFBUixLQUVBaUMsRUFBQXpCLFlBQUFiLElBYUFxRCxDQUFBMUYsSUFwREEwRSxFQUFBTCxpQkFBQSxTQUFBUCxJQXdEQSxTQUFBQSxHQUNBZSxFQUFBaEIsV0FBQUMsSUF6REFELENBQUFDLElBQ0FjLEVBQUFQLGlCQUFBLFFBQUEsSUFBQWpCLEVBQUFtQixJQUlBTyxFQXhCQSxxREF3QkEvRSxLQUFBQyxJQUNBNkUsRUFBQTVDLFdBQUFqQyxHQUNBcEIsTUFBQVEsYUFBQVkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG5jb25zdCBjaGFydCA9ICggZnVuY3Rpb24gKCkge1xuXG4gICAgbGV0IGxhYmVscyAgID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCJdO1xuICAgIGxldCBkYXRhc2V0cyA9IFtdO1xuICAgIFxuXG4gICAgZnVuY3Rpb24gZ2V0Q2hhcnREYXRhICggY2hhcnREYXRhICl7XG5cbiAgICAgICAgbGV0IGN1cnJlbmNpZXMgPSBjaGFydERhdGEuZmlsdGVyKCAoIGNkLCBpbmRleCApID0+IGluZGV4IDw9IDkgKTtcblxuICAgICAgICBQcm9taXNlLmFsbCggY3VycmVuY2llcy5tYXAoIGNkID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCggYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL2hpc3RvZGF5P2ZzeW09JHtjZC5zeW1ib2x9JnRzeW09VVNEJmxpbWl0PTZgIClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcbiAgICAgICAgfSApIClcbiAgICAgICAgLnRoZW4oIHJlcyA9PiB7XG5cbiAgICAgICAgICAgIHJlcy5mb3JFYWNoKCAoIGRhdGEsIGluZGV4ICkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBjbG9zaW5nUHJpY2VzID0gW107XG4gICAgICAgICAgICAgICAgZGF0YS5EYXRhLmZvckVhY2goIGQgPT4gY2xvc2luZ1ByaWNlcy5wdXNoKCBkLmNsb3NlICkgKVxuICAgICAgICAgICAgICAgIGxldCBsaW5lQ29sb3IgPSBnZXRSYW5kb21Db2xvcigpXG4gICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaCgge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogY3VycmVuY2llc1tpbmRleF0uc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBsaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiA0LjUsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50UmFkaXVzOiA1LFx0XG4gICAgICAgICAgICAgICAgICAgIHBvaW50SG92ZXJSYWRpdXM6IDgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXG4gICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgfSApXG5cbiAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFydCgpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG4gICAgICAgICAgICAvLyBoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBmb3Igb3VyIGRhdGFzZXRcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgICAgICAgZGF0YXNldHNcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6dHJ1ZSxcbiAgICAgICAgICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOmZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiBgcmdiYSgke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAwLjgpYDtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikudG9TdHJpbmcoKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldENoYXJ0RGF0YVxuICAgIH1cbn0gKSgpXG4iLCJjb25zdCBDdXJyZW5jeVRhYmxlID0gZnVuY3Rpb24gKCBnbG9iYWwgKSB7XG4gICAgXG4gICAgbGV0IGludmVzdEFtb3VudCAgICA9IDA7XG4gICAgbGV0IGFsbEN1cnJlbmNpZXMgICA9IFtdO1xuICAgIGxldCBmaWF0ICAgICAgICAgICAgPSBbJyQnLCAnVVNEJ107XG4gICAgY29uc3QgYzIwSW5kZXggICAgICA9IFsgMTMuNCwgMTIuMywgMTAuNSwgMTAuMiwgOS4yLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA3LjYsIDUuNCwgNC45LCA0LjMsIDQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMuOCwgMy40LCAyLjEsIDEuNywgMS41LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLjUsIDEuMiwgMS4yLCAwLjksIDAuOSBdO1xuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2N1cnJlbmNpZXN9IEFycmF5IGFycmF5IG9mIGN1cnJlbmNpZXMgZGF0YSAgXG4gICAgICovXG4gICAgZnVuY3Rpb24gYnVpbGRUYWJsZSggY3VycmVuY2llcyApIHtcbiAgICAgICAgLy8gQWRkIGZpYXQgdG8gdGhlYWRcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpYXQnKS5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLnRleHRDb250ZW50ID0gYCAoJHtmaWF0WzFdfSlgKTtcbiAgICAgICAgXG4gICAgICAgIGFsbEN1cnJlbmNpZXMgPSBjdXJyZW5jaWVzO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuICAgICAgICBsZXQgY3VyclN5bWJvbHMgPSBbXTtcbiAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKCAoIGN1ciwgY29pbiApID0+IHtcbiAgICAgICAgICAgIGN1cnJTeW1ib2xzLnB1c2goY3VyLnN5bWJvbCk7XG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7XG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIucmFuayB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGN1ci5uYW1lIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgZm9ybWF0TnVtKCBjdXIubWFya2V0X2NhcF91c2QgKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLnByaWNlX3VzZCApIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgYzIwSW5kZXhbY29pbl0gfSU8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY2FsY3VsYXRlSW52ZXN0bWVudCggYzIwSW5kZXhbY29pbl0gKSB9PC90ZD5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKSAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XG4gICAgICAgIGdsb2JhbC5nZXROZXdzKGN1cnJTeW1ib2xzKTtcbiAgICAgICAgZ2xvYmFsLmN1cnJlbmN5U3ltYm9sID0gY3VyclN5bWJvbHM7ICAgXG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGZyb20gY2VsbERhdGFcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1hdE51bSggdmFsdWUgKSB7XG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGZsb2F0XG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcbiAgICAgICAgICAgIC8vIEFkZCBmaWF0IGN1cnJlbmN5IHN5bWJvbCAkXG4gICAgICAgICAgICAvLyBJZiBwcmljZSBpcyBvdmVyIDEsIGxpbWl0IGRlY2ltYWxzIHRvIHR3byBwbGFjZXNcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xuICAgICAgICAgICAgLy8gQWRkIGNvbW1hIGFmdGVyIGV2ZXJ5IHRocmVlIG51bWJlcnNcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke3BhcnNlSW50KG5ld051bSl9YDtcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfVxuICAgIH0gXG5cblxuICAgICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xuICAgICAgICAvLyA9PT09PSBOZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGNhbGN1bGF0aW9ucyBoZXJlID09PT09IC8vXG4gICAgICAgIGxldCBhbW91bnQgPSBpbnZlc3RBbW91bnQgKiB2YWx1ZSAvIDEwMDtcbiAgICAgICAgaW52ZXN0QW1vdW50ID0gaW52ZXN0QW1vdW50IC0gYW1vdW50O1xuICAgICAgICByZXR1cm4gZm9ybWF0TnVtKCBhbW91bnQgKTsgXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKCBnbG9iYWwuaW5wdXQudmFsdWUgIT09ICcnICkge1xuICAgICAgICAgICAgaW52ZXN0QW1vdW50ID0gZ2xvYmFsLmlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICAvLyA9PT09PSBSZW1vdmUgdGFibGUgYm9keSBhbmQgcmUtcmVuZGVyID09PT09IC8vXG4gICAgICAgICAgICB3aGlsZSAoZ2xvYmFsLmN1cnJlbmN5VGFibGUuY2hpbGROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1aWxkVGFibGUoIGFsbEN1cnJlbmNpZXMgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYnVpbGRUYWJsZSxcbiAgICAgICAgZm9ybWF0TnVtLCBcbiAgICAgICAgY2FsY3VsYXRlSW52ZXN0bWVudCxcbiAgICAgICAgc3VibWl0Rm9ybVxuICAgIH1cblxufSIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXG4gICAgLy8gPT09PT0gR0xPQkFMUyA9PT09PSAvL1xuICAgIFxuXG4gICAgY29uc3QgYzIwVXJsICA9ICdodHRwczovL2FwaS5jb2lubWFya2V0Y2FwLmNvbS92MS90aWNrZXIvP2xpbWl0PTIwJztcbiAgICBjb25zdCBuZXdzVXJsID0gJ2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL25ld3MvP2NhdGVnb3JpZXM9JztcbiAgICBsZXQgY3VycmVuY3lTeW1ib2xzID0gW107XG5cbiAgICAvLyBudW1iZXIgb2YgbmV3cyBhcnRpY2xlcyB0byBzaG93XG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcblxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xuICAgIGNvbnN0IGN1cnJlbmN5VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmN1cnJlbmN5LXRhYmxlJyApO1xuICAgIGNvbnN0IGZvcm0gICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1mb3JtJyApO1xuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcbiAgICBjb25zdCBuZXdzVGFibGUgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uZXdzLXRhYmxlJyApO1xuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLnJlZnJlc2gtaWNvbicgKTtcblxuXG4gICAgLy8gPT09PT0gdGhpcyB2YXJpYWJsZSBob2xkcyBhbGwgdGhlIGZ1bmN0aW9ucyBmb3IgY3VycmVuY3kgdGFibGUgPT09PT0gLy9cbiAgICBjb25zdCBDdXJyZW5jeSA9IEN1cnJlbmN5VGFibGUoIHsgZm9ybSwgaW5wdXQsIGN1cnJlbmN5VGFibGUsIGdldE5ld3MsIGN1cnJlbmN5U3ltYm9scyB9ICk7XG5cbiAgICAvLyA9PT09PSBET00gTGlzdGVuZXJzID09PT09IC8vIFxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lciggJ3N1Ym1pdCcsICggZSApID0+IHN1Ym1pdEZvcm0oIGUgKSApO1xuICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4gZ2V0TmV3cyggY3VycmVuY3lTeW1ib2xzICkgKVxuXG5cblxuICAgIGdldERhdGEoYzIwVXJsKS50aGVuKCByZXMgPT4ge1xuICAgICAgICBDdXJyZW5jeS5idWlsZFRhYmxlKCByZXMgKTtcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCByZXMgKTtcbiAgICB9IClcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXG4gICAgICogQHJldHVybnMgeyBwcm9taXNlIH0gXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xuICAgICAgICByZXR1cm4gZmV0Y2goIHVybCApXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcbiAgICB9OyBcblxuICAgIFxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XG4gICAgICAgIGxldCBhcnRpY2xlc1NhbXBsZSA9IGFydGljbGVzLnNsaWNlKDAsIG5ld3NMaW1pdCk7ICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuIFxuICAgICAgICAvLyBpZiBuZXdzdGFibGUgaXMgYWxyZWFkeSBwcmVzZW50LCBjbGVhciBiZWZvcmVcbiAgICAgICAgLy8gYXBwZW5kaW5nXG4gICAgICAgIGlmIChuZXdzVGFibGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ld3NUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuIFxuICAgICAgICBhcnRpY2xlc1NhbXBsZS5mb3JFYWNoKChpbmZvKSA9PiB7XG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7XG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8dGQ+PGEgY2xhc3M9XCJmb250LXdlaWdodC1ib2xkXCIgaHJlZj1cIiR7aW5mby51cmx9XCI+JHtpbmZvLnRpdGxlfTwvYT4gPHA+JHtpbmZvLnNvdXJjZX08L3A+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApO1xuICAgICAgICB9KVxuICAgICAgICBuZXdzVGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIGNvbnN0cnVjdCBuZXdzIGJhc2VkIG9uIHRvcCAyMCBjcnlwdG9cbiAgICAgKiBAcGFyYW0ge2N1cnJTeW1ib2x9IEFycmF5IGN1cnJlbmN5c3ltYm9sc1xuICAgICAqIGVnOiBbJ0JUQycsICdFVEgnXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyhjdXJyU3ltYm9scykge1xuICAgICAgICBsZXQgY3VyclN0cmluZyA9IGN1cnJTeW1ib2xzLmpvaW4oXCIsXCIpO1xuICAgICAgICBcbiAgICAgICAgZmV0Y2hVcmwgPSBuZXdzVXJsLmNvbmNhdChjdXJyU3RyaW5nKTtcblxuICAgICAgICBnZXREYXRhKGZldGNoVXJsKS50aGVuKHJlcyA9PiBzaG93TmV3cyhyZXMpKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XG4gICAgICAgIEN1cnJlbmN5LnN1Ym1pdEZvcm0oIGUgKTtcbiAgICB9XG59IClcbiJdfQ==
