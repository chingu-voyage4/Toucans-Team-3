const chart=function(){let t=["January","February","March","April","May","June","July"],e=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){let a=r.filter((t,e)=>e<=9);Promise.all(a.map(t=>fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${t.symbol}&tsym=USD&limit=6`).then(t=>t.json()))).then(r=>{r.forEach((t,r)=>{let o=[];t.Data.forEach(t=>o.push(t.close));let c=`rgba(${n()}, ${n()}, ${n()}, 0.8)`;e.push({label:a[r].symbol,backgroundColor:"transparent",borderColor:c,borderWidth:4.5,pointBackgroundColor:c,pointRadius:5,pointHoverRadius:8,data:o})}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:t,datasets:e},options:{responsive:!0,maintainAspectRatio:!1}})}()})}}}(),CurrencyTable=function(t){let e=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9];let o;function c(e){document.querySelectorAll(".fiat").forEach(t=>t.textContent=` (${r[1]})`),n=e;let c=document.createElement("tbody"),u=[];e.forEach((t,e)=>{u.push(t.symbol);let n=document.createElement("tr");n.innerHTML=`\n                    <td>${t.rank}</td>\n                    <td>${t.name}</td>\n                    <td>${l(t.market_cap_usd)}</td>\n                    <td>${l(t.price_usd)}</td>\n                    <td>${a[e]}%</td>\n                    <td>${d(a[e])}</td>\n            `,c.appendChild(n)}),t.currencyTable.appendChild(c),t.getNews(u),o&&clearInterval(o),o=setInterval(()=>t.getNews(u),12e4)}function l(t){let e=parseFloat(t);return e%1!=0&&e>1?(e=`${r[0]}${e.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e<1?`${r[0]}${e}`:(e=`${r[0]}${parseInt(e)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function d(t){let n=e*t/100;return e-=n,l(n)}return{buildTable:c,formatNum:l,calculateInvestment:d,submitForm:function(r){if(r.preventDefault(),""!==t.input.value){for(e=t.input.value;t.currencyTable.childNodes.length>1;)t.currencyTable.removeChild(t.currencyTable.lastChild);c(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const t="https://min-api.cryptocompare.com/data/news/?categories=",e=5,n=document.querySelector(".currency-table"),r=document.querySelector(".invest-form"),a=document.querySelector(".invest-input"),o=document.querySelector(".news-table"),c=CurrencyTable({form:r,input:a,currencyTable:n,getNews:function(n){let r=n.join(",");fetchUrl=t.concat(r),l(fetchUrl).then(t=>(function(t){let n=t.slice(0,e),r=document.createElement("tbody");r.setAttribute("id","newstable");let a=document.querySelector("#newstable");null!==a&&(a.innerHTML="");n.forEach(t=>{let e=document.createElement("tr");e.innerHTML=`\n            <td><a class="font-weight-bold" href="${t.url}">${t.title}</a> <p>${t.source}</p>\n            </td>\n            `,r.appendChild(e)}),o.appendChild(r)})(t))}});function l(t){return fetch(t).then(t=>t.json())}r.addEventListener("submit",t=>(function(t){c.submitForm(t)})(t)),l("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(t=>{c.buildTable(t),chart.getChartData(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY2hhcnREYXRhIiwiY3VycmVuY2llcyIsImZpbHRlciIsImNkIiwiaW5kZXgiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZmV0Y2giLCJzeW1ib2wiLCJ0aGVuIiwicmVzIiwianNvbiIsImZvckVhY2giLCJkYXRhIiwiY2xvc2luZ1ByaWNlcyIsIkRhdGEiLCJkIiwicHVzaCIsImNsb3NlIiwibGluZUNvbG9yIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJjdHgiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkNoYXJ0IiwidHlwZSIsIm9wdGlvbnMiLCJyZXNwb25zaXZlIiwibWFpbnRhaW5Bc3BlY3RSYXRpbyIsImJ1aWxkQ2hhcnQiLCJDdXJyZW5jeVRhYmxlIiwiZ2xvYmFsIiwiaW52ZXN0QW1vdW50IiwiYWxsQ3VycmVuY2llcyIsImZpYXQiLCJjMjBJbmRleCIsIm5ld3NJbnRlcnZhbCIsImJ1aWxkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjcmVhdGVFbGVtZW50IiwiY3VyclN5bWJvbHMiLCJjdXIiLCJjb2luIiwidHIiLCJpbm5lckhUTUwiLCJyYW5rIiwibmFtZSIsImZvcm1hdE51bSIsIm1hcmtldF9jYXBfdXNkIiwicHJpY2VfdXNkIiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsImFwcGVuZENoaWxkIiwiY3VycmVuY3lUYWJsZSIsImdldE5ld3MiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ2YWx1ZSIsIm5ld051bSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsInBhcnNlSW50IiwiYW1vdW50Iiwic3VibWl0Rm9ybSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5ld3NVcmwiLCJuZXdzTGltaXQiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsIm5ld3NUYWJsZSIsIkN1cnJlbmN5IiwiY3VyclN0cmluZyIsImpvaW4iLCJmZXRjaFVybCIsImNvbmNhdCIsImdldERhdGEiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJzZXRBdHRyaWJ1dGUiLCJuZXdzQm9keSIsImluZm8iLCJ1cmwiLCJ0aXRsZSIsInNvdXJjZSIsInNob3dOZXdzIl0sIm1hcHBpbmdzIjoiQUFDQSxNQUFBQSxNQUFBLFdBRUEsSUFBQUMsR0FBQSxVQUFBLFdBQUEsUUFBQSxRQUFBLE1BQUEsT0FBQSxRQUNBQyxLQTREQSxTQUFBQyxJQUNBLE9BQUFDLEtBQUFDLE1BQUEsSUFBQUQsS0FBQUUsVUFBQUMsV0FJQSxPQUNBQyxhQS9EQSxTQUFBQyxHQUVBLElBQUFDLEVBQUFELEVBQUFFLE9BQUEsQ0FBQUMsRUFBQUMsSUFBQUEsR0FBQSxHQUVBQyxRQUFBQyxJQUFBTCxFQUFBTSxJQUFBSixHQUNBSyxrR0FBQUwsRUFBQU0sMkJBQ0FDLEtBQUFDLEdBQUFBLEVBQUFDLFVBRUFGLEtBQUFDLElBRUFBLEVBQUFFLFFBQUEsQ0FBQUMsRUFBQVYsS0FDQSxJQUFBVyxLQUNBRCxFQUFBRSxLQUFBSCxRQUFBSSxHQUFBRixFQUFBRyxLQUFBRCxFQUFBRSxRQUNBLElBQUFDLFVBd0NBMUIsUUFBQUEsUUFBQUEsWUF2Q0FELEVBQUF5QixNQUNBRyxNQUFBcEIsRUFBQUcsR0FBQUssT0FDQWEsZ0JBQUEsY0FDQUMsWUFB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QyxVQUFBLElBR0F3QyxFQUFBbEYsUUFBQXNGLElBQ0EsSUFBQTdDLEVBQUF6QixTQUFBcUIsY0FBQSxNQUNBSSxFQUFBQyxpRUFDQTRDLEVBQUFDLFFBQUFELEVBQUFFLGdCQUFBRixFQUFBRyw4Q0FHQXJELEVBQUFhLFlBQUFSLEtBRUFpQyxFQUFBekIsWUFBQWIsSUFhQXNELENBQUE1RixPQXZDQSxTQUFBa0YsRUFBQU8sR0FDQSxPQUFBNUYsTUFBQTRGLEdBQ0ExRixLQUFBQyxHQUFBQSxFQUFBQyxRQWRBMEUsRUFBQUosaUJBQUEsU0FBQVAsSUF1REEsU0FBQUEsR0FDQWEsRUFBQWQsV0FBQUMsSUF4REFELENBQUFDLElBRUFrQixFQW5CQSxxREFtQkFuRixLQUFBQyxJQUNBNkUsRUFBQTNDLFdBQUFsQyxHQUNBcEIsTUFBQVEsYUFBQVkiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbmNvbnN0IGNoYXJ0ID0gKCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgbGV0IGxhYmVscyAgID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCJdO1xyXG4gICAgbGV0IGRhdGFzZXRzID0gW107XHJcbiAgICBcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDaGFydERhdGEgKCBjaGFydERhdGEgKXtcclxuXHJcbiAgICAgICAgbGV0IGN1cnJlbmNpZXMgPSBjaGFydERhdGEuZmlsdGVyKCAoIGNkLCBpbmRleCApID0+IGluZGV4IDw9IDkgKTtcclxuXHJcbiAgICAgICAgUHJvbWlzZS5hbGwoIGN1cnJlbmNpZXMubWFwKCBjZCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCggYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL2hpc3RvZGF5P2ZzeW09JHtjZC5zeW1ib2x9JnRzeW09VVNEJmxpbWl0PTZgIClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxyXG4gICAgICAgIH0gKSApXHJcbiAgICAgICAgLnRoZW4oIHJlcyA9PiB7XHJcblxyXG4gICAgICAgICAgICByZXMuZm9yRWFjaCggKCBkYXRhLCBpbmRleCApID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjbG9zaW5nUHJpY2VzID0gW107XHJcbiAgICAgICAgICAgICAgICBkYXRhLkRhdGEuZm9yRWFjaCggZCA9PiBjbG9zaW5nUHJpY2VzLnB1c2goIGQuY2xvc2UgKSApXHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZUNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKVxyXG4gICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaCgge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjdXJyZW5jaWVzW2luZGV4XS5zeW1ib2wsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBsaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDQuNSxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludEJhY2tncm91bmRDb2xvcjogbGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50UmFkaXVzOiA1LFx0XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRIb3ZlclJhZGl1czogOCxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjbG9zaW5nUHJpY2VzLFxyXG4gICAgICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgICB9IClcclxuXHJcbiAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XHJcbiAgICAgICAgfSApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWxkQ2hhcnQoKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBjb25zdCBjaGFydCA9IG5ldyBDaGFydChjdHgsIHtcclxuICAgICAgICAgICAgLy8gaGUgdHlwZSBvZiBjaGFydCB3ZSB3YW50IHRvIGNyZWF0ZVxyXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVGhlIGRhdGEgZm9yIG91ciBkYXRhc2V0XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVscyxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXRzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGdvIGhlcmVcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTp0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFpbnRhaW5Bc3BlY3RSYXRpbzpmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCkge1xyXG4gICAgICAgIHJldHVybiBgcmdiYSgke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAwLjgpYDtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tKCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0Q2hhcnREYXRhXHJcbiAgICB9XHJcbn0gKSgpXHJcbiIsImNvbnN0IEN1cnJlbmN5VGFibGUgPSBmdW5jdGlvbiAoIGdsb2JhbCApIHtcclxuICAgIFxyXG4gICAgbGV0IGludmVzdEFtb3VudCAgICA9IDA7XHJcbiAgICBsZXQgYWxsQ3VycmVuY2llcyAgID0gW107XHJcbiAgICBsZXQgZmlhdCAgICAgICAgICAgID0gWyckJywgJ1VTRCddO1xyXG4gICAgY29uc3QgYzIwSW5kZXggICAgICA9IFsgMTMuNCwgMTIuMywgMTAuNSwgMTAuMiwgOS4yLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDcuNiwgNS40LCA0LjksIDQuMywgNCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzLjgsIDMuNCwgMi4xLCAxLjcsIDEuNSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLjUsIDEuMiwgMS4yLCAwLjksIDAuOSBdO1xyXG4gICAgLy8gPT09PT0gTmV3cyBJbnRlcnZhbCA9PT09PSAvL1xyXG4gICAgbGV0IG5ld3NJbnRlcnZhbDtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7Y3VycmVuY2llc30gQXJyYXkgYXJyYXkgb2YgY3VycmVuY2llcyBkYXRhICBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYnVpbGRUYWJsZSggY3VycmVuY2llcyApIHtcclxuICAgICAgICAvLyBBZGQgZmlhdCB0byB0aGVhZFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWF0JykuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS50ZXh0Q29udGVudCA9IGAgKCR7ZmlhdFsxXX0pYCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWxsQ3VycmVuY2llcyA9IGN1cnJlbmNpZXM7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xyXG4gICAgICAgIGxldCBjdXJyU3ltYm9scyA9IFtdO1xyXG4gICAgICAgIGN1cnJlbmNpZXMuZm9yRWFjaCggKCBjdXIsIGNvaW4gKSA9PiB7XHJcbiAgICAgICAgICAgIGN1cnJTeW1ib2xzLnB1c2goY3VyLnN5bWJvbCk7XHJcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0cicgKTtcclxuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIucmFuayB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLm5hbWUgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLnByaWNlX3VzZCApIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjMjBJbmRleFtjb2luXSB9JTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTwvdGQ+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XHJcbiAgICAgICAgZ2xvYmFsLmdldE5ld3MoY3VyclN5bWJvbHMpO1xyXG4gICAgICAgIGlmKCBuZXdzSW50ZXJ2YWwgKSBjbGVhckludGVydmFsKCBuZXdzSW50ZXJ2YWwgKTtcclxuICAgICAgICBuZXdzSW50ZXJ2YWwgPSAgc2V0SW50ZXJ2YWwoICgpID0+IGdsb2JhbC5nZXROZXdzKCBjdXJyU3ltYm9scyApLCAxMjAwMDAgKTsgICAgICAgIFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBmcm9tIGNlbGxEYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBmb3JtYXROdW0oIHZhbHVlICkge1xyXG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBmbG9hdFxyXG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcclxuICAgICAgICAgICAgLy8gQWRkIGZpYXQgY3VycmVuY3kgc3ltYm9sICRcclxuICAgICAgICAgICAgLy8gSWYgcHJpY2UgaXMgb3ZlciAxLCBsaW1pdCBkZWNpbWFscyB0byB0d28gcGxhY2VzXHJcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xyXG4gICAgICAgICAgICAvLyBBZGQgY29tbWEgYWZ0ZXIgZXZlcnkgdGhyZWUgbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxyXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7cGFyc2VJbnQobmV3TnVtKX1gO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSBcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxyXG4gICAgICogQHJldHVybnMge051bWJlcn0gXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xyXG4gICAgICAgIC8vID09PT09IE5lZWQgdG8gZmlndXJlIG91dCB0aGUgY2FsY3VsYXRpb25zIGhlcmUgPT09PT0gLy9cclxuICAgICAgICBsZXQgYW1vdW50ID0gaW52ZXN0QW1vdW50ICogdmFsdWUgLyAxMDA7XHJcbiAgICAgICAgaW52ZXN0QW1vdW50ID0gaW52ZXN0QW1vdW50IC0gYW1vdW50O1xyXG4gICAgICAgIHJldHVybiBmb3JtYXROdW0oIGFtb3VudCApOyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSggZSApIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIGludmVzdEFtb3VudCA9IGdsb2JhbC5pbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cclxuICAgICAgICAgICAgd2hpbGUgKGdsb2JhbC5jdXJyZW5jeVRhYmxlLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBidWlsZFRhYmxlKCBhbGxDdXJyZW5jaWVzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJ1aWxkVGFibGUsXHJcbiAgICAgICAgZm9ybWF0TnVtLCBcclxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxyXG4gICAgICAgIHN1Ym1pdEZvcm1cclxuICAgIH1cclxuXHJcbn0iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXHJcbiAgICBcclxuXHJcbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xyXG4gICAgY29uc3QgbmV3c1VybCA9ICdodHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9uZXdzLz9jYXRlZ29yaWVzPSc7XHJcblxyXG4gICAgLy8gbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gc2hvd1xyXG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcclxuXHJcbiAgICAvLyA9PT09PSBQdXQgYWxsIERPTSB0YXJnZXR0aW5nIGhlcmUgPT09PT0gLy9cclxuICAgIGNvbnN0IGN1cnJlbmN5VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmN1cnJlbmN5LXRhYmxlJyApO1xyXG4gICAgY29uc3QgZm9ybSAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWZvcm0nICk7XHJcbiAgICBjb25zdCBpbnB1dCAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5pbnZlc3QtaW5wdXQnICk7XHJcbiAgICBjb25zdCBuZXdzVGFibGUgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uZXdzLXRhYmxlJyApO1xyXG5cclxuXHJcbiAgICAvLyA9PT09PSB0aGlzIHZhcmlhYmxlIGhvbGRzIGFsbCB0aGUgZnVuY3Rpb25zIGZvciBjdXJyZW5jeSB0YWJsZSA9PT09PSAvL1xyXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzIH0gKTtcclxuXHJcbiAgICAvLyA9PT09PSBET00gTGlzdGVuZXJzID09PT09IC8vIFxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApIClcclxuXHJcbiAgICBnZXREYXRhKGMyMFVybCkudGhlbiggcmVzID0+IHtcclxuICAgICAgICBDdXJyZW5jeS5idWlsZFRhYmxlKCByZXMgKTtcclxuICAgICAgICBjaGFydC5nZXRDaGFydERhdGEoIHJlcyApO1xyXG4gICAgfSApXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7IHByb21pc2UgfSBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCggdXJsIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXHJcbiAgICB9OyBcclxuXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XHJcbiAgICAgICAgbGV0IGFydGljbGVzU2FtcGxlID0gYXJ0aWNsZXMuc2xpY2UoMCwgbmV3c0xpbWl0KTsgIFxyXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcclxuICAgICAgICB0Ym9keS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5ld3N0YWJsZVwiKTtcclxuIFxyXG4gICAgICAgIC8vIGlmIG5ld3N0YWJsZSBpcyBhbHJlYWR5IHByZXNlbnQsIGNsZWFyIGJlZm9yZVxyXG4gICAgICAgIC8vIGFwcGVuZGluZ1xyXG4gICAgICAgIGxldCBuZXdzQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuZXdzdGFibGUnKTtcclxuICAgICAgICBpZiAobmV3c0JvZHkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbmV3c0JvZHkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgYXJ0aWNsZXNTYW1wbGUuZm9yRWFjaCgoaW5mbykgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7XHJcbiAgICAgICAgICAgIHRyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHRkPjxhIGNsYXNzPVwiZm9udC13ZWlnaHQtYm9sZFwiIGhyZWY9XCIke2luZm8udXJsfVwiPiR7aW5mby50aXRsZX08L2E+IDxwPiR7aW5mby5zb3VyY2V9PC9wPlxyXG4gICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIG5ld3NUYWJsZS5hcHBlbmRDaGlsZCggdGJvZHkgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiogXHJcbiAgICAgKiBjb25zdHJ1Y3QgbmV3cyBiYXNlZCBvbiB0b3AgMjAgY3J5cHRvXHJcbiAgICAgKiBAcGFyYW0ge2N1cnJTeW1ib2x9IEFycmF5IGN1cnJlbmN5c3ltYm9sc1xyXG4gICAgICogZWc6IFsnQlRDJywgJ0VUSCddXHJcbiAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyhjdXJyU3ltYm9scykge1xyXG4gICAgICAgIGxldCBjdXJyU3RyaW5nID0gY3VyclN5bWJvbHMuam9pbihcIixcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZmV0Y2hVcmwgPSBuZXdzVXJsLmNvbmNhdChjdXJyU3RyaW5nKTtcclxuXHJcbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XHJcbiAgICAgICAgQ3VycmVuY3kuc3VibWl0Rm9ybSggZSApO1xyXG4gICAgfVxyXG59IClcclxuIl19
