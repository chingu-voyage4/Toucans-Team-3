const chart=function(){let t=["January","February","March","April","May","June","July"],e=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){let a=r.filter((t,e)=>e<=9);Promise.all(a.map(t=>fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${t.symbol}&tsym=USD&limit=6`).then(t=>t.json()))).then(r=>{r.forEach((t,r)=>{let o=[];t.Data.forEach(t=>o.push(t.close)),e.push({label:a[r].symbol,backgroundColor:"transparent",borderColor:`rgba(${n()}, ${n()}, ${n()}, 0.8)`,data:o})}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:t,datasets:e},options:{}})}()})}}}();document.addEventListener("DOMContentLoaded",()=>{let t=0,e=[],n=["$","USD"];const r=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],a="https://min-api.cryptocompare.com/data/news/?categories=",o=20,c=document.querySelector(".currency-table"),d=document.querySelector(".invest-form"),l=document.querySelector(".invest-input"),i=document.querySelector(".news-table");function u(t){return fetch(t).then(t=>t.json())}function s(t){let e=t.join(",");fetchUrl=a.concat(e),console.log(fetchUrl),u(fetchUrl).then(t=>(function(t){let e=t.slice(0,o);document.createElement("tbody"),e.forEach(t=>{let e=document.createElement("tr");e.innerHTML=`\n            <td><img src="${t.imageurl}" title=${t.title}" alt="news"/></td>\n            <td><p></p><a href="${t.url}">${t.title}</a></p>\n            <p>${t.body}</p></td>\n            `,i.appendChild(e)})})(t))}function h(a){document.querySelectorAll(".fiat").forEach(t=>t.textContent=` (${n[1]})`),e=a;let o=document.createElement("tbody"),d=[];a.forEach((e,n)=>{d.push(e.symbol);let a=document.createElement("tr");a.innerHTML=`\n                    <td>${e.rank}</td>\n                    <td>${e.name}</td>\n                    <td>${m(e.market_cap_usd)}</td>\n                    <td>${m(e.price_usd)}</td>\n                    <td>${r[n]}%</td>\n                    <td>${function(e){let n=t*e/100;return t-=n,m(n)}(r[n])}</td>\n            `,o.appendChild(a)}),s(d),c.appendChild(o)}function m(t){let e=parseFloat(t);return e%1!=0&&e>1?(e=`${n[0]}${e.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e<1?`${n[0]}${e}`:(e=`${n[0]}${parseInt(e)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}d.addEventListener("submit",n=>(function(n){if(n.preventDefault(),""!==l.value){for(t=l.value;c.childNodes.length>1;)c.removeChild(c.lastChild);h(e)}})(n)),u("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(t=>{h(t),chart.getChartData(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJjaGFydCIsImxhYmVscyIsImRhdGFzZXRzIiwiZ2V0UmFuZG9tIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJnZXRDaGFydERhdGEiLCJjaGFydERhdGEiLCJjdXJyZW5jaWVzIiwiZmlsdGVyIiwiY2QiLCJpbmRleCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmZXRjaCIsInN5bWJvbCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZm9yRWFjaCIsImRhdGEiLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImQiLCJwdXNoIiwiY2xvc2UiLCJsYWJlbCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlckNvbG9yIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwiYnVpbGRDaGFydCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwibmV3c1VybCIsIm5ld3NMaW1pdCIsImN1cnJlbmN5VGFibGUiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsImlucHV0IiwibmV3c1RhYmxlIiwiZ2V0RGF0YSIsInVybCIsImdldE5ld3MiLCJjdXJyU3ltYm9scyIsImN1cnJTdHJpbmciLCJqb2luIiwiZmV0Y2hVcmwiLCJjb25jYXQiLCJjb25zb2xlIiwibG9nIiwiYXJ0aWNsZXMiLCJhcnRpY2xlc1NhbXBsZSIsInNsaWNlIiwiY3JlYXRlRWxlbWVudCIsImluZm8iLCJ0ciIsImlubmVySFRNTCIsImltYWdldXJsIiwidGl0bGUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzaG93TmV3cyIsImJ1aWxkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjdXIiLCJjb2luIiwicmFuayIsIm5hbWUiLCJmb3JtYXROdW0iLCJtYXJrZXRfY2FwX3VzZCIsInByaWNlX3VzZCIsInZhbHVlIiwiYW1vdW50IiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsIm5ld051bSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsInBhcnNlSW50IiwiZSIsInByZXZlbnREZWZhdWx0IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwic3VibWl0Rm9ybSJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBQUEsTUFBQSxXQUVBLElBQUFDLEdBQUEsVUFBQSxXQUFBLFFBQUEsUUFBQSxNQUFBLE9BQUEsUUFDQUMsS0FvREEsU0FBQUMsSUFDQSxPQUFBQyxLQUFBQyxNQUFBLElBQUFELEtBQUFFLFVBQUFDLFdBSUEsT0FDQUMsYUF2REEsU0FBQUMsR0FFQSxJQUFBQyxFQUFBRCxFQUFBRSxPQUFBLENBQUFDLEVBQUFDLElBQUFBLEdBQUEsR0FFQUMsUUFBQUMsSUFBQUwsRUFBQU0sSUFBQUosR0FDQUssa0dBQUFMLEVBQUFNLDJCQUNBQyxLQUFBQyxHQUFBQSxFQUFBQyxVQUVBRixLQUFBQyxJQUVBQSxFQUFBRSxRQUFBLENBQUFDLEVBQUFWLEtBQ0EsSUFBQVcsS0FDQUQsRUFBQUUsS0FBQUgsUUFBQUksR0FBQUYsRUFBQUcsS0FBQUQsRUFBQUUsUUFDQTFCLEVBQUF5QixNQUNBRSxNQUFBbkIsRUFBQUcsR0FBQUssT0FDQVksZ0JBQUEsY0FDQUMsb0JBNkJBNUIsUUFBQUEsUUFBQUEsWUE1QkFvQixLQUFBQyxNQVNBLFdBQ0EsTUFBQVEsRUFBQUMsU0FBQUMsZUFBQSxrQkFBQUMsV0FBQSxNQUNBLElBQUFDLE1BQUFKLEdBRUFLLEtBQUEsT0FHQWQsTUFDQXRCLE9BQUFBLEVBQ0FDLFNBQUFBLEdBSUFvQyxhQWxCQUMsT0EzQkEsR0NEQU4sU0FBQU8saUJBQUEsbUJBQUEsS0FHQSxJQUFBQyxFQUFBLEVBQ0FDLEtBQ0FDLEdBQUEsSUFBQSxPQUNBLE1BQUFDLEdBQUEsS0FBQSxLQUFBLEtBQUEsS0FBQSxJQUNBLElBQUEsSUFBQSxJQUFBLElBQUEsRUFDQSxJQUFBLElBQUEsSUFBQSxJQUFBLElBQ0EsSUFBQSxJQUFBLElBQUEsR0FBQSxJQUlBQyxFQUFBLDJEQUdBQyxFQUFBLEdBR0FDLEVBQUFkLFNBQUFlLGNBQUEsbUJBQ0FDLEVBQUFoQixTQUFBZSxjQUFBLGdCQUNBRSxFQUFBakIsU0FBQWUsY0FBQSxpQkFDQUcsRUFBQWxCLFNBQUFlLGNBQUEsZUFnQkEsU0FBQUksRUFBQUMsR0FDQSxPQUFBcEMsTUFBQW9DLEdBQ0FsQyxLQUFBQyxHQUFBQSxFQUFBQyxRQXVCQSxTQUFBaUMsRUFBQUMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBRSxLQUFBLEtBRUFDLFNBQUFiLEVBQUFjLE9BQUFILEdBQ0FJLFFBQUFDLElBQUFILFVBRUFOLEVBQUFNLFVBQUF2QyxLQUFBQyxJQXpCQSxTQUFBMEMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBRSxNQUFBLEVBQUFsQixHQUNBYixTQUFBZ0MsY0FBQSxTQUNBRixFQUFBekMsUUFBQTRDLElBQ0EsSUFBQUMsRUFBQWxDLFNBQUFnQyxjQUFBLE1BQ0FFLEVBQUFDLHlDQUNBRixFQUFBRyxtQkFBQUgsRUFBQUksNkRBQ0FKLEVBQUFiLFFBQUFhLEVBQUFJLGlDQUNBSixFQUFBSyw4QkFFQXBCLEVBQUFxQixZQUFBTCxNQWVBTSxDQUFBckQsSUFPQSxTQUFBc0QsRUFBQWhFLEdBRUF1QixTQUFBMEMsaUJBQUEsU0FBQXJELFFBQUFzRCxHQUFBQSxFQUFBQyxpQkFBQWxDLEVBQUEsT0FFQUQsRUFBQWhDLEVBRUEsSUFBQW9FLEVBQUE3QyxTQUFBZ0MsY0FBQSxTQUNBVixLQUNBN0MsRUFBQVksUUFBQSxDQUFBeUQsRUFBQUMsS0FDQXpCLEVBQUE1QixLQUFBb0QsRUFBQTdELFFBQ0EsSUFBQWlELEVBQUFsQyxTQUFBZ0MsY0FBQSxNQUNBRSxFQUFBQyx1Q0FDQVcsRUFBQUUsc0NBQ0FGLEVBQUFHLHNDQUNBQyxFQUFBSixFQUFBSyxpREFDQUQsRUFBQUosRUFBQU0sNENBQ0F6QyxFQUFBb0MscUNBd0NBLFNBQUFNLEdBRUEsSUFBQUMsRUFBQTlDLEVBQUE2QyxFQUFBLElBRUEsT0FEQTdDLEdBQUE4QyxFQUNBSixFQUFBSSxHQTNDQUMsQ0FBQTVDLEVBQUFvQyx5QkFFQUYsRUFBQU4sWUFBQUwsS0FFQWIsRUFBQUMsR0FDQVIsRUFBQXlCLFlBQUFNLEdBU0EsU0FBQUssRUFBQUcsR0FDQSxJQUFBRyxFQUFBQyxXQUFBSixHQUdBLE9BQUFHLEVBQUEsR0FBQSxHQUFBQSxFQUFBLEdBR0FBLEtBQUE5QyxFQUFBLEtBQUE4QyxFQUFBRSxRQUFBLE1BRUFDLFFBQUEsMkJBQUEsT0FDQUgsRUFBQSxLQUNBOUMsRUFBQSxLQUFBOEMsS0FHQUEsS0FBQTlDLEVBQUEsS0FBQWtELFNBQUFKLE1BQ0FHLFFBQUEsMkJBQUEsT0FoR0EzQyxFQUFBVCxpQkFBQSxTQUFBc0QsSUFtSEEsU0FBQUEsR0FFQSxHQURBQSxFQUFBQyxpQkFDQSxLQUFBN0MsRUFBQW9DLE1BQUEsQ0FJQSxJQUhBN0MsRUFBQVMsRUFBQW9DLE1BR0F2QyxFQUFBaUQsV0FBQUMsT0FBQSxHQUNBbEQsRUFBQW1ELFlBQUFuRCxFQUFBb0QsV0FFQXpCLEVBQUFoQyxLQTVIQTBELENBQUFOLElBRUExQyxFQWpCQSxxREFpQkFqQyxLQUFBQyxJQUNBc0QsRUFBQXRELEdBQ0FwQixNQUFBUSxhQUFBWSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGNoYXJ0ID0gKCBmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXQgbGFiZWxzICAgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIl07XG4gICAgbGV0IGRhdGFzZXRzID0gW107XG4gICAgXG5cbiAgICBmdW5jdGlvbiBnZXRDaGFydERhdGEgKCBjaGFydERhdGEgKXtcblxuICAgICAgICBsZXQgY3VycmVuY2llcyA9IGNoYXJ0RGF0YS5maWx0ZXIoICggY2QsIGluZGV4ICkgPT4gaW5kZXggPD0gOSApO1xuXG4gICAgICAgIFByb21pc2UuYWxsKCBjdXJyZW5jaWVzLm1hcCggY2QgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoKCBgaHR0cHM6Ly9jb3JzLWFueXdoZXJlLmhlcm9rdWFwcC5jb20vaHR0cHM6Ly9taW4tYXBpLmNyeXB0b2NvbXBhcmUuY29tL2RhdGEvaGlzdG9kYXk/ZnN5bT0ke2NkLnN5bWJvbH0mdHN5bT1VU0QmbGltaXQ9NmAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxuICAgICAgICB9ICkgKVxuICAgICAgICAudGhlbiggcmVzID0+IHtcblxuICAgICAgICAgICAgcmVzLmZvckVhY2goICggZGF0YSwgaW5kZXggKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdQcmljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBkYXRhLkRhdGEuZm9yRWFjaCggZCA9PiBjbG9zaW5nUHJpY2VzLnB1c2goIGQuY2xvc2UgKSApXG4gICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaCgge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogY3VycmVuY2llc1tpbmRleF0uc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBnZXRSYW5kb21Db2xvcigpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjbG9zaW5nUHJpY2VzLFxuICAgICAgICAgICAgICAgIH0gKVxuICAgICAgICAgICAgIH0gKVxuXG4gICAgICAgICAgICAgYnVpbGRDaGFydCgpO1xuICAgICAgICB9IClcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQ2hhcnQoKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW5jeS1jaGFydCcpLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICAgICAgLy8gaGUgdHlwZSBvZiBjaGFydCB3ZSB3YW50IHRvIGNyZWF0ZVxuICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgIFxuICAgICAgICAgICAgLy8gVGhlIGRhdGEgZm9yIG91ciBkYXRhc2V0XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbGFiZWxzLFxuICAgICAgICAgICAgICAgIGRhdGFzZXRzXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGdvIGhlcmVcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiBgcmdiYSgke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAwLjgpYDtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikudG9TdHJpbmcoKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldENoYXJ0RGF0YVxuICAgIH1cbn0gKSgpXG5cbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXG4gICAgLy8gPT09PT0gR0xPQkFMUyA9PT09PSAvL1xuICAgIGxldCBpbnZlc3RBbW91bnQgICAgPSAwO1xuICAgIGxldCBhbGxDdXJyZW5jaWVzICAgPSBbXTtcbiAgICBsZXQgZmlhdCAgICAgICAgICAgID0gWyckJywgJ1VTRCddO1xuICAgIGNvbnN0IGMyMEluZGV4ICAgICAgPSBbIDEzLjQsIDEyLjMsIDEwLjUsIDEwLjIsIDkuMiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNy42LCA1LjQsIDQuOSwgNC4zLCA0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzLjgsIDMuNCwgMi4xLCAxLjcsIDEuNSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMS41LCAxLjIsIDEuMiwgMC45LCAwLjkgXTtcblxuICAgIGNvbnN0IGMyMFVybCA9ICdodHRwczovL2FwaS5jb2lubWFya2V0Y2FwLmNvbS92MS90aWNrZXIvP2xpbWl0PTIwJztcblxuICAgIGNvbnN0IG5ld3NVcmwgPSAnaHR0cHM6Ly9taW4tYXBpLmNyeXB0b2NvbXBhcmUuY29tL2RhdGEvbmV3cy8/Y2F0ZWdvcmllcz0nO1xuXG4gICAgLy8gbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gc2hvd1xuICAgIGNvbnN0IG5ld3NMaW1pdCA9IDIwO1xuXG4gICAgLy8gPT09PT0gUHV0IGFsbCBET00gdGFyZ2V0dGluZyBoZXJlID09PT09IC8vXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XG4gICAgY29uc3QgZm9ybSAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWZvcm0nICk7XG4gICAgY29uc3QgaW5wdXQgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWlucHV0JyApO1xuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XG5cblxuICAgIC8vID09PT09IERPTSBMaXN0ZW5lcnMgPT09PT0gLy8gXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApIClcblxuICAgIGdldERhdGEoYzIwVXJsKS50aGVuKCByZXMgPT4ge1xuICAgICAgICBidWlsZFRhYmxlKCByZXMgKTtcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCByZXMgKTtcbiAgICAgfSApXG4gICAgXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt1cmx9IFN0cmluZyAgdXJsIHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHsgcHJvbWlzZSB9IFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldERhdGEoIHVybCApIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCB1cmwgKVxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXG4gICAgfTsgXG5cbiAgICBcbiAgICBmdW5jdGlvbiBzaG93TmV3cyhhcnRpY2xlcykge1xuICAgICAgICBsZXQgYXJ0aWNsZXNTYW1wbGUgPSBhcnRpY2xlcy5zbGljZSgwLCBuZXdzTGltaXQpOyAgICAgXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcbiAgICAgICAgYXJ0aWNsZXNTYW1wbGUuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkPjxpbWcgc3JjPVwiJHtpbmZvLmltYWdldXJsfVwiIHRpdGxlPSR7aW5mby50aXRsZX1cIiBhbHQ9XCJuZXdzXCIvPjwvdGQ+XG4gICAgICAgICAgICA8dGQ+PHA+PC9wPjxhIGhyZWY9XCIke2luZm8udXJsfVwiPiR7aW5mby50aXRsZX08L2E+PC9wPlxuICAgICAgICAgICAgPHA+JHtpbmZvLmJvZHl9PC9wPjwvdGQ+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgbmV3c1RhYmxlLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKiogXG4gICAgICogY29uc3RydWN0IG5ld3MgYmFzZWQgb24gdG9wIDIwIGNyeXB0b1xuICAgICAqIEBwYXJhbSB7Y3VyclN5bWJvbH0gQXJyYXkgY3VycmVuY3lzeW1ib2xzXG4gICAgICogZWc6IFsnQlRDJywgJ0VUSCddXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZXROZXdzKGN1cnJTeW1ib2xzKSB7XG4gICAgICAgIGxldCBjdXJyU3RyaW5nID0gY3VyclN5bWJvbHMuam9pbihcIixcIik7XG4gICAgICAgIFxuICAgICAgICBmZXRjaFVybCA9IG5ld3NVcmwuY29uY2F0KGN1cnJTdHJpbmcpO1xuICAgICAgICBjb25zb2xlLmxvZyhmZXRjaFVybCk7XG5cbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtjdXJyZW5jaWVzfSBBcnJheSBhcnJheSBvZiBjdXJyZW5jaWVzIGRhdGEgIFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkVGFibGUoIGN1cnJlbmNpZXMgKSB7XG4gICAgICAgIC8vIEFkZCBmaWF0IHRvIHRoZWFkXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWF0JykuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS50ZXh0Q29udGVudCA9IGAgKCR7ZmlhdFsxXX0pYCk7XG4gICAgICAgIFxuICAgICAgICBhbGxDdXJyZW5jaWVzID0gY3VycmVuY2llcztcbiAgICAgICAgXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcbiAgICAgICAgbGV0IGN1cnJTeW1ib2xzID0gW107XG4gICAgICAgIGN1cnJlbmNpZXMuZm9yRWFjaCggKCBjdXIsIGNvaW4gKSA9PiB7XG4gICAgICAgICAgICBjdXJyU3ltYm9scy5wdXNoKGN1ci5zeW1ib2wpO1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLnJhbmsgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIubmFtZSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5wcmljZV91c2QgKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGMyMEluZGV4W2NvaW5dIH0lPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTwvdGQ+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICkgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgIGdldE5ld3MoY3VyclN5bWJvbHMpO1xuICAgICAgICBjdXJyZW5jeVRhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApXG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGZyb20gY2VsbERhdGFcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1hdE51bSggdmFsdWUgKSB7XG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGZsb2F0XG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcbiAgICAgICAgICAgIC8vIEFkZCBmaWF0IGN1cnJlbmN5IHN5bWJvbCAkXG4gICAgICAgICAgICAvLyBJZiBwcmljZSBpcyBvdmVyIDEsIGxpbWl0IGRlY2ltYWxzIHRvIHR3byBwbGFjZXNcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xuICAgICAgICAgICAgLy8gQWRkIGNvbW1hIGFmdGVyIGV2ZXJ5IHRocmVlIG51bWJlcnNcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke3BhcnNlSW50KG5ld051bSl9YDtcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfVxuICAgIH0gXG5cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBjdXJyZW5jeSdzIGluZGV4IHBlcmNlbnRhZ2VcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVJbnZlc3RtZW50KCB2YWx1ZSApIHtcbiAgICAgICAgLy8gPT09PT0gTmVlZCB0byBmaWd1cmUgb3V0IHRoZSBjYWxjdWxhdGlvbnMgaGVyZSA9PT09PSAvL1xuICAgICAgICBsZXQgYW1vdW50ID0gaW52ZXN0QW1vdW50ICogdmFsdWUgLyAxMDA7XG4gICAgICAgIGludmVzdEFtb3VudCA9IGludmVzdEFtb3VudCAtIGFtb3VudDtcbiAgICAgICAgcmV0dXJuIGZvcm1hdE51bSggYW1vdW50ICk7IFxuICAgIH1cblxuXG5cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKCBpbnB1dC52YWx1ZSAhPT0gJycgKSB7XG4gICAgICAgICAgICBpbnZlc3RBbW91bnQgPSBpbnB1dC52YWx1ZTtcblxuICAgICAgICAgICAgLy8gPT09PT0gUmVtb3ZlIHRhYmxlIGJvZHkgYW5kIHJlLXJlbmRlciA9PT09PSAvL1xuICAgICAgICAgICAgd2hpbGUgKGN1cnJlbmN5VGFibGUuY2hpbGROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY3VycmVuY3lUYWJsZS5yZW1vdmVDaGlsZChjdXJyZW5jeVRhYmxlLmxhc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWlsZFRhYmxlKCBhbGxDdXJyZW5jaWVzICk7XG4gICAgICAgIH1cbiAgICB9XG59IClcbiJdfQ==