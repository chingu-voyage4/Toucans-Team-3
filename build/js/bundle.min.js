const chart=function(){let e=["January","February","March","April","May","June","July"],t=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r,a){return e=[],t=[],fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${r}&tsym=USD&limit=6`).then(e=>e.json()).then(r=>{let c=[];r.Data.forEach(t=>{c.push(t.close),e.push(function(e){const t=new Date(1e3*e),n=t.getDate(),r=t.getMonth();return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${n}`}(t.time))}),n(),n(),n(),t.push({label:a,backgroundColor:"transparent",borderColor:"rgba( 0, 0, 0, 0.7)",borderWidth:3,pointBackgroundColor:"#66ff66",pointRadius:5,pointHoverRadius:8,data:c}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:t},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Price in USD",fontSize:20}}],xAxes:[{scaleLabel:{display:!0,labelString:"Day",fontSize:20}}]}}})}()})}}}(),CurrencyTable=function(e){let t=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],c=document.querySelector(".curr-chart");function o(o){document.querySelectorAll(".fiat").forEach(e=>e.textContent=` (${r[1]})`),n=o;let s=document.createElement("tbody"),d=[];o.forEach((n,r)=>{d.push(n.symbol);let o=document.createElement("tr");o.innerHTML=`\n                    <td>${n.rank}</td>\n                    <td><span class="currency-name">${n.name}</span> <span class="currency-symbol"> ${n.symbol} </span></td>\n                    <td>${i(n.market_cap_usd)}</td>\n                    <td>${i(n.price_usd)}</td>\n                    <td>${a[r]}%</td>\n                    <td>${l(a[r])}<br><span class='coin-output'>  (à¸¿${t*a[r]/100/n.price_usd})</span></td>\n            `,o.style.cursor="pointer",s.appendChild(o),o.addEventListener("click",t=>{const r=document.getElementById("currency-chart");o.classList.contains("active")||r.scrollIntoView({behavior:"smooth"}),function(e){let t=document.querySelectorAll("tr.active");for(let e=0;e<t.length;e++)t[e].classList.remove("active");"span"===e.target.nodeName.toLowerCase()?e.target.parentNode.parentNode.classList.add("active"):e.target.parentNode.classList.add("active")}(t),c.innerHTML="",c.innerHTML='<canvas id="currency-chart"></canvas>',e.chart.getChartData(n.symbol,n.name)})}),e.currencyTable.appendChild(s),e.getNews(d),e.currencySymbol=d}function i(e){let t=parseFloat(e);return t%1!=0&&t>1?(t=`${r[0]}${t.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):t<1?`${r[0]}${t}`:(t=`${r[0]}${parseInt(t)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function l(e){return i(t*e/100)}return{buildTable:o,formatNum:i,calculateInvestment:l,submitForm:function(r){if(r.preventDefault(),""!==e.input.value){for(t=e.input.value;e.currencyTable.childNodes.length>1;)e.currencyTable.removeChild(e.currencyTable.lastChild);o(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const e="https://min-api.cryptocompare.com/data/news/?categories=";let t=[];const n=5;let r=0,a=n;const c=document.querySelector(".currency-table"),o=document.querySelector(".invest-form"),i=document.querySelector(".invest-input"),l=document.querySelector(".news-table"),s=document.querySelector(".refresh-icon"),d=document.querySelector("#nav-main"),u=d.offsetTop,m=CurrencyTable({form:o,input:i,currencyTable:c,getNews:h,currencySymbols:t,chart:chart});function p(e){return fetch(e).then(e=>e.json())}function h(t){let c=t.join(",");s.children[0].classList.add("spin-animation"),setTimeout(function(){s.children[0].classList.remove("spin-animation")},500),fetchUrl=e.concat(c),p(fetchUrl).then(e=>(function(e){a>=5*n?(r=0,a=n):(r+=n,a+=n);let t=e.slice(r,a),c=document.createElement("tbody");null!==l&&(l.innerHTML=""),t.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`\n            <td><a class="font-weight-bold" href="${e.url}">${e.title}</a> <p>${e.source}</p>\n            </td>\n            `,c.appendChild(t)}),l.appendChild(c)})(e))}o.addEventListener("submit",e=>(function(e){m.submitForm(e)})(e)),s.addEventListener("click",()=>h(t)),window.addEventListener("scroll",function(){window.scrollY>=u?(document.body.style.paddingTop=d.offsetHeight+"px",document.body.classList.add("fixed-nav")):(document.body.style.paddingTop=0,document.body.classList.remove("fixed-nav"))}),p("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(e=>{m.buildTable(e),chart.getChartData("BTC","Bitcoin")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY3VyU3ltYm9sIiwiY3VyTmFtZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImZvckVhY2giLCJkIiwicHVzaCIsImNsb3NlIiwiZGF0ZVRpbWUiLCJkYXRlU3RyaW5nIiwiRGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aEluZGV4IiwiZ2V0TW9udGgiLCJwYXJzZURhdGUiLCJ0aW1lIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJkYXRhIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwicmVzcG9uc2l2ZSIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJzY2FsZXMiLCJ5QXhlcyIsInNjYWxlTGFiZWwiLCJkaXNwbGF5IiwibGFiZWxTdHJpbmciLCJmb250U2l6ZSIsInhBeGVzIiwiYnVpbGRDaGFydCIsIkN1cnJlbmN5VGFibGUiLCJnbG9iYWwiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwiY3VycmVuY3lDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiYnVpbGRUYWJsZSIsImN1cnJlbmNpZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjcmVhdGVFbGVtZW50IiwiY3VyclN5bWJvbHMiLCJjdXIiLCJjb2luIiwic3ltYm9sIiwidHIiLCJpbm5lckhUTUwiLCJyYW5rIiwibmFtZSIsImZvcm1hdE51bSIsIm1hcmtldF9jYXBfdXNkIiwicHJpY2VfdXNkIiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsInN0eWxlIiwiY3Vyc29yIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImN1cnJlbmN5Q2hhcnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJldmVudCIsImFsbEFjdGl2ZSIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImFkZCIsInNob3dhY3RpdmVSb3ciLCJjdXJyZW5jeVRhYmxlIiwiZ2V0TmV3cyIsImN1cnJlbmN5U3ltYm9sIiwidmFsdWUiLCJuZXdOdW0iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlcGxhY2UiLCJwYXJzZUludCIsInN1Ym1pdEZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwibmV3c1VybCIsImN1cnJlbmN5U3ltYm9scyIsIm5ld3NMaW1pdCIsImZpcnN0QXJ0aWNsZSIsImxhc3RBcnRpY2xlIiwiZm9ybSIsIm5ld3NUYWJsZSIsInJlZnJlc2hCdXR0b24iLCJuYXYiLCJ0b3BPZk5hdiIsIm9mZnNldFRvcCIsIkN1cnJlbmN5IiwiZ2V0RGF0YSIsInVybCIsImN1cnJTdHJpbmciLCJqb2luIiwiY2hpbGRyZW4iLCJzZXRUaW1lb3V0IiwiZmV0Y2hVcmwiLCJjb25jYXQiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJpbmZvIiwidGl0bGUiLCJzb3VyY2UiLCJzaG93TmV3cyIsIndpbmRvdyIsInNjcm9sbFkiLCJib2R5IiwicGFkZGluZ1RvcCIsIm9mZnNldEhlaWdodCJdLCJtYXBwaW5ncyI6IkFBQ0EsTUFBQUEsTUFBQSxXQUVBLElBQUFDLEdB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akUsTUFBQWtFLFdBQUEsRUFDQTdHLFNBQUE0RyxLQUFBM0QsVUFBQVEsT0FBQSxnQkFaQWtDLEVBOUJBLHFEQThCQXRILEtBQUFDLElBQ0FvSCxFQUFBbEUsV0FBQWxELEdBQ0FiLE1BQUFRLGFBQUEsTUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGNoYXJ0ID0gKCBmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXQgbGFiZWxzICAgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIl07XG4gICAgbGV0IGRhdGFzZXRzID0gW107XG4gICAgXG5cbiAgICBmdW5jdGlvbiBnZXRDaGFydERhdGEgKCBjdXJTeW1ib2wsIGN1ck5hbWUgKXtcblxuICAgICAgICBsYWJlbHMgICA9IFtdO1xuICAgICAgICBkYXRhc2V0cyA9IFtdO1xuXG4gICAgICAgIHJldHVybiBmZXRjaCggYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL2hpc3RvZGF5P2ZzeW09JHtjdXJTeW1ib2x9JnRzeW09VVNEJmxpbWl0PTZgIClcbiAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gPT09PT0gQ2hlY2sgZm9yIEVtcHR5IERhdGEgPT09PT0gLy9cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdQcmljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmVzLkRhdGEuZm9yRWFjaCggZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zaW5nUHJpY2VzLnB1c2goIGQuY2xvc2UgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKCBwYXJzZURhdGUoIGQudGltZSApIClcbiAgICAgICAgICAgICAgICAgICAgIH0gKVxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZUNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKVxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY3VyTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAncmdiYSggMCwgMCwgMCwgMC43KScsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiAnIzY2ZmY2NicsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludFJhZGl1czogNSxcdFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRIb3ZlclJhZGl1czogOCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXG4gICAgICAgICAgICAgICAgICAgIH0gKVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XG4gICAgICAgICAgICAgICAgfSApXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBwYXJzZURhdGUoIGRhdGVUaW1lICkge1xuXG4gICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBuZXcgRGF0ZSggZGF0ZVRpbWUgKiAxMDAwICk7XG4gICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbXG4gICAgICAgICAgICBcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsXG4gICAgICAgICAgICBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIixcbiAgICAgICAgICAgIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLFxuICAgICAgICAgICAgXCJOb3ZlbWJlclwiLCBcIkRlY2VtYmVyXCJcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgZGF5ID0gZGF0ZVN0cmluZy5nZXREYXRlKCk7XG4gICAgICAgIGNvbnN0IG1vbnRoSW5kZXggPSBkYXRlU3RyaW5nLmdldE1vbnRoKCk7XG4gICAgICAgIFxuICAgICAgICAgIHJldHVybiBgJHttb250aE5hbWVzW21vbnRoSW5kZXhdfSAke2RheX1gO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFydCgpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG4gICAgICAgICAgICAvLyBoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBmb3Igb3VyIGRhdGFzZXRcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgICAgICAgZGF0YXNldHNcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6dHJ1ZSxcbiAgICAgICAgICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOmZhbHNlLFxuICAgICAgICAgICAgICAgIHNjYWxlczoge1xuICAgICAgICAgICAgICAgICAgICB5QXhlczogW3tcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZUxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxTdHJpbmc6ICdQcmljZSBpbiBVU0QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDIwXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgeEF4ZXM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZUxhYmVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nOiAnRGF5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDIwXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XG4gICAgICAgIHJldHVybiBgcmdiYSgke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAwLjgpYDtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbSgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikudG9TdHJpbmcoKTtcbiAgICB9XG5cblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldENoYXJ0RGF0YVxuICAgIH1cbn0gKSgpXG4iLCJjb25zdCBDdXJyZW5jeVRhYmxlID0gZnVuY3Rpb24gKCBnbG9iYWwgKSB7XG4gICAgXG4gICAgbGV0IGludmVzdEFtb3VudCAgICA9IDA7XG4gICAgbGV0IGFsbEN1cnJlbmNpZXMgICA9IFtdO1xuICAgIGxldCBmaWF0ICAgICAgICAgICAgPSBbJyQnLCAnVVNEJ107XG4gICAgY29uc3QgYzIwSW5kZXggICAgICA9IFsgMTMuNCwgMTIuMywgMTAuNSwgMTAuMiwgOS4yLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA3LjYsIDUuNCwgNC45LCA0LjMsIDQsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMuOCwgMy40LCAyLjEsIDEuNywgMS41LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxLjUsIDEuMiwgMS4yLCAwLjksIDAuOSBdO1xuICAgIFxuICAgIGNvbnN0IGN1cnJlbmN5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5jdXJyLWNoYXJ0JyApO1xuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge2N1cnJlbmNpZXN9IEFycmF5IGFycmF5IG9mIGN1cnJlbmNpZXMgZGF0YSAgXG4gICAgICovXG4gICAgZnVuY3Rpb24gYnVpbGRUYWJsZSggY3VycmVuY2llcyApIHtcbiAgICAgICAgLy8gQWRkIGZpYXQgdG8gdGhlYWRcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpYXQnKS5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLnRleHRDb250ZW50ID0gYCAoJHtmaWF0WzFdfSlgKTtcbiAgICAgICAgXG4gICAgICAgIGFsbEN1cnJlbmNpZXMgPSBjdXJyZW5jaWVzO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuICAgICAgICBsZXQgY3VyclN5bWJvbHMgPSBbXTtcbiAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKCAoIGN1ciwgY29pbiApID0+IHtcbiAgICAgICAgICAgIGN1cnJTeW1ib2xzLnB1c2goY3VyLnN5bWJvbCk7XG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7XG4gIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIucmFuayB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPjxzcGFuIGNsYXNzPVwiY3VycmVuY3ktbmFtZVwiPiR7IGN1ci5uYW1lfTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJjdXJyZW5jeS1zeW1ib2xcIj4gJHtjdXIuc3ltYm9sfSA8L3NwYW4+PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5wcmljZV91c2QgKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGMyMEluZGV4W2NvaW5dIH0lPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTxicj48c3BhbiBjbGFzcz0nY29pbi1vdXRwdXQnPiAgKOC4vyR7IChpbnZlc3RBbW91bnQgKiBjMjBJbmRleFtjb2luXSAvIDEwMCkgLyBjdXIucHJpY2VfdXNkfSk8L3NwYW4+PC90ZD5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB0ci5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKSAgXG5cbiAgICAgICAgICAgIHRyLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICggZSApID0+IHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbmN5Q2hhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ2N1cnJlbmN5LWNoYXJ0JyApOyAgXG4gICAgICAgICAgICAgICAgaWYgKCF0ci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5Q2hhcnQuc2Nyb2xsSW50b1ZpZXcoIHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hvd2FjdGl2ZVJvdyggZSApO1xuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29udGFpbmVyLmlubmVySFRNTCA9IGA8Y2FudmFzIGlkPVwiY3VycmVuY3ktY2hhcnRcIj48L2NhbnZhcz5gXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmNoYXJ0LmdldENoYXJ0RGF0YSggY3VyLnN5bWJvbCwgY3VyLm5hbWUgKTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgfSApICBcbiAgICAgICAgfSk7XG4gICAgICAgIGdsb2JhbC5jdXJyZW5jeVRhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xuICAgICAgICBnbG9iYWwuZ2V0TmV3cyhjdXJyU3ltYm9scyk7XG4gICAgICAgIGdsb2JhbC5jdXJyZW5jeVN5bWJvbCA9IGN1cnJTeW1ib2xzOyAgIFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzaG93YWN0aXZlUm93KCBldmVudCApIHtcbiAgICAgICAgbGV0IGFsbEFjdGl2ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICd0ci5hY3RpdmUnICk7XG4gICAgICAgIGZvciggbGV0IGkgPSAwIDsgaSA8IGFsbEFjdGl2ZS5sZW5ndGggOyBpICsrICl7XG4gICAgICAgICAgICBhbGxBY3RpdmVbaV0uY2xhc3NMaXN0LnJlbW92ZSggJ2FjdGl2ZScgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGV2ZW50LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc3BhbidcbiAgICAgICAgICAgID8gIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCggJ2FjdGl2ZScgKVxuICAgICAgICAgICAgOiAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCggJ2FjdGl2ZScgKTtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBmcm9tIGNlbGxEYXRhXG4gICAgICogQHJldHVybnMge051bWJlcn0gRm9ybWF0dGVkIHdpdGggY29tbWFzIGFuZCBmaWF0IHN5bWJvbC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JtYXROdW0oIHZhbHVlICkge1xuICAgICAgICBsZXQgbmV3TnVtID0gcGFyc2VGbG9hdCggdmFsdWUgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBmbG9hdFxuICAgICAgICBpZiAobmV3TnVtICUgMSAhPT0gMCAmJiBuZXdOdW0gPiAxKSB7XG4gICAgICAgICAgICAvLyBBZGQgZmlhdCBjdXJyZW5jeSBzeW1ib2wgJFxuICAgICAgICAgICAgLy8gSWYgcHJpY2UgaXMgb3ZlciAxLCBsaW1pdCBkZWNpbWFscyB0byB0d28gcGxhY2VzXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtLnRvRml4ZWQoMil9YDtcbiAgICAgICAgICAgIC8vIEFkZCBjb21tYSBhZnRlciBldmVyeSB0aHJlZSBudW1iZXJzXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XG4gICAgICAgIH0gZWxzZSBpZiAobmV3TnVtIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW19YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIG1hcmtldCBjYXAsIG5vIGRlY2ltYWwgcGxhY2VcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtwYXJzZUludChuZXdOdW0pfWA7XG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XG4gICAgICAgIH1cbiAgICB9IFxuXG5cbiAgICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBjdXJyZW5jeSdzIGluZGV4IHBlcmNlbnRhZ2VcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBjYWxjdWxhdGVJbnZlc3RtZW50KCB2YWx1ZSApIHtcbiAgICAgICAgLy8gPT09PT0gTmVlZCB0byBmaWd1cmUgb3V0IHRoZSBjYWxjdWxhdGlvbnMgaGVyZSA9PT09PSAvL1xuICAgICAgICBsZXQgYW1vdW50ID0gaW52ZXN0QW1vdW50ICogdmFsdWUgLyAxMDA7XG4gICAgICAgIHJldHVybiBmb3JtYXROdW0oIGFtb3VudCApOyBcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XG4gICAgICAgICAgICBpbnZlc3RBbW91bnQgPSBnbG9iYWwuaW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cbiAgICAgICAgICAgIHdoaWxlIChnbG9iYWwuY3VycmVuY3lUYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWwuY3VycmVuY3lUYWJsZS5yZW1vdmVDaGlsZChnbG9iYWwuY3VycmVuY3lUYWJsZS5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGRUYWJsZSggYWxsQ3VycmVuY2llcyApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBidWlsZFRhYmxlLFxuICAgICAgICBmb3JtYXROdW0sIFxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxuICAgICAgICBzdWJtaXRGb3JtXG4gICAgfVxuXG59IiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXG4gICAgXG5cbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xuICAgIGNvbnN0IG5ld3NVcmwgPSAnaHR0cHM6Ly9taW4tYXBpLmNyeXB0b2NvbXBhcmUuY29tL2RhdGEvbmV3cy8/Y2F0ZWdvcmllcz0nO1xuICAgIGxldCBjdXJyZW5jeVN5bWJvbHMgPSBbXTtcblxuICAgIC8vIG51bWJlciBvZiBuZXdzIGFydGljbGVzIHRvIHNob3dcbiAgICBjb25zdCBuZXdzTGltaXQgPSA1O1xuICAgIGxldCBmaXJzdEFydGljbGUgPSAwO1xuICAgIGxldCBsYXN0QXJ0aWNsZSA9IG5ld3NMaW1pdDtcblxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xuICAgIGNvbnN0IGN1cnJlbmN5VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmN1cnJlbmN5LXRhYmxlJyApO1xuICAgIGNvbnN0IGZvcm0gICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1mb3JtJyApO1xuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcbiAgICBjb25zdCBuZXdzVGFibGUgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uZXdzLXRhYmxlJyApO1xuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLnJlZnJlc2gtaWNvbicgKTtcbiAgICBjb25zdCBuYXYgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1tYWluJyk7XG4gICAgY29uc3QgdG9wT2ZOYXYgICAgICA9IG5hdi5vZmZzZXRUb3A7XG4gICAgXG5cblxuICAgIC8vID09PT09IHRoaXMgdmFyaWFibGUgaG9sZHMgYWxsIHRoZSBmdW5jdGlvbnMgZm9yIGN1cnJlbmN5IHRhYmxlID09PT09IC8vXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzLCBjdXJyZW5jeVN5bWJvbHMsIGNoYXJ0IH0gKTtcblxuICAgIC8vID09PT09IERPTSBMaXN0ZW5lcnMgPT09PT0gLy8gXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApICk7XG4gICAgcmVmcmVzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoKSA9PiBnZXROZXdzKCBjdXJyZW5jeVN5bWJvbHMgKSApXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZpeE5hdik7XG5cblxuXG4gICAgZ2V0RGF0YShjMjBVcmwpLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIEN1cnJlbmN5LmJ1aWxkVGFibGUoIHJlcyApO1xuICAgICAgICBjaGFydC5nZXRDaGFydERhdGEoICdCVEMnLCAnQml0Y29pbicgKTtcbiAgICB9IClcblxuXG4gICAgZnVuY3Rpb24gZml4TmF2KCkge1xuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPj0gdG9wT2ZOYXYpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1RvcCA9IG5hdi5vZmZzZXRIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmaXhlZC1uYXYnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1RvcCA9IDA7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLW5hdicpO1xuICAgICAgICB9ICAgICAgICAgICAgXG4gICAgfVxuXG4gICAgXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt1cmx9IFN0cmluZyAgdXJsIHN0cmluZ1xuICAgICAqIEByZXR1cm5zIHsgcHJvbWlzZSB9IFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldERhdGEoIHVybCApIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKCB1cmwgKVxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXG4gICAgfTsgXG5cbiAgICBcbiAgICBmdW5jdGlvbiBzaG93TmV3cyhhcnRpY2xlcykge1xuICAgICAgICAvLyBJZiB1c2VyIHJlZnJlc2hlcyBuZXdzLCBwdWxsIG5ldyBiYXRjaFxuICAgICAgICAvLyBXaGVuIHVzZXIgY3ljbGVzIDUgdGltZXMsIHN0YXJ0IGFnYWluXG4gICAgICAgIGlmIChsYXN0QXJ0aWNsZSA+PSBuZXdzTGltaXQgKiA1KSB7XG4gICAgICAgICAgICBmaXJzdEFydGljbGUgPSAwO1xuICAgICAgICAgICAgbGFzdEFydGljbGUgPSBuZXdzTGltaXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaXJzdEFydGljbGUgKz0gbmV3c0xpbWl0O1xuICAgICAgICAgICAgbGFzdEFydGljbGUgKz0gbmV3c0xpbWl0O1xuICAgICAgICB9XG4gICAgICAgIGxldCBhcnRpY2xlc1NhbXBsZSA9IGFydGljbGVzLnNsaWNlKGZpcnN0QXJ0aWNsZSwgbGFzdEFydGljbGUpOyAgXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcbiBcbiAgICAgICAgLy8gaWYgbmV3c3RhYmxlIGlzIGFscmVhZHkgcHJlc2VudCwgY2xlYXIgYmVmb3JlXG4gICAgICAgIC8vIGFwcGVuZGluZ1xuICAgICAgICBpZiAobmV3c1RhYmxlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBuZXdzVGFibGUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiBcbiAgICAgICAgYXJ0aWNsZXNTYW1wbGUuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkPjxhIGNsYXNzPVwiZm9udC13ZWlnaHQtYm9sZFwiIGhyZWY9XCIke2luZm8udXJsfVwiPiR7aW5mby50aXRsZX08L2E+IDxwPiR7aW5mby5zb3VyY2V9PC9wPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKTtcbiAgICAgICAgfSlcbiAgICAgICAgbmV3c1RhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBjb25zdHJ1Y3QgbmV3cyBiYXNlZCBvbiB0b3AgMjAgY3J5cHRvXG4gICAgICogQHBhcmFtIHtjdXJyU3ltYm9sfSBBcnJheSBjdXJyZW5jeXN5bWJvbHNcbiAgICAgKiBlZzogWydCVEMnLCAnRVRIJ11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5ld3MoY3VyclN5bWJvbHMpIHtcbiAgICAgICAgbGV0IGN1cnJTdHJpbmcgPSBjdXJyU3ltYm9scy5qb2luKFwiLFwiKTtcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCdzcGluLWFuaW1hdGlvbicpO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICBcdCAgICByZWZyZXNoQnV0dG9uLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ3NwaW4tYW5pbWF0aW9uJyk7XG4gICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgIGZldGNoVXJsID0gbmV3c1VybC5jb25jYXQoY3VyclN0cmluZyk7XG5cbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xuICAgICAgICBDdXJyZW5jeS5zdWJtaXRGb3JtKCBlICk7XG4gICAgfVxufSApXG4iXX0=
