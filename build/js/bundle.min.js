const chart=function(){let t=["January","February","March","April","May","June","July"],e=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){return t=[],e=[],fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${r}&tsym=USD&limit=6`).then(t=>t.json()).then(c=>{let a=[];c.Data.forEach(e=>{a.push(e.close),t.push(e.time)});let o=`rgba(${n()}, ${n()}, ${n()}, 0.8)`;e.push({label:r,backgroundColor:"transparent",borderColor:o,borderWidth:4.5,pointBackgroundColor:o,pointRadius:5,pointHoverRadius:8,data:a}),console.log(e),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:t,datasets:e},options:{responsive:!0,maintainAspectRatio:!1}})}()})}}}(),CurrencyTable=function(t){let e=0,n=[],r=["$","USD"];const c=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9];function a(e){document.querySelectorAll(".fiat").forEach(t=>t.textContent=` (${r[1]})`),n=e;let a=document.createElement("tbody"),d=[];e.forEach((e,n)=>{d.push(e.symbol);let r=document.createElement("tr");r.innerHTML=`\n                    <td>${e.rank}</td>\n                    <td>${e.name}</td>\n                    <td>${o(e.market_cap_usd)}</td>\n                    <td>${o(e.price_usd)}</td>\n                    <td>${c[n]}%</td>\n                    <td>${l(c[n])}</td>\n            `,a.appendChild(r),r.addEventListener("click",()=>{document.getElementById("currency-chart").innerHTML="",t.chart.getChartData(e.symbol)})}),t.currencyTable.appendChild(a),t.getNews(d),t.currencySymbol=d}function o(t){let e=parseFloat(t);return e%1!=0&&e>1?(e=`${r[0]}${e.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e<1?`${r[0]}${e}`:(e=`${r[0]}${parseInt(e)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function l(t){let n=e*t/100;return e-=n,o(n)}return{buildTable:a,formatNum:o,calculateInvestment:l,submitForm:function(r){if(r.preventDefault(),""!==t.input.value){for(e=t.input.value;t.currencyTable.childNodes.length>1;)t.currencyTable.removeChild(t.currencyTable.lastChild);a(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const t="https://min-api.cryptocompare.com/data/news/?categories=";let e=[];const n=5;let r=0,c=n;const a=document.querySelector(".currency-table"),o=document.querySelector(".invest-form"),l=document.querySelector(".invest-input"),d=document.querySelector(".news-table"),u=document.querySelector(".refresh-icon"),i=CurrencyTable({form:o,input:l,currencyTable:a,getNews:m,currencySymbols:e,chart:chart});function s(t){return fetch(t).then(t=>t.json())}function m(e){let a=e.join(",");fetchUrl=t.concat(a),s(fetchUrl).then(t=>(function(t){c>=5*n?(r=0,c=n):(r+=n,c+=n);let e=t.slice(r,c),a=document.createElement("tbody");null!==d&&(d.innerHTML=""),e.forEach(t=>{let e=document.createElement("tr");e.innerHTML=`\n            <td><a class="font-weight-bold" href="${t.url}">${t.title}</a> <p>${t.source}</p>\n            </td>\n            `,a.appendChild(e)}),d.appendChild(a)})(t))}o.addEventListener("submit",t=>(function(t){i.submitForm(t)})(t)),u.addEventListener("click",()=>m(e)),s("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(t=>{i.buildTable(t),chart.getChartData("BTC")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY3VycmVuY3kiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJqc29uIiwiY2xvc2luZ1ByaWNlcyIsIkRhdGEiLCJmb3JFYWNoIiwiZCIsInB1c2giLCJjbG9zZSIsInRpbWUiLCJsaW5lQ29sb3IiLCJsYWJlbCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlckNvbG9yIiwiYm9yZGVyV2lkdGgiLCJwb2ludEJhY2tncm91bmRDb2xvciIsInBvaW50UmFkaXVzIiwicG9pbnRIb3ZlclJhZGl1cyIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwicmVzcG9uc2l2ZSIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJidWlsZENoYXJ0IiwiQ3VycmVuY3lUYWJsZSIsImdsb2JhbCIsImludmVzdEFtb3VudCIsImFsbEN1cnJlbmNpZXMiLCJmaWF0IiwiYzIwSW5kZXgiLCJidWlsZFRhYmxlIiwiY3VycmVuY2llcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpdGVtIiwidGV4dENvbnRlbnQiLCJ0Ym9keSIsImNyZWF0ZUVsZW1lbnQiLCJjdXJyU3ltYm9scyIsImN1ciIsImNvaW4iLCJzeW1ib2wiLCJ0ciIsImlubmVySFRNTCIsInJhbmsiLCJuYW1lIiwiZm9ybWF0TnVtIiwibWFya2V0X2NhcF91c2QiLCJwcmljZV91c2QiLCJjYWxjdWxhdGVJbnZlc3RtZW50IiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiY3VycmVuY3lUYWJsZSIsImdldE5ld3MiLCJjdXJyZW5jeVN5bWJvbCIsInZhbHVlIiwibmV3TnVtIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZXBsYWNlIiwicGFyc2VJbnQiLCJhbW91bnQiLCJzdWJtaXRGb3JtIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaW5wdXQiLCJjaGlsZE5vZGVzIiwibGVuZ3RoIiwicmVtb3ZlQ2hpbGQiLCJsYXN0Q2hpbGQiLCJuZXdzVXJsIiwiY3VycmVuY3lTeW1ib2xzIiwibmV3c0xpbWl0IiwiZmlyc3RBcnRpY2xlIiwibGFzdEFydGljbGUiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsIm5ld3NUYWJsZSIsInJlZnJlc2hCdXR0b24iLCJDdXJyZW5jeSIsImdldERhdGEiLCJ1cmwiLCJjdXJyU3RyaW5nIiwiam9pbiIsImZldGNoVXJsIiwiY29uY2F0IiwiYXJ0aWNsZXMiLCJhcnRpY2xlc1NhbXBsZSIsInNsaWNlIiwiaW5mbyIsInRpdGxlIiwic291cmNlIiwic2hvd05ld3MiXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsV0FFQSxJQUFBQyxHQUFBLFVBQUEsV0FBQSxRQUFBLFFBQUEsTUFBQSxPQUFBLFFBQ0FDLEtBbUVBLFNBQUFDLElBQ0EsT0FBQUMsS0FBQUMsTUFBQSxJQUFBRCxLQUFBRSxVQUFBQyxXQUlBLE9BQ0FDLGFBdEVBLFNBQUFDLEdBUUEsT0FOQVIsS0FDQUMsS0FLQVEsa0dBQUFELHNCQUNBRSxLQUFBQyxHQUFBQSxFQUFBQyxRQUVBRixLQUFBQyxJQUdBLElBQUFFLEtBQ0FGLEVBQUFHLEtBQUFDLFFBQUFDLElBQ0FILEVBQUFJLEtBQUFELEVBQUFFLE9BQ0FsQixFQUFBaUIsS0FBQUQsRUFBQUcsUUFFQSxJQUFBQyxVQXlDQWxCLFFBQUFBLFFBQUFBLFlBeENBRCxFQUFBZ0IsTUFDQUksTUFBQWIsRUFDQWMsZ0JBQUEsY0FDQUMsWUFBQUgsRUFDQUksWUFBQSxJQUNBQyxxQkFBQUwsRUFDQU0sWUFBQSxFQUNBQyxpQkFBQSxFQUNBQyxLQUFBZixJQUVBZ0IsUUFBQUMsSUFBQTdCLEdBUUEsV0FDQSxNQUFBOEIs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QUFBLEVBQUFGLEdBQ0FDLEVBQUEsRUFDQUMsRUFBQUYsSUFFQUMsR0FBQUQsRUFDQUUsR0FBQUYsR0FFQSxJQUFBZSxFQUFBRCxFQUFBRSxNQUFBZixFQUFBQyxHQUNBdEMsRUFBQXBCLFNBQUFxQixjQUFBLFNBSUEsT0FBQXdDLElBQ0FBLEVBQUFsQyxVQUFBLElBR0E0QyxFQUFBeEYsUUFBQTBGLElBQ0EsSUFBQS9DLEVBQUExQixTQUFBcUIsY0FBQSxNQUNBSyxFQUFBQyxpRUFDQThDLEVBQUFSLFFBQUFRLEVBQUFDLGdCQUFBRCxFQUFBRSw4Q0FHQXZELEVBQUFjLFlBQUFSLEtBRUFtQyxFQUFBM0IsWUFBQWQsSUFhQXdELENBQUFqRyxJQTdEQWlGLEVBQUF6QixpQkFBQSxTQUFBWSxJQWlFQSxTQUFBQSxHQUNBZ0IsRUFBQWpCLFdBQUFDLElBbEVBRCxDQUFBQyxJQUNBZSxFQUFBM0IsaUJBQUEsUUFBQSxJQUFBRSxFQUFBa0IsSUFJQVMsRUExQkEscURBMEJBdEYsS0FBQUMsSUFDQW9GLEVBQUFoRCxXQUFBcEMsR0FDQVosTUFBQVEsYUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmNvbnN0IGNoYXJ0ID0gKCBmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXQgbGFiZWxzICAgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIl07XG4gICAgbGV0IGRhdGFzZXRzID0gW107XG4gICAgXG5cbiAgICBmdW5jdGlvbiBnZXRDaGFydERhdGEgKCBjdXJyZW5jeSApe1xuXG4gICAgICAgIGxhYmVscyAgID0gW107XG4gICAgICAgIGRhdGFzZXRzID0gW107XG5cbiAgICAgICAgLy8gbGV0IGN1cnJlbmNpZXMgPSBjaGFydERhdGEuZmlsdGVyKCAoIGNkLCBpbmRleCApID0+IGluZGV4IDw9IDkgKTtcblxuICAgICAgICAvLyBQcm9taXNlLmFsbCggY3VycmVuY2llcy5tYXAoIGNkID0+IHtcbiAgICAgICAgICAgIHJldHVybiBmZXRjaCggYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL2hpc3RvZGF5P2ZzeW09JHtjdXJyZW5jeX0mdHN5bT1VU0QmbGltaXQ9NmAgKVxuICAgICAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHJlcy5qc29uKCkgKVxuICAgICAgICAvLyB9ICkgKVxuICAgICAgICAudGhlbiggcmVzID0+IHtcblxuICAgICAgICAgICAgLy8gcmVzLmZvckVhY2goICggZGF0YSwgaW5kZXggKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdQcmljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICByZXMuRGF0YS5mb3JFYWNoKCBkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1ByaWNlcy5wdXNoKCBkLmNsb3NlICk7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKCBkLnRpbWUgKVxuICAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgICAgICBsZXQgbGluZUNvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKVxuICAgICAgICAgICAgICAgIGRhdGFzZXRzLnB1c2goIHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGN1cnJlbmN5LFxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBsaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiA0LjUsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50QmFja2dyb3VuZENvbG9yOiBsaW5lQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50UmFkaXVzOiA1LFx0XG4gICAgICAgICAgICAgICAgICAgIHBvaW50SG92ZXJSYWRpdXM6IDgsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXG4gICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGRhdGFzZXRzKVxuICAgICAgICAgICAgLy8gIH0gKVxuXG4gICAgICAgICAgICAgYnVpbGRDaGFydCgpO1xuICAgICAgICB9IClcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQ2hhcnQoKSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW5jeS1jaGFydCcpLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGNvbnN0IGNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICAgICAgLy8gaGUgdHlwZSBvZiBjaGFydCB3ZSB3YW50IHRvIGNyZWF0ZVxuICAgICAgICAgICAgdHlwZTogJ2xpbmUnLFxuICAgIFxuICAgICAgICAgICAgLy8gVGhlIGRhdGEgZm9yIG91ciBkYXRhc2V0XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbGFiZWxzLFxuICAgICAgICAgICAgICAgIGRhdGFzZXRzXG4gICAgICAgICAgICB9LFxuICAgIFxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGdvIGhlcmVcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICByZXNwb25zaXZlOnRydWUsXG4gICAgICAgICAgICAgICAgbWFpbnRhaW5Bc3BlY3RSYXRpbzpmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IClcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIGdldFJhbmRvbUNvbG9yKCkge1xuICAgICAgICByZXR1cm4gYHJnYmEoJHtnZXRSYW5kb20oKX0sICR7Z2V0UmFuZG9tKCl9LCAke2dldFJhbmRvbSgpfSwgMC44KWA7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb20oKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNTYpLnRvU3RyaW5nKCk7XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRDaGFydERhdGFcbiAgICB9XG59ICkoKVxuIiwiY29uc3QgQ3VycmVuY3lUYWJsZSA9IGZ1bmN0aW9uICggZ2xvYmFsICkge1xuICAgIFxuICAgIGxldCBpbnZlc3RBbW91bnQgICAgPSAwO1xuICAgIGxldCBhbGxDdXJyZW5jaWVzICAgPSBbXTtcbiAgICBsZXQgZmlhdCAgICAgICAgICAgID0gWyckJywgJ1VTRCddO1xuICAgIGNvbnN0IGMyMEluZGV4ICAgICAgPSBbIDEzLjQsIDEyLjMsIDEwLjUsIDEwLjIsIDkuMiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNy42LCA1LjQsIDQuOSwgNC4zLCA0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzLjgsIDMuNCwgMi4xLCAxLjcsIDEuNSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMS41LCAxLjIsIDEuMiwgMC45LCAwLjkgXTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtjdXJyZW5jaWVzfSBBcnJheSBhcnJheSBvZiBjdXJyZW5jaWVzIGRhdGEgIFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkVGFibGUoIGN1cnJlbmNpZXMgKSB7XG4gICAgICAgIC8vIEFkZCBmaWF0IHRvIHRoZWFkXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWF0JykuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS50ZXh0Q29udGVudCA9IGAgKCR7ZmlhdFsxXX0pYCk7XG4gICAgICAgIFxuICAgICAgICBhbGxDdXJyZW5jaWVzID0gY3VycmVuY2llcztcbiAgICAgICAgXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcbiAgICAgICAgbGV0IGN1cnJTeW1ib2xzID0gW107XG4gICAgICAgIGN1cnJlbmNpZXMuZm9yRWFjaCggKCBjdXIsIGNvaW4gKSA9PiB7XG4gICAgICAgICAgICBjdXJyU3ltYm9scy5wdXNoKGN1ci5zeW1ib2wpO1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLnJhbmsgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIubmFtZSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5wcmljZV91c2QgKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGMyMEluZGV4W2NvaW5dIH0lPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTwvdGQ+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICkgIFxuICAgICAgICAgICAgdHIuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnY3VycmVuY3ktY2hhcnQnICkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgZ2xvYmFsLmNoYXJ0LmdldENoYXJ0RGF0YSggY3VyLnN5bWJvbCApOyBcbiAgICAgICAgICAgICB9ICkgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBnbG9iYWwuY3VycmVuY3lUYWJsZS5hcHBlbmRDaGlsZCggdGJvZHkgKTtcbiAgICAgICAgZ2xvYmFsLmdldE5ld3MoY3VyclN5bWJvbHMpO1xuICAgICAgICBnbG9iYWwuY3VycmVuY3lTeW1ib2wgPSBjdXJyU3ltYm9sczsgICBcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3ZhbHVlfSBOdW1iZXIgZnJvbSBjZWxsRGF0YVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IEZvcm1hdHRlZCB3aXRoIGNvbW1hcyBhbmQgZmlhdCBzeW1ib2wuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9ybWF0TnVtKCB2YWx1ZSApIHtcbiAgICAgICAgbGV0IG5ld051bSA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBmb3IgZmxvYXRcbiAgICAgICAgaWYgKG5ld051bSAlIDEgIT09IDAgJiYgbmV3TnVtID4gMSkge1xuICAgICAgICAgICAgLy8gQWRkIGZpYXQgY3VycmVuY3kgc3ltYm9sICRcbiAgICAgICAgICAgIC8vIElmIHByaWNlIGlzIG92ZXIgMSwgbGltaXQgZGVjaW1hbHMgdG8gdHdvIHBsYWNlc1xuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bS50b0ZpeGVkKDIpfWA7XG4gICAgICAgICAgICAvLyBBZGQgY29tbWEgYWZ0ZXIgZXZlcnkgdGhyZWUgbnVtYmVyc1xuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld051bSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBtYXJrZXQgY2FwLCBubyBkZWNpbWFsIHBsYWNlXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7cGFyc2VJbnQobmV3TnVtKX1gO1xuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xuICAgICAgICB9XG4gICAgfSBcblxuXG4gICAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3ZhbHVlfSBOdW1iZXIgY3VycmVuY3kncyBpbmRleCBwZXJjZW50YWdlXG4gICAgICogQHJldHVybnMge051bWJlcn0gXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2FsY3VsYXRlSW52ZXN0bWVudCggdmFsdWUgKSB7XG4gICAgICAgIC8vID09PT09IE5lZWQgdG8gZmlndXJlIG91dCB0aGUgY2FsY3VsYXRpb25zIGhlcmUgPT09PT0gLy9cbiAgICAgICAgbGV0IGFtb3VudCA9IGludmVzdEFtb3VudCAqIHZhbHVlIC8gMTAwO1xuICAgICAgICBpbnZlc3RBbW91bnQgPSBpbnZlc3RBbW91bnQgLSBhbW91bnQ7XG4gICAgICAgIHJldHVybiBmb3JtYXROdW0oIGFtb3VudCApOyBcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XG4gICAgICAgICAgICBpbnZlc3RBbW91bnQgPSBnbG9iYWwuaW5wdXQudmFsdWU7XG5cbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cbiAgICAgICAgICAgIHdoaWxlIChnbG9iYWwuY3VycmVuY3lUYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWwuY3VycmVuY3lUYWJsZS5yZW1vdmVDaGlsZChnbG9iYWwuY3VycmVuY3lUYWJsZS5sYXN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVpbGRUYWJsZSggYWxsQ3VycmVuY2llcyApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBidWlsZFRhYmxlLFxuICAgICAgICBmb3JtYXROdW0sIFxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxuICAgICAgICBzdWJtaXRGb3JtXG4gICAgfVxuXG59IiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXG4gICAgXG5cbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xuICAgIGNvbnN0IG5ld3NVcmwgPSAnaHR0cHM6Ly9taW4tYXBpLmNyeXB0b2NvbXBhcmUuY29tL2RhdGEvbmV3cy8/Y2F0ZWdvcmllcz0nO1xuICAgIGxldCBjdXJyZW5jeVN5bWJvbHMgPSBbXTtcblxuICAgIC8vIG51bWJlciBvZiBuZXdzIGFydGljbGVzIHRvIHNob3dcbiAgICBjb25zdCBuZXdzTGltaXQgPSA1O1xuICAgIGxldCBmaXJzdEFydGljbGUgPSAwO1xuICAgIGxldCBsYXN0QXJ0aWNsZSA9IG5ld3NMaW1pdDtcblxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xuICAgIGNvbnN0IGN1cnJlbmN5VGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmN1cnJlbmN5LXRhYmxlJyApO1xuICAgIGNvbnN0IGZvcm0gICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1mb3JtJyApO1xuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcbiAgICBjb25zdCBuZXdzVGFibGUgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uZXdzLXRhYmxlJyApO1xuICAgIGNvbnN0IHJlZnJlc2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLnJlZnJlc2gtaWNvbicgKTtcblxuXG4gICAgLy8gPT09PT0gdGhpcyB2YXJpYWJsZSBob2xkcyBhbGwgdGhlIGZ1bmN0aW9ucyBmb3IgY3VycmVuY3kgdGFibGUgPT09PT0gLy9cbiAgICBjb25zdCBDdXJyZW5jeSA9IEN1cnJlbmN5VGFibGUoIHsgZm9ybSwgaW5wdXQsIGN1cnJlbmN5VGFibGUsIGdldE5ld3MsIGN1cnJlbmN5U3ltYm9scywgY2hhcnQgfSApO1xuXG4gICAgLy8gPT09PT0gRE9NIExpc3RlbmVycyA9PT09PSAvLyBcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoICdzdWJtaXQnLCAoIGUgKSA9PiBzdWJtaXRGb3JtKCBlICkgKTtcbiAgICByZWZyZXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IGdldE5ld3MoIGN1cnJlbmN5U3ltYm9scyApIClcblxuXG5cbiAgICBnZXREYXRhKGMyMFVybCkudGhlbiggcmVzID0+IHtcbiAgICAgICAgQ3VycmVuY3kuYnVpbGRUYWJsZSggcmVzICk7XG4gICAgICAgIGNoYXJ0LmdldENoYXJ0RGF0YSggJ0JUQycgKTtcbiAgICB9IClcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXG4gICAgICogQHJldHVybnMgeyBwcm9taXNlIH0gXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xuICAgICAgICByZXR1cm4gZmV0Y2goIHVybCApXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcbiAgICB9OyBcblxuICAgIFxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XG4gICAgICAgIC8vIElmIHVzZXIgcmVmcmVzaGVzIG5ld3MsIHB1bGwgbmV3IGJhdGNoXG4gICAgICAgIC8vIFdoZW4gdXNlciBjeWNsZXMgNSB0aW1lcywgc3RhcnQgYWdhaW5cbiAgICAgICAgaWYgKGxhc3RBcnRpY2xlID49IG5ld3NMaW1pdCAqIDUpIHtcbiAgICAgICAgICAgIGZpcnN0QXJ0aWNsZSA9IDA7XG4gICAgICAgICAgICBsYXN0QXJ0aWNsZSA9IG5ld3NMaW1pdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpcnN0QXJ0aWNsZSArPSBuZXdzTGltaXQ7XG4gICAgICAgICAgICBsYXN0QXJ0aWNsZSArPSBuZXdzTGltaXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFydGljbGVzU2FtcGxlID0gYXJ0aWNsZXMuc2xpY2UoZmlyc3RBcnRpY2xlLCBsYXN0QXJ0aWNsZSk7ICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuIFxuICAgICAgICAvLyBpZiBuZXdzdGFibGUgaXMgYWxyZWFkeSBwcmVzZW50LCBjbGVhciBiZWZvcmVcbiAgICAgICAgLy8gYXBwZW5kaW5nXG4gICAgICAgIGlmIChuZXdzVGFibGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ld3NUYWJsZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgfVxuIFxuICAgICAgICBhcnRpY2xlc1NhbXBsZS5mb3JFYWNoKChpbmZvKSA9PiB7XG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndHInICk7XG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8dGQ+PGEgY2xhc3M9XCJmb250LXdlaWdodC1ib2xkXCIgaHJlZj1cIiR7aW5mby51cmx9XCI+JHtpbmZvLnRpdGxlfTwvYT4gPHA+JHtpbmZvLnNvdXJjZX08L3A+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApO1xuICAgICAgICB9KVxuICAgICAgICBuZXdzVGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XG4gICAgfVxuXG4gICAgLyoqIFxuICAgICAqIGNvbnN0cnVjdCBuZXdzIGJhc2VkIG9uIHRvcCAyMCBjcnlwdG9cbiAgICAgKiBAcGFyYW0ge2N1cnJTeW1ib2x9IEFycmF5IGN1cnJlbmN5c3ltYm9sc1xuICAgICAqIGVnOiBbJ0JUQycsICdFVEgnXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2V0TmV3cyhjdXJyU3ltYm9scykge1xuICAgICAgICBsZXQgY3VyclN0cmluZyA9IGN1cnJTeW1ib2xzLmpvaW4oXCIsXCIpO1xuICAgICAgICBcbiAgICAgICAgZmV0Y2hVcmwgPSBuZXdzVXJsLmNvbmNhdChjdXJyU3RyaW5nKTtcblxuICAgICAgICBnZXREYXRhKGZldGNoVXJsKS50aGVuKHJlcyA9PiBzaG93TmV3cyhyZXMpKTtcbiAgICB9XG5cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XG4gICAgICAgIEN1cnJlbmN5LnN1Ym1pdEZvcm0oIGUgKTtcbiAgICB9XG59IClcbiJdfQ==
