const chart=function(){let e=["January","February","March","April","May","June","July"],t=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r,a){return e=[],t=[],fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${r}&tsym=USD&limit=6`).then(e=>e.json()).then(r=>{let c=[];r.Data.forEach(t=>{c.push(t.close),e.push(function(e){const t=new Date(1e3*e),n=t.getDate(),r=t.getMonth();return`${["January","February","March","April","May","June","July","August","September","October","November","December"][r]} ${n}`}(t.time))}),n(),n(),n(),t.push({label:a,backgroundColor:"transparent",borderColor:"rgba( 0, 0, 0, 0.7)",borderWidth:3,pointBackgroundColor:"#66ff66",pointRadius:5,pointHoverRadius:8,data:c}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:t},options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Price in USD",fontSize:20}}],xAxes:[{scaleLabel:{display:!0,labelString:"Day",fontSize:20}}]}}})}()})}}}(),CurrencyTable=function(e){let t=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],c=document.querySelector(".curr-chart");function o(o){document.querySelectorAll(".fiat").forEach(e=>e.textContent=` (${r[1]})`),n=o;let i=document.createElement("tbody"),d=[];o.forEach((n,r)=>{d.push(n.symbol);let o=document.createElement("tr");o.innerHTML=`\n                    <td>${n.rank}</td>\n                    <td><span class="currency-name">${n.name}</span> <span class="currency-symbol"> ${n.symbol} </span></td>\n                    <td>${s(n.market_cap_usd)}</td>\n                    <td>${s(n.price_usd)}</td>\n                    <td>${a[r]}%</td>\n                    <td>${l(a[r])}<br><span class='coin-output'>  (${t*a[r]/100/n.price_usd})</span><br><a class="btn btn-danger" href= ${function(e){switch(e){case"BTC":return"https://www.binance.com/trade.html?symbol=BTC_USDT";case"ETH":return"https://www.binance.com/trade.html?symbol=ETH_USDT";default:return`'https://www.binance.com/trade.html?symbol=${e}_BTC'`}}(n.symbol)} target="_blank">Buy on Binance</a></td>\n            `,o.style.cursor="pointer",i.appendChild(o),o.addEventListener("click",t=>{const r=document.getElementById("currency-chart");o.classList.contains("active")||r.scrollIntoView({behavior:"smooth"}),function(e){let t=document.querySelectorAll("tr.active");for(let e=0;e<t.length;e++)t[e].classList.remove("active");"span"===e.target.nodeName.toLowerCase()?e.target.parentNode.parentNode.classList.add("active"):e.target.parentNode.classList.add("active")}(t),c.innerHTML="",c.innerHTML='<canvas id="currency-chart"></canvas>',e.chart.getChartData(n.symbol,n.name)})}),e.currencyTable.appendChild(i),e.getNews(d),e.currencySymbol=d}function s(e){let t=parseFloat(e);return t%1!=0&&t>1?(t=`${r[0]}${t.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):t<1?`${r[0]}${t}`:(t=`${r[0]}${parseInt(t)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function l(e){return s(t*e/100)}return{buildTable:o,formatNum:s,calculateInvestment:l,submitForm:function(r){if(r.preventDefault(),""!==e.input.value){for(t=e.input.value;e.currencyTable.childNodes.length>1;)e.currencyTable.removeChild(e.currencyTable.lastChild);o(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const e="https://min-api.cryptocompare.com/data/news/?categories=";let t=[];const n=5;let r=0,a=n;const c=document.querySelector(".currency-table"),o=document.querySelector(".invest-form"),s=document.querySelector(".invest-input"),l=document.querySelector(".news-table"),i=document.querySelector(".refresh-icon"),d=document.querySelector("#nav-main"),u=d.offsetTop,m=CurrencyTable({form:o,input:s,currencyTable:c,getNews:h,currencySymbols:t,chart:chart});function p(e){return fetch(e).then(e=>e.json())}function h(t){let c=t.join(",");i.children[0].classList.add("spin-animation"),setTimeout(function(){i.children[0].classList.remove("spin-animation")},500),fetchUrl=e.concat(c),p(fetchUrl).then(e=>(function(e){a>=5*n?(r=0,a=n):(r+=n,a+=n);let t=e.slice(r,a),c=document.createElement("tbody");null!==l&&(l.innerHTML=""),t.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`\n            <td><a class="font-weight-bold" href="${e.url}" target="_blank">${e.title}</a> <p>${e.source}</p>\n            </td>\n            `,c.appendChild(t)}),l.appendChild(c)})(e))}o.addEventListener("submit",e=>(function(e){m.submitForm(e)})(e)),i.addEventListener("click",()=>h(t)),window.addEventListener("scroll",function(){window.scrollY>=u?(document.body.style.paddingTop=d.offsetHeight+"px",document.body.classList.add("fixed-nav")):(document.body.style.paddingTop=0,document.body.classList.remove("fixed-nav"))}),p("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(e=>{m.buildTable(e),chart.getChartData("BTC","Bitcoin")})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY3VyU3ltYm9sIiwiY3VyTmFtZSIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImZvckVhY2giLCJkIiwicHVzaCIsImNsb3NlIiwiZGF0ZVRpbWUiLCJkYXRlU3RyaW5nIiwiRGF0ZSIsImRheSIsImdldERhdGUiLCJtb250aEluZGV4IiwiZ2V0TW9udGgiLCJwYXJzZURhdGUiLCJ0aW1lIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlcldpZHRoIiwicG9pbnRCYWNrZ3JvdW5kQ29sb3IiLCJwb2ludFJhZGl1cyIsInBvaW50SG92ZXJSYWRpdXMiLCJkYXRhIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwicmVzcG9uc2l2ZSIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJzY2FsZXMiLCJ5QXhlcyIsInNjYWxlTGFiZWwiLCJkaXNwbGF5IiwibGFiZWxTdHJpbmciLCJmb250U2l6ZSIsInhBeGVzIiwiYnVpbGRDaGFydCIsIkN1cnJlbmN5VGFibGUiLCJnbG9iYWwiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwiY3VycmVuY3lDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiYnVpbGRUYWJsZSIsImN1cnJlbmNpZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjcmVhdGVFbGVtZW50IiwiY3VyclN5bWJvbHMiLCJjdXIiLCJjb2luIiwic3ltYm9sIiwidHIiLCJpbm5lckhUTUwiLCJyYW5rIiwibmFtZSIsImZvcm1hdE51bSIsIm1hcmtldF9jYXBfdXNkIiwicHJpY2VfdXNkIiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsImN1cnJlbmN5IiwiYWRkQnV5QnV0dCIsInN0eWxlIiwiY3Vyc29yIiwiYXBwZW5kQ2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImN1cnJlbmN5Q2hhcnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNjcm9sbEludG9WaWV3IiwiYmVoYXZpb3IiLCJldmVudCIsImFsbEFjdGl2ZSIsImkiLCJsZW5ndGgiLCJyZW1vdmUiLCJ0YXJnZXQiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsImFkZCIsInNob3dhY3RpdmVSb3ciLCJjdXJyZW5jeVRhYmxlIiwiZ2V0TmV3cyIsImN1cnJlbmN5U3ltYm9sIiwidmFsdWUiLCJuZXdOdW0iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlcGxhY2UiLCJwYXJzZUludCIsInN1Ym1pdEZvcm0iLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwibmV3c1VybCIsImN1cnJlbmN5U3ltYm9scyIsIm5ld3NMaW1pdCIsImZpcnN0QXJ0aWNsZSIsImxhc3RBcnRpY2xlIiwiZm9ybSIsIm5ld3NUYWJsZSIsInJlZnJlc2hCdXR0b24iLCJuYXYiLCJ0b3BPZk5hdiIsIm9mZnNldFRvcCIsIkN1cnJlbmN5IiwiZ2V0RGF0YSIsInVybCIsImN1cnJTdHJpbmciLCJqb2luIiwiY2hpbGRyZW4iLCJzZXRUaW1lb3V0IiwiZmV0Y2hVcmwiLCJjb25jYXQiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJpbmZvIiwidGl0bGUiLCJzb3VyY2UiLCJzaG93TmV3cyIsIndpbmRvdyIsInNjcm9sbFkiLCJib2R5IiwicGFkZGluZ1RvcCIsIm9mZnNldEhlaWdodCJdLCJtYXBwaW5ncyI6IkFBQ0Es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LGlCQUFBLFNBVUEsV0FDQTRELE9BQUFDLFNBQUFuQixHQUNBMUYsU0FBQThHLEtBQUFqRSxNQUFBa0UsV0FBQXRCLEVBQUF1QixhQUFBLEtBQ0FoSCxTQUFBOEcsS0FBQTNELFVBQUFhLElBQUEsZUFFQWhFLFNBQUE4RyxLQUFBakUsTUFBQWtFLFdBQUEsRUFDQS9HLFNBQUE4RyxLQUFBM0QsVUFBQVEsT0FBQSxnQkFaQWtDLEVBOUJBLHFEQThCQXhILEtBQUFDLElBQ0FzSCxFQUFBcEUsV0FBQWxELEdBQ0FiLE1BQUFRLGFBQUEsTUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY29uc3QgY2hhcnQgPSAoIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBsZXQgbGFiZWxzICAgPSBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIl07XHJcbiAgICBsZXQgZGF0YXNldHMgPSBbXTtcclxuICAgIFxyXG5cclxuICAgIGZ1bmN0aW9uIGdldENoYXJ0RGF0YSAoIGN1clN5bWJvbCwgY3VyTmFtZSApe1xyXG5cclxuICAgICAgICBsYWJlbHMgICA9IFtdO1xyXG4gICAgICAgIGRhdGFzZXRzID0gW107XHJcblxyXG4gICAgICAgIHJldHVybiBmZXRjaCggYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL2hpc3RvZGF5P2ZzeW09JHtjdXJTeW1ib2x9JnRzeW09VVNEJmxpbWl0PTZgIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXHJcbiAgICAgICAgICAgICAgICAudGhlbiggcmVzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyA9PT09PSBDaGVjayBmb3IgRW1wdHkgRGF0YSA9PT09PSAvL1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNsb3NpbmdQcmljZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICByZXMuRGF0YS5mb3JFYWNoKCBkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2luZ1ByaWNlcy5wdXNoKCBkLmNsb3NlICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVscy5wdXNoKCBwYXJzZURhdGUoIGQudGltZSApIClcclxuICAgICAgICAgICAgICAgICAgICAgfSApXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVDb2xvciA9IGdldFJhbmRvbUNvbG9yKClcclxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjdXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAncmdiYSggMCwgMCwgMCwgMC43KScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludEJhY2tncm91bmRDb2xvcjogJyM2NmZmNjYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludFJhZGl1czogNSxcdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludEhvdmVyUmFkaXVzOiA4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBjbG9zaW5nUHJpY2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIH0gKVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRDaGFydCgpO1xyXG4gICAgICAgICAgICAgICAgfSApXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnNlRGF0ZSggZGF0ZVRpbWUgKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBuZXcgRGF0ZSggZGF0ZVRpbWUgKiAxMDAwICk7XHJcbiAgICAgICAgY29uc3QgbW9udGhOYW1lcyA9IFtcclxuICAgICAgICAgICAgXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLFxyXG4gICAgICAgICAgICBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIixcclxuICAgICAgICAgICAgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsXHJcbiAgICAgICAgICAgIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBkYXkgPSBkYXRlU3RyaW5nLmdldERhdGUoKTtcclxuICAgICAgICBjb25zdCBtb250aEluZGV4ID0gZGF0ZVN0cmluZy5nZXRNb250aCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgcmV0dXJuIGAke21vbnRoTmFtZXNbbW9udGhJbmRleF19ICR7ZGF5fWA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGJ1aWxkQ2hhcnQoKSB7XHJcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgICAgICBjb25zdCBjaGFydCA9IG5ldyBDaGFydChjdHgsIHtcclxuICAgICAgICAgICAgLy8gaGUgdHlwZSBvZiBjaGFydCB3ZSB3YW50IHRvIGNyZWF0ZVxyXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gVGhlIGRhdGEgZm9yIG91ciBkYXRhc2V0XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIGxhYmVscyxcclxuICAgICAgICAgICAgICAgIGRhdGFzZXRzXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGdvIGhlcmVcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTp0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFpbnRhaW5Bc3BlY3RSYXRpbzpmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNjYWxlczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHlBeGVzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgc2NhbGVMYWJlbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFN0cmluZzogJ1ByaWNlIGluIFVTRCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAyMFxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgICAgIHhBeGVzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZUxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFN0cmluZzogJ0RheScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDIwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IClcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7Z2V0UmFuZG9tKCl9LCAke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sIDAuOClgO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRSYW5kb20oKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI1NikudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRDaGFydERhdGFcclxuICAgIH1cclxufSApKClcclxuIiwiY29uc3QgQ3VycmVuY3lUYWJsZSA9IGZ1bmN0aW9uICggZ2xvYmFsICkge1xyXG4gICAgXHJcbiAgICBsZXQgaW52ZXN0QW1vdW50ICAgID0gMDtcclxuICAgIGxldCBhbGxDdXJyZW5jaWVzICAgPSBbXTtcclxuICAgIGxldCBmaWF0ICAgICAgICAgICAgPSBbJyQnLCAnVVNEJ107XHJcbiAgICBjb25zdCBjMjBJbmRleCAgICAgID0gWyAxMy40LCAxMi4zLCAxMC41LCAxMC4yLCA5LjIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNy42LCA1LjQsIDQuOSwgNC4zLCA0LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMuOCwgMy40LCAyLjEsIDEuNywgMS41LCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEuNSwgMS4yLCAxLjIsIDAuOSwgMC45IF07XHJcbiAgICBcclxuICAgIGNvbnN0IGN1cnJlbmN5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5jdXJyLWNoYXJ0JyApO1xyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtjdXJyZW5jaWVzfSBBcnJheSBhcnJheSBvZiBjdXJyZW5jaWVzIGRhdGEgIFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBidWlsZFRhYmxlKCBjdXJyZW5jaWVzICkge1xyXG4gICAgICAgIC8vIEFkZCBmaWF0IHRvIHRoZWFkXHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZpYXQnKS5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLnRleHRDb250ZW50ID0gYCAoJHtmaWF0WzFdfSlgKTtcclxuICAgICAgICBcclxuICAgICAgICBhbGxDdXJyZW5jaWVzID0gY3VycmVuY2llcztcclxuICAgICAgICBcclxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGJvZHknICk7XHJcbiAgICAgICAgbGV0IGN1cnJTeW1ib2xzID0gW107XHJcbiAgICAgICAgY3VycmVuY2llcy5mb3JFYWNoKCAoIGN1ciwgY29pbiApID0+IHtcclxuICAgICAgICAgICAgY3VyclN5bWJvbHMucHVzaChjdXIuc3ltYm9sKTtcclxuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xyXG4gIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIucmFuayB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+PHNwYW4gY2xhc3M9XCJjdXJyZW5jeS1uYW1lXCI+JHsgY3VyLm5hbWV9PC9zcGFuPiA8c3BhbiBjbGFzcz1cImN1cnJlbmN5LXN5bWJvbFwiPiAke2N1ci5zeW1ib2x9IDwvc3Bhbj48L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5tYXJrZXRfY2FwX3VzZCApIH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5wcmljZV91c2QgKSB9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgYzIwSW5kZXhbY29pbl0gfSU8L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjYWxjdWxhdGVJbnZlc3RtZW50KCBjMjBJbmRleFtjb2luXSApIH08YnI+PHNwYW4gY2xhc3M9J2NvaW4tb3V0cHV0Jz4gICgkeyAoaW52ZXN0QW1vdW50ICogYzIwSW5kZXhbY29pbl0gLyAxMDApIC8gY3VyLnByaWNlX3VzZH0pPC9zcGFuPjxicj48YSBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgaHJlZj0gJHsgYWRkQnV5QnV0dCggY3VyLnN5bWJvbCApIH0gdGFyZ2V0PVwiX2JsYW5rXCI+QnV5IG9uIEJpbmFuY2U8L2E+PC90ZD5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgdHIuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKSAgXHJcblxyXG4gICAgICAgICAgICB0ci5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGUgKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVuY3lDaGFydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnY3VycmVuY3ktY2hhcnQnICk7ICBcclxuICAgICAgICAgICAgICAgIGlmICghdHIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbmN5Q2hhcnQuc2Nyb2xsSW50b1ZpZXcoIHsgYmVoYXZpb3I6ICdzbW9vdGgnIH0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNob3dhY3RpdmVSb3coIGUgKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbmN5Q29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb250YWluZXIuaW5uZXJIVE1MID0gYDxjYW52YXMgaWQ9XCJjdXJyZW5jeS1jaGFydFwiPjwvY2FudmFzPmBcclxuICAgICAgICAgICAgICAgIGdsb2JhbC5jaGFydC5nZXRDaGFydERhdGEoIGN1ci5zeW1ib2wsIGN1ci5uYW1lICk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgfSApICBcclxuICAgICAgICB9KTtcclxuICAgICAgICBnbG9iYWwuY3VycmVuY3lUYWJsZS5hcHBlbmRDaGlsZCggdGJvZHkgKTtcclxuICAgICAgICBnbG9iYWwuZ2V0TmV3cyhjdXJyU3ltYm9scyk7XHJcbiAgICAgICAgZ2xvYmFsLmN1cnJlbmN5U3ltYm9sID0gY3VyclN5bWJvbHM7ICAgXHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dhY3RpdmVSb3coIGV2ZW50ICkge1xyXG4gICAgICAgIGxldCBhbGxBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAndHIuYWN0aXZlJyApO1xyXG4gICAgICAgIGZvciggbGV0IGkgPSAwIDsgaSA8IGFsbEFjdGl2ZS5sZW5ndGggOyBpICsrICl7XHJcbiAgICAgICAgICAgIGFsbEFjdGl2ZVtpXS5jbGFzc0xpc3QucmVtb3ZlKCAnYWN0aXZlJyApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXZlbnQudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzcGFuJ1xyXG4gICAgICAgICAgICA/ICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoICdhY3RpdmUnIClcclxuICAgICAgICAgICAgOiAgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCggJ2FjdGl2ZScgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7dmFsdWV9IE51bWJlciBmcm9tIGNlbGxEYXRhXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBmb3JtYXROdW0oIHZhbHVlICkge1xyXG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBmbG9hdFxyXG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcclxuICAgICAgICAgICAgLy8gQWRkIGZpYXQgY3VycmVuY3kgc3ltYm9sICRcclxuICAgICAgICAgICAgLy8gSWYgcHJpY2UgaXMgb3ZlciAxLCBsaW1pdCBkZWNpbWFscyB0byB0d28gcGxhY2VzXHJcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xyXG4gICAgICAgICAgICAvLyBBZGQgY29tbWEgYWZ0ZXIgZXZlcnkgdGhyZWUgbnVtYmVyc1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxyXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7cGFyc2VJbnQobmV3TnVtKX1gO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gbmV3TnVtLnJlcGxhY2UoLyhcXGQpKD89KFxcZFxcZFxcZCkrKD8hXFxkKSkvZywgXCIkMSxcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSBcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxyXG4gICAgICogQHJldHVybnMge051bWJlcn0gXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xyXG4gICAgICAgIC8vID09PT09IE5lZWQgdG8gZmlndXJlIG91dCB0aGUgY2FsY3VsYXRpb25zIGhlcmUgPT09PT0gLy9cclxuICAgICAgICBsZXQgYW1vdW50ID0gaW52ZXN0QW1vdW50ICogdmFsdWUgLyAxMDA7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdE51bSggYW1vdW50ICk7IFxyXG4gICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSB7IGN1cnJlbmN5IH0gQ3VycmVuY3kncyBzeW1ib2wgbmFtZSBpLmUuIEJUQ1xyXG4gICAgICogQHJldHVybnMge1VSTCB0byBidXkgY29pbiBvbiBCaW5hbmNlfSBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYWRkQnV5QnV0dCggY3VycmVuY3kgKSB7XHJcbiAgICAgICAgLy8gSWYgY29pbiBjYW4gYmUgcHVyY2hhc2VkIHdpdGggVVNEIGFuZCBpcyBwb3B1bGFyLCBjaGFuZ2UgVVJMLlxyXG4gICAgICAgIHN3aXRjaCAoY3VycmVuY3kpIHtcclxuICAgICAgICAgICAgY2FzZSAnQlRDJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly93d3cuYmluYW5jZS5jb20vdHJhZGUuaHRtbD9zeW1ib2w9QlRDX1VTRFQnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ0VUSCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vd3d3LmJpbmFuY2UuY29tL3RyYWRlLmh0bWw/c3ltYm9sPUVUSF9VU0RUJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAnaHR0cHM6Ly93d3cuYmluYW5jZS5jb20vdHJhZGUuaHRtbD9zeW1ib2w9JHtjdXJyZW5jeX1fQlRDJ2BcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSggZSApIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYoIGdsb2JhbC5pbnB1dC52YWx1ZSAhPT0gJycgKSB7XHJcbiAgICAgICAgICAgIGludmVzdEFtb3VudCA9IGdsb2JhbC5pbnB1dC52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vID09PT09IFJlbW92ZSB0YWJsZSBib2R5IGFuZCByZS1yZW5kZXIgPT09PT0gLy9cclxuICAgICAgICAgICAgd2hpbGUgKGdsb2JhbC5jdXJyZW5jeVRhYmxlLmNoaWxkTm9kZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBidWlsZFRhYmxlKCBhbGxDdXJyZW5jaWVzICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJ1aWxkVGFibGUsXHJcbiAgICAgICAgZm9ybWF0TnVtLCBcclxuICAgICAgICBjYWxjdWxhdGVJbnZlc3RtZW50LFxyXG4gICAgICAgIHN1Ym1pdEZvcm1cclxuICAgIH1cclxuXHJcbn0iLCJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuXHJcbiAgICAvLyA9PT09PSBHTE9CQUxTID09PT09IC8vXHJcbiAgICBcclxuXHJcbiAgICBjb25zdCBjMjBVcmwgID0gJ2h0dHBzOi8vYXBpLmNvaW5tYXJrZXRjYXAuY29tL3YxL3RpY2tlci8/bGltaXQ9MjAnO1xyXG4gICAgY29uc3QgbmV3c1VybCA9ICdodHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9uZXdzLz9jYXRlZ29yaWVzPSc7XHJcbiAgICBsZXQgY3VycmVuY3lTeW1ib2xzID0gW107XHJcblxyXG4gICAgLy8gbnVtYmVyIG9mIG5ld3MgYXJ0aWNsZXMgdG8gc2hvd1xyXG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcclxuICAgIGxldCBmaXJzdEFydGljbGUgPSAwO1xyXG4gICAgbGV0IGxhc3RBcnRpY2xlID0gbmV3c0xpbWl0O1xyXG5cclxuICAgIC8vID09PT09IFB1dCBhbGwgRE9NIHRhcmdldHRpbmcgaGVyZSA9PT09PSAvL1xyXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XHJcbiAgICBjb25zdCBmb3JtICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5pbnZlc3QtZm9ybScgKTtcclxuICAgIGNvbnN0IGlucHV0ICAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmludmVzdC1pbnB1dCcgKTtcclxuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XHJcbiAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5yZWZyZXNoLWljb24nICk7XHJcbiAgICBjb25zdCBuYXYgICAgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hdi1tYWluJyk7XHJcbiAgICBjb25zdCB0b3BPZk5hdiAgICAgID0gbmF2Lm9mZnNldFRvcDtcclxuICAgIFxyXG5cclxuXHJcbiAgICAvLyA9PT09PSB0aGlzIHZhcmlhYmxlIGhvbGRzIGFsbCB0aGUgZnVuY3Rpb25zIGZvciBjdXJyZW5jeSB0YWJsZSA9PT09PSAvL1xyXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzLCBjdXJyZW5jeVN5bWJvbHMsIGNoYXJ0IH0gKTtcclxuXHJcbiAgICAvLyA9PT09PSBET00gTGlzdGVuZXJzID09PT09IC8vIFxyXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApICk7XHJcbiAgICByZWZyZXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsICgpID0+IGdldE5ld3MoIGN1cnJlbmN5U3ltYm9scyApIClcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBmaXhOYXYpO1xyXG5cclxuXHJcblxyXG4gICAgZ2V0RGF0YShjMjBVcmwpLnRoZW4oIHJlcyA9PiB7XHJcbiAgICAgICAgQ3VycmVuY3kuYnVpbGRUYWJsZSggcmVzICk7XHJcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCAnQlRDJywgJ0JpdGNvaW4nICk7XHJcbiAgICB9IClcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZml4TmF2KCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+PSB0b3BPZk5hdikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSBuYXYub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdmaXhlZC1uYXYnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLW5hdicpO1xyXG4gICAgICAgIH0gICAgICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyB7IHByb21pc2UgfSBcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCggdXJsIClcclxuICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXHJcbiAgICB9OyBcclxuXHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XHJcbiAgICAgICAgLy8gSWYgdXNlciByZWZyZXNoZXMgbmV3cywgcHVsbCBuZXcgYmF0Y2hcclxuICAgICAgICAvLyBXaGVuIHVzZXIgY3ljbGVzIDUgdGltZXMsIHN0YXJ0IGFnYWluXHJcbiAgICAgICAgaWYgKGxhc3RBcnRpY2xlID49IG5ld3NMaW1pdCAqIDUpIHtcclxuICAgICAgICAgICAgZmlyc3RBcnRpY2xlID0gMDtcclxuICAgICAgICAgICAgbGFzdEFydGljbGUgPSBuZXdzTGltaXQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZmlyc3RBcnRpY2xlICs9IG5ld3NMaW1pdDtcclxuICAgICAgICAgICAgbGFzdEFydGljbGUgKz0gbmV3c0xpbWl0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYXJ0aWNsZXNTYW1wbGUgPSBhcnRpY2xlcy5zbGljZShmaXJzdEFydGljbGUsIGxhc3RBcnRpY2xlKTsgIFxyXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcclxuIFxyXG4gICAgICAgIC8vIGlmIG5ld3N0YWJsZSBpcyBhbHJlYWR5IHByZXNlbnQsIGNsZWFyIGJlZm9yZVxyXG4gICAgICAgIC8vIGFwcGVuZGluZ1xyXG4gICAgICAgIGlmIChuZXdzVGFibGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgbmV3c1RhYmxlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIGFydGljbGVzU2FtcGxlLmZvckVhY2goKGluZm8pID0+IHtcclxuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xyXG4gICAgICAgICAgICB0ci5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDx0ZD48YSBjbGFzcz1cImZvbnQtd2VpZ2h0LWJvbGRcIiBocmVmPVwiJHtpbmZvLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj4ke2luZm8udGl0bGV9PC9hPiA8cD4ke2luZm8uc291cmNlfTwvcD5cclxuICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICBuZXdzVGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIFxyXG4gICAgICogY29uc3RydWN0IG5ld3MgYmFzZWQgb24gdG9wIDIwIGNyeXB0b1xyXG4gICAgICogQHBhcmFtIHtjdXJyU3ltYm9sfSBBcnJheSBjdXJyZW5jeXN5bWJvbHNcclxuICAgICAqIGVnOiBbJ0JUQycsICdFVEgnXVxyXG4gICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE5ld3MoY3VyclN5bWJvbHMpIHtcclxuICAgICAgICBsZXQgY3VyclN0cmluZyA9IGN1cnJTeW1ib2xzLmpvaW4oXCIsXCIpO1xyXG4gICAgICAgIHJlZnJlc2hCdXR0b24uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnc3Bpbi1hbmltYXRpb24nKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgIFx0ICAgIHJlZnJlc2hCdXR0b24uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnc3Bpbi1hbmltYXRpb24nKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuXHJcbiAgICAgICAgZmV0Y2hVcmwgPSBuZXdzVXJsLmNvbmNhdChjdXJyU3RyaW5nKTtcclxuXHJcbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XHJcbiAgICAgICAgQ3VycmVuY3kuc3VibWl0Rm9ybSggZSApO1xyXG4gICAgfVxyXG59IClcclxuIl19
