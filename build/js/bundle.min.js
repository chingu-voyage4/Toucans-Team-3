const chart=function(){let e=["January","February","March","April","May","June","July"],t=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){let a=r.filter((e,t)=>t<=9);Promise.all(a.map(e=>fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${e.symbol}&tsym=USD&limit=6`).then(e=>e.json()))).then(r=>{r.forEach((e,r)=>{let c=[];e.Data.forEach(e=>c.push(e.close)),t.push({label:a[r].symbol,backgroundColor:"transparent",borderColor:`rgba(${n()}, ${n()}, ${n()}, 0.8)`,data:c})}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:e,datasets:t},options:{}})}()})}}}(),CurrencyTable=function(e){let t=0,n=[],r=["$","USD"];const a=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9];let c;function o(t){document.querySelectorAll(".fiat").forEach(e=>e.textContent=` (${r[1]})`),n=t;let o=document.createElement("tbody"),d=[];t.forEach((e,t)=>{d.push(e.symbol);let n=document.createElement("tr");n.innerHTML=`\n                    <td>${e.rank}</td>\n                    <td>${e.name}</td>\n                    <td>${l(e.market_cap_usd)}</td>\n                    <td>${l(e.price_usd)}</td>\n                    <td>${a[t]}%</td>\n                    <td>${u(a[t])}</td>\n            `,o.appendChild(n)}),e.currencyTable.appendChild(o),e.getNews(d),c&&clearInterval(c),c=setInterval(()=>e.getNews(d),12e4)}function l(e){let t=parseFloat(e);return t%1!=0&&t>1?(t=`${r[0]}${t.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):t<1?`${r[0]}${t}`:(t=`${r[0]}${parseInt(t)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}function u(e){let n=t*e/100;return t-=n,l(n)}return{buildTable:o,formatNum:l,calculateInvestment:u,submitForm:function(r){if(r.preventDefault(),""!==e.input.value){for(t=e.input.value;e.currencyTable.childNodes.length>1;)e.currencyTable.removeChild(e.currencyTable.lastChild);o(n)}}}};document.addEventListener("DOMContentLoaded",()=>{const e="https://min-api.cryptocompare.com/data/news/?categories=",t=5,n=document.querySelector(".currency-table"),r=document.querySelector(".invest-form"),a=document.querySelector(".invest-input"),c=document.querySelector(".news-table"),o=CurrencyTable({form:r,input:a,currencyTable:n,getNews:function(n){let r=n.join(",");fetchUrl=e.concat(r),l(fetchUrl).then(e=>(function(e){let n=e.slice(0,t),r=document.createElement("tbody");r.setAttribute("id","newstable");let a=document.querySelector("#newstable");null!==a&&(a.innerHTML="");n.forEach(e=>{let t=document.createElement("tr");t.innerHTML=`\n            <td><a class="font-weight-bold" href="${e.url}">${e.title}</a> <p>${e.source}</p>\n            </td>\n            `,r.appendChild(t)}),c.appendChild(r)})(e))}});function l(e){return fetch(e).then(e=>e.json())}r.addEventListener("submit",e=>(function(e){o.submitForm(e)})(e)),l("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(e=>{o.buildTable(e),chart.getChartData(e)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwiY3VycmVuY3lUYWJsZS5qcyIsIm1haW4uanMiXSwibmFtZXMiOlsiY2hhcnQiLCJsYWJlbHMiLCJkYXRhc2V0cyIsImdldFJhbmRvbSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInRvU3RyaW5nIiwiZ2V0Q2hhcnREYXRhIiwiY2hhcnREYXRhIiwiY3VycmVuY2llcyIsImZpbHRlciIsImNkIiwiaW5kZXgiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiZmV0Y2giLCJzeW1ib2wiLCJ0aGVuIiwicmVzIiwianNvbiIsImZvckVhY2giLCJkYXRhIiwiY2xvc2luZ1ByaWNlcyIsIkRhdGEiLCJkIiwicHVzaCIsImNsb3NlIiwibGFiZWwiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImN0eCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiQ2hhcnQiLCJ0eXBlIiwib3B0aW9ucyIsImJ1aWxkQ2hhcnQiLCJDdXJyZW5jeVRhYmxlIiwiZ2xvYmFsIiwiaW52ZXN0QW1vdW50IiwiYWxsQ3VycmVuY2llcyIsImZpYXQiLCJjMjBJbmRleCIsIm5ld3NJbnRlcnZhbCIsImJ1aWxkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwidGJvZHkiLCJjcmVhdGVFbGVtZW50IiwiY3VyclN5bWJvbHMiLCJjdXIiLCJjb2luIiwidHIiLCJpbm5lckhUTUwiLCJyYW5rIiwibmFtZSIsImZvcm1hdE51bSIsIm1hcmtldF9jYXBfdXNkIiwicHJpY2VfdXNkIiwiY2FsY3VsYXRlSW52ZXN0bWVudCIsImFwcGVuZENoaWxkIiwiY3VycmVuY3lUYWJsZSIsImdldE5ld3MiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJ2YWx1ZSIsIm5ld051bSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsInBhcnNlSW50IiwiYW1vdW50Iiwic3VibWl0Rm9ybSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImlucHV0IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsInJlbW92ZUNoaWxkIiwibGFzdENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5ld3NVcmwiLCJuZXdzTGltaXQiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsIm5ld3NUYWJsZSIsIkN1cnJlbmN5IiwiY3VyclN0cmluZyIsImpvaW4iLCJmZXRjaFVybCIsImNvbmNhdCIsImdldERhdGEiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJzZXRBdHRyaWJ1dGUiLCJuZXdzQm9keSIsImluZm8iLCJ1cmwiLCJ0aXRsZSIsInNvdXJjZSIsInNob3dOZXdzIl0sIm1hcHBpbmdzIjoiQUFDQSxNQUFBQSxNQUFBLFdBRUEsSUFBQUMsR0FBQSxVQUFBLFdBQUEsUUFBQSxRQUFBLE1BQUEsT0FBQSxRQUNBQyxLQW9EQSxTQUFBQyxJQUNBLE9BQUFDLEtBQUFDLE1BQUEsSUFBQUQsS0FBQUUsVUFBQUMsV0FJQSxPQUNBQyxhQXZEQSxTQUFBQyxHQUVBLElBQUFDLEVBQUFELEVBQUFFLE9BQUEsQ0FBQUMsRUFBQUMsSUFBQUEsR0FBQSxHQUVBQyxRQUFBQyxJQUFBTCxFQUFBTSxJQUFBSixHQUNBSyxrR0FBQUwsRUFBQU0sMkJBQ0FDLEtBQUFDLEdBQUFBLEVBQUFDLFVBRUFGLEtBQUFDLElBRUFBLEVBQUFFLFFBQUEsQ0FBQUMsRUFBQVYsS0FDQSxJQUFBVyxLQUNBRCxFQUFBRSxLQUFBSCxRQUFBSSxHQUFBRixFQUFBRyxLQUFBRCxFQUFBRSxRQUNBMUIsRUFBQXlCLE1BQ0FFLE1BQUFuQixFQUFBRyxHQUFBSyxPQUNBWSxnQkFBQSxjQUNBQyxvQkE2QkE1QixRQUFBQSxRQUFBQSxZQTVCQW9CLEtBQUFDLE1BU0EsV0FDQSxNQUFBUSxFQUFBQyxTQUFBQyxlQUFBLGtCQUFBQyxXQUFBLE1BQ0EsSUFBQUMsTUFBQUosR0FFQUssS0FBQSxPQUdBZCxNQUNBdEIsT0FBQUEsRUFDQUMsU0FBQUEsR0FJQW9DLGFBbEJB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QUNBbkYsS0FBQUMsR0FBQUEsRUFBQUMsUUFkQW1FLEVBQUFKLGlCQUFBLFNBQUFQLElBdURBLFNBQUFBLEdBQ0FhLEVBQUFkLFdBQUFDLElBeERBRCxDQUFBQyxJQUVBa0IsRUFuQkEscURBbUJBNUUsS0FBQUMsSUFDQXNFLEVBQUEzQyxXQUFBM0IsR0FDQXBCLE1BQUFRLGFBQUFZIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgY2hhcnQgPSAoIGZ1bmN0aW9uICgpIHtcblxuICAgIGxldCBsYWJlbHMgICA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiXTtcbiAgICBsZXQgZGF0YXNldHMgPSBbXTtcbiAgICBcblxuICAgIGZ1bmN0aW9uIGdldENoYXJ0RGF0YSAoIGNoYXJ0RGF0YSApe1xuXG4gICAgICAgIGxldCBjdXJyZW5jaWVzID0gY2hhcnREYXRhLmZpbHRlciggKCBjZCwgaW5kZXggKSA9PiBpbmRleCA8PSA5ICk7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwoIGN1cnJlbmNpZXMubWFwKCBjZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2goIGBodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9oaXN0b2RheT9mc3ltPSR7Y2Quc3ltYm9sfSZ0c3ltPVVTRCZsaW1pdD02YCApXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXG4gICAgICAgIH0gKSApXG4gICAgICAgIC50aGVuKCByZXMgPT4ge1xuXG4gICAgICAgICAgICByZXMuZm9yRWFjaCggKCBkYXRhLCBpbmRleCApID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2xvc2luZ1ByaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGRhdGEuRGF0YS5mb3JFYWNoKCBkID0+IGNsb3NpbmdQcmljZXMucHVzaCggZC5jbG9zZSApIClcbiAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjdXJyZW5jaWVzW2luZGV4XS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGdldFJhbmRvbUNvbG9yKCksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXG4gICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgfSApXG5cbiAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFydCgpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG4gICAgICAgICAgICAvLyBoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBmb3Igb3VyIGRhdGFzZXRcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgICAgICAgZGF0YXNldHNcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxuICAgICAgICAgICAgb3B0aW9uczoge31cbiAgICAgICAgfSApXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21Db2xvcigpIHtcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7Z2V0UmFuZG9tKCl9LCAke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sIDAuOClgO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KS50b1N0cmluZygpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0Q2hhcnREYXRhXG4gICAgfVxufSApKClcbiIsImNvbnN0IEN1cnJlbmN5VGFibGUgPSBmdW5jdGlvbiAoIGdsb2JhbCApIHtcbiAgICBcbiAgICBsZXQgaW52ZXN0QW1vdW50ICAgID0gMDtcbiAgICBsZXQgYWxsQ3VycmVuY2llcyAgID0gW107XG4gICAgbGV0IGZpYXQgICAgICAgICAgICA9IFsnJCcsICdVU0QnXTtcbiAgICBjb25zdCBjMjBJbmRleCAgICAgID0gWyAxMy40LCAxMi4zLCAxMC41LCAxMC4yLCA5LjIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDcuNiwgNS40LCA0LjksIDQuMywgNCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMy44LCAzLjQsIDIuMSwgMS43LCAxLjUsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEuNSwgMS4yLCAxLjIsIDAuOSwgMC45IF07XG4gICAgLy8gPT09PT0gTmV3cyBJbnRlcnZhbCA9PT09PSAvL1xuICAgIGxldCBuZXdzSW50ZXJ2YWw7XG5cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Y3VycmVuY2llc30gQXJyYXkgYXJyYXkgb2YgY3VycmVuY2llcyBkYXRhICBcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZFRhYmxlKCBjdXJyZW5jaWVzICkge1xuICAgICAgICAvLyBBZGQgZmlhdCB0byB0aGVhZFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlhdCcpLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0udGV4dENvbnRlbnQgPSBgICgke2ZpYXRbMV19KWApO1xuICAgICAgICBcbiAgICAgICAgYWxsQ3VycmVuY2llcyA9IGN1cnJlbmNpZXM7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAndGJvZHknICk7XG4gICAgICAgIGxldCBjdXJyU3ltYm9scyA9IFtdO1xuICAgICAgICBjdXJyZW5jaWVzLmZvckVhY2goICggY3VyLCBjb2luICkgPT4ge1xuICAgICAgICAgICAgY3VyclN5bWJvbHMucHVzaChjdXIuc3ltYm9sKTtcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0cicgKTtcbiAgICAgICAgICAgIHRyLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGN1ci5yYW5rIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLm5hbWUgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5tYXJrZXRfY2FwX3VzZCApIH08L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgZm9ybWF0TnVtKCBjdXIucHJpY2VfdXNkICkgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjMjBJbmRleFtjb2luXSB9JTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjYWxjdWxhdGVJbnZlc3RtZW50KCBjMjBJbmRleFtjb2luXSApIH08L3RkPlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKCB0ciApICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgICBnbG9iYWwuY3VycmVuY3lUYWJsZS5hcHBlbmRDaGlsZCggdGJvZHkgKTtcbiAgICAgICAgZ2xvYmFsLmdldE5ld3MoY3VyclN5bWJvbHMpO1xuICAgICAgICBpZiggbmV3c0ludGVydmFsICkgY2xlYXJJbnRlcnZhbCggbmV3c0ludGVydmFsICk7XG4gICAgICAgIG5ld3NJbnRlcnZhbCA9ICBzZXRJbnRlcnZhbCggKCkgPT4gZ2xvYmFsLmdldE5ld3MoIGN1cnJTeW1ib2xzICksIDEyMDAwMCApOyAgICAgICAgXG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGZyb20gY2VsbERhdGFcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfSBGb3JtYXR0ZWQgd2l0aCBjb21tYXMgYW5kIGZpYXQgc3ltYm9sLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1hdE51bSggdmFsdWUgKSB7XG4gICAgICAgIGxldCBuZXdOdW0gPSBwYXJzZUZsb2F0KCB2YWx1ZSApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGZsb2F0XG4gICAgICAgIGlmIChuZXdOdW0gJSAxICE9PSAwICYmIG5ld051bSA+IDEpIHtcbiAgICAgICAgICAgIC8vIEFkZCBmaWF0IGN1cnJlbmN5IHN5bWJvbCAkXG4gICAgICAgICAgICAvLyBJZiBwcmljZSBpcyBvdmVyIDEsIGxpbWl0IGRlY2ltYWxzIHRvIHR3byBwbGFjZXNcbiAgICAgICAgICAgIG5ld051bSA9IGAke2ZpYXRbMF19JHtuZXdOdW0udG9GaXhlZCgyKX1gO1xuICAgICAgICAgICAgLy8gQWRkIGNvbW1hIGFmdGVyIGV2ZXJ5IHRocmVlIG51bWJlcnNcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChuZXdOdW0gPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bX1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgbWFya2V0IGNhcCwgbm8gZGVjaW1hbCBwbGFjZVxuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke3BhcnNlSW50KG5ld051bSl9YDtcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBuZXdOdW0ucmVwbGFjZSgvKFxcZCkoPz0oXFxkXFxkXFxkKSsoPyFcXGQpKS9nLCBcIiQxLFwiKTtcbiAgICAgICAgfVxuICAgIH0gXG5cblxuICAgICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xuICAgICAgICAvLyA9PT09PSBOZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGNhbGN1bGF0aW9ucyBoZXJlID09PT09IC8vXG4gICAgICAgIGxldCBhbW91bnQgPSBpbnZlc3RBbW91bnQgKiB2YWx1ZSAvIDEwMDtcbiAgICAgICAgaW52ZXN0QW1vdW50ID0gaW52ZXN0QW1vdW50IC0gYW1vdW50O1xuICAgICAgICByZXR1cm4gZm9ybWF0TnVtKCBhbW91bnQgKTsgXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmKCBnbG9iYWwuaW5wdXQudmFsdWUgIT09ICcnICkge1xuICAgICAgICAgICAgaW52ZXN0QW1vdW50ID0gZ2xvYmFsLmlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICAvLyA9PT09PSBSZW1vdmUgdGFibGUgYm9keSBhbmQgcmUtcmVuZGVyID09PT09IC8vXG4gICAgICAgICAgICB3aGlsZSAoZ2xvYmFsLmN1cnJlbmN5VGFibGUuY2hpbGROb2Rlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgZ2xvYmFsLmN1cnJlbmN5VGFibGUucmVtb3ZlQ2hpbGQoZ2xvYmFsLmN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1aWxkVGFibGUoIGFsbEN1cnJlbmNpZXMgKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYnVpbGRUYWJsZSxcbiAgICAgICAgZm9ybWF0TnVtLCBcbiAgICAgICAgY2FsY3VsYXRlSW52ZXN0bWVudCxcbiAgICAgICAgc3VibWl0Rm9ybVxuICAgIH1cblxufSIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXG4gICAgLy8gPT09PT0gR0xPQkFMUyA9PT09PSAvL1xuICAgIFxuXG4gICAgY29uc3QgYzIwVXJsICA9ICdodHRwczovL2FwaS5jb2lubWFya2V0Y2FwLmNvbS92MS90aWNrZXIvP2xpbWl0PTIwJztcbiAgICBjb25zdCBuZXdzVXJsID0gJ2h0dHBzOi8vbWluLWFwaS5jcnlwdG9jb21wYXJlLmNvbS9kYXRhL25ld3MvP2NhdGVnb3JpZXM9JztcblxuICAgIC8vIG51bWJlciBvZiBuZXdzIGFydGljbGVzIHRvIHNob3dcbiAgICBjb25zdCBuZXdzTGltaXQgPSA1O1xuXG4gICAgLy8gPT09PT0gUHV0IGFsbCBET00gdGFyZ2V0dGluZyBoZXJlID09PT09IC8vXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XG4gICAgY29uc3QgZm9ybSAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWZvcm0nICk7XG4gICAgY29uc3QgaW5wdXQgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWlucHV0JyApO1xuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XG5cblxuICAgIC8vID09PT09IHRoaXMgdmFyaWFibGUgaG9sZHMgYWxsIHRoZSBmdW5jdGlvbnMgZm9yIGN1cnJlbmN5IHRhYmxlID09PT09IC8vXG4gICAgY29uc3QgQ3VycmVuY3kgPSBDdXJyZW5jeVRhYmxlKCB7IGZvcm0sIGlucHV0LCBjdXJyZW5jeVRhYmxlLCBnZXROZXdzIH0gKTtcblxuICAgIC8vID09PT09IERPTSBMaXN0ZW5lcnMgPT09PT0gLy8gXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApIClcblxuICAgIGdldERhdGEoYzIwVXJsKS50aGVuKCByZXMgPT4ge1xuICAgICAgICBDdXJyZW5jeS5idWlsZFRhYmxlKCByZXMgKTtcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCByZXMgKTtcbiAgICB9IClcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXG4gICAgICogQHJldHVybnMgeyBwcm9taXNlIH0gXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xuICAgICAgICByZXR1cm4gZmV0Y2goIHVybCApXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcbiAgICB9OyBcblxuICAgIFxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XG4gICAgICAgIGxldCBhcnRpY2xlc1NhbXBsZSA9IGFydGljbGVzLnNsaWNlKDAsIG5ld3NMaW1pdCk7ICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuICAgICAgICB0Ym9keS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5ld3N0YWJsZVwiKTtcbiBcbiAgICAgICAgLy8gaWYgbmV3c3RhYmxlIGlzIGFscmVhZHkgcHJlc2VudCwgY2xlYXIgYmVmb3JlXG4gICAgICAgIC8vIGFwcGVuZGluZ1xuICAgICAgICBsZXQgbmV3c0JvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3c3RhYmxlJyk7XG4gICAgICAgIGlmIChuZXdzQm9keSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3c0JvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiBcbiAgICAgICAgYXJ0aWNsZXNTYW1wbGUuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkPjxhIGNsYXNzPVwiZm9udC13ZWlnaHQtYm9sZFwiIGhyZWY9XCIke2luZm8udXJsfVwiPiR7aW5mby50aXRsZX08L2E+IDxwPiR7aW5mby5zb3VyY2V9PC9wPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKTtcbiAgICAgICAgfSlcbiAgICAgICAgbmV3c1RhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBjb25zdHJ1Y3QgbmV3cyBiYXNlZCBvbiB0b3AgMjAgY3J5cHRvXG4gICAgICogQHBhcmFtIHtjdXJyU3ltYm9sfSBBcnJheSBjdXJyZW5jeXN5bWJvbHNcbiAgICAgKiBlZzogWydCVEMnLCAnRVRIJ11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5ld3MoY3VyclN5bWJvbHMpIHtcbiAgICAgICAgbGV0IGN1cnJTdHJpbmcgPSBjdXJyU3ltYm9scy5qb2luKFwiLFwiKTtcbiAgICAgICAgXG4gICAgICAgIGZldGNoVXJsID0gbmV3c1VybC5jb25jYXQoY3VyclN0cmluZyk7XG5cbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKCBlICkge1xuICAgICAgICBDdXJyZW5jeS5zdWJtaXRGb3JtKCBlICk7XG4gICAgfVxufSApXG4iXX0=
