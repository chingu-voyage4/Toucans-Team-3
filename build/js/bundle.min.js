const chart=function(){let t=["January","February","March","April","May","June","July"],e=[];function n(){return Math.floor(256*Math.random()).toString()}return{getChartData:function(r){let a=r.filter((t,e)=>e<=9);Promise.all(a.map(t=>fetch(`https://cors-anywhere.herokuapp.com/https://min-api.cryptocompare.com/data/histoday?fsym=${t.symbol}&tsym=USD&limit=6`).then(t=>t.json()))).then(r=>{r.forEach((t,r)=>{let o=[];t.Data.forEach(t=>o.push(t.close)),e.push({label:a[r].symbol,backgroundColor:"transparent",borderColor:`rgba(${n()}, ${n()}, ${n()}, 0.8)`,data:o})}),function(){const n=document.getElementById("currency-chart").getContext("2d");new Chart(n,{type:"line",data:{labels:t,datasets:e},options:{}})}()})}}}();document.addEventListener("DOMContentLoaded",()=>{let t=0,e=[],n=["$","USD"];const r=[13.4,12.3,10.5,10.2,9.2,7.6,5.4,4.9,4.3,4,3.8,3.4,2.1,1.7,1.5,1.5,1.2,1.2,.9,.9],a="https://min-api.cryptocompare.com/data/news/?categories=",o=5;let c;const l=document.querySelector(".currency-table"),d=document.querySelector(".invest-form"),i=document.querySelector(".invest-input"),u=document.querySelector(".news-table");function s(t){return fetch(t).then(t=>t.json())}function h(t){let e=t.join(",");fetchUrl=a.concat(e),s(fetchUrl).then(t=>(function(t){let e=t.slice(0,o),n=document.createElement("tbody");n.setAttribute("id","newstable");let r=document.querySelector("#newstable");null!==r&&(r.innerHTML=""),e.forEach(t=>{let e=document.createElement("tr");e.innerHTML=`\n            <td><a class="font-weight-bold" href="${t.url}">${t.title}</a> <p>${t.source}</p>\n            </td>\n            `,n.appendChild(e)}),u.appendChild(n)})(t))}function m(a){document.querySelectorAll(".fiat").forEach(t=>t.textContent=` (${n[1]})`),e=a;let o=document.createElement("tbody"),d=[];a.forEach((e,n)=>{d.push(e.symbol);let a=document.createElement("tr");a.innerHTML=`\n                    <td>${e.rank}</td>\n                    <td>${e.name}</td>\n                    <td>${p(e.market_cap_usd)}</td>\n                    <td>${p(e.price_usd)}</td>\n                    <td>${r[n]}%</td>\n                    <td>${function(e){let n=t*e/100;return t-=n,p(n)}(r[n])}</td>\n            `,o.appendChild(a)}),l.appendChild(o),h(d),c&&clearInterval(c),c=setInterval(()=>h(d),12e4)}function p(t){let e=parseFloat(t);return e%1!=0&&e>1?(e=`${n[0]}${e.toFixed(2)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):e<1?`${n[0]}${e}`:(e=`${n[0]}${parseInt(e)}`).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}d.addEventListener("submit",n=>(function(n){if(n.preventDefault(),""!==i.value){for(t=i.value;l.childNodes.length>1;)l.removeChild(l.lastChild);m(e)}})(n)),s("https://api.coinmarketcap.com/v1/ticker/?limit=20").then(t=>{m(t),chart.getChartData(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJjaGFydCIsImxhYmVscyIsImRhdGFzZXRzIiwiZ2V0UmFuZG9tIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwidG9TdHJpbmciLCJnZXRDaGFydERhdGEiLCJjaGFydERhdGEiLCJjdXJyZW5jaWVzIiwiZmlsdGVyIiwiY2QiLCJpbmRleCIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmZXRjaCIsInN5bWJvbCIsInRoZW4iLCJyZXMiLCJqc29uIiwiZm9yRWFjaCIsImRhdGEiLCJjbG9zaW5nUHJpY2VzIiwiRGF0YSIsImQiLCJwdXNoIiwiY2xvc2UiLCJsYWJlbCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlckNvbG9yIiwiY3R4IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInR5cGUiLCJvcHRpb25zIiwiYnVpbGRDaGFydCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnZlc3RBbW91bnQiLCJhbGxDdXJyZW5jaWVzIiwiZmlhdCIsImMyMEluZGV4IiwibmV3c1VybCIsIm5ld3NMaW1pdCIsIm5ld3NJbnRlcnZhbCIsImN1cnJlbmN5VGFibGUiLCJxdWVyeVNlbGVjdG9yIiwiZm9ybSIsImlucHV0IiwibmV3c1RhYmxlIiwiZ2V0RGF0YSIsInVybCIsImdldE5ld3MiLCJjdXJyU3ltYm9scyIsImN1cnJTdHJpbmciLCJqb2luIiwiZmV0Y2hVcmwiLCJjb25jYXQiLCJhcnRpY2xlcyIsImFydGljbGVzU2FtcGxlIiwic2xpY2UiLCJ0Ym9keSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuZXdzQm9keSIsImlubmVySFRNTCIsImluZm8iLCJ0ciIsInRpdGxlIiwic291cmNlIiwiYXBwZW5kQ2hpbGQiLCJzaG93TmV3cyIsImJ1aWxkVGFibGUiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaXRlbSIsInRleHRDb250ZW50IiwiY3VyIiwiY29pbiIsInJhbmsiLCJuYW1lIiwiZm9ybWF0TnVtIiwibWFya2V0X2NhcF91c2QiLCJwcmljZV91c2QiLCJ2YWx1ZSIsImFtb3VudCIsImNhbGN1bGF0ZUludmVzdG1lbnQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJuZXdOdW0iLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsInJlcGxhY2UiLCJwYXJzZUludCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJyZW1vdmVDaGlsZCIsImxhc3RDaGlsZCIsInN1Ym1pdEZvcm0iXSwibWFwcGluZ3MiOiJBQUNBLE1BQUFBLE1BQUEsV0FFQSxJQUFBQyxHQUFBLFVBQUEsV0FBQSxRQUFBLFFBQUEsTUFBQSxPQUFBLFFBQ0FDLEtBb0RBLFNBQUFDLElBQ0EsT0FBQUMsS0FBQUMsTUFBQSxJQUFBRCxLQUFBRSxVQUFBQyxXQUlBLE9BQ0FDLGFBdkRBLFNBQUFDLEdBRUEsSUFBQUMsRUFBQUQsRUFBQUUsT0FBQSxDQUFBQyxFQUFBQyxJQUFBQSxHQUFBLEdBRUFDLFFBQUFDLElBQUFMLEVBQUFNLElBQUFKLEdBQ0FLLGtHQUFBTCxFQUFBTSwyQkFDQUMsS0FBQUMsR0FBQUEsRUFBQUMsVUFFQUYsS0FBQUMsSUFFQUEsRUFBQUUsUUFBQSxDQUFBQyxFQUFBVixLQUNBLElBQUFXLEtBQ0FELEVBQUFFLEtBQUFILFFBQUFJLEdBQUFGLEVBQUFHLEtBQUFELEVBQUFFLFFBQ0ExQixFQUFBeUIsTUFDQUUsTUFBQW5CLEVBQUFHLEdBQUFLLE9BQ0FZLGdCQUFBLGNBQ0FDLG9CQTZCQTVCLFFBQUFBLFFBQUFBLFlBNUJBb0IsS0FBQUMsTUFTQSxXQUNBLE1BQUFRLEVBQUFDLFNBQUFDLGVBQUEsa0JBQUFDLFdBQUEsTUFDQSxJQUFBQyxNQUFBSixHQUVBSyxLQUFBLE9BR0FkLE1BQ0F0QixPQUFBQSxFQUNBQyxTQUFBQSxHQUlBb0MsYUFsQkFDLE9BM0JBLEdDREFOLFNBQUFPLGlCQUFBLG1CQUFBLEtBR0EsSUFBQUMsRUFBQSxFQUNBQyxLQUNBQyxHQUFBLElBQUEsT0FDQSxNQUFBQyxHQUFBLEtBQUEsS0FBQSxLQUFBLEtBQUEsSUFDQSxJQUFBLElBQUEsSUFBQSxJQUFBLEVBQ0EsSUFBQSxJQUFBLElBQUEsSUFBQSxJQUNBLElBQUEsSUFBQSxJQUFBLEdBQUEsSUFHQUMsRUFBQSwyREFHQUMsRUFBQSxFQUdBLElBQUFDLEVBR0EsTUFBQUMsRUFBQWYsU0FBQWdCLGNBQUEsbUJBQ0FDLEVBQUFqQixTQUFBZ0IsY0FBQSxnQkFDQUUsRUFBQWxCLFNBQUFnQixjQUFBLGlCQUNBRyxFQUFBbkIsU0FBQWdCLGNBQUEsZUFnQkEsU0FBQUksRUFBQUMsR0FDQSxPQUFBckMsTUFBQXFDLEdBQ0FuQyxLQUFBQyxHQUFBQSxFQUFBQyxRQWdDQSxTQUFBa0MsRUFBQUMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBRSxLQUFBLEtBRUFDLFNBQUFkLEVBQUFlLE9BQUFILEdBRUFKLEVBQUFNLFVBQUF4QyxLQUFBQyxJQWpDQSxTQUFBeUMsR0FDQSxJQUFBQyxFQUFBRCxFQUFBRSxNQUFBLEVBQUFqQixHQUNBa0IsRUFBQS9CLFNBQUFnQyxjQUFBLFNBQ0FELEVBQUFFLGFBQUEsS0FBQSxhQUlBLElBQUFDLEVBQUFsQyxTQUFBZ0IsY0FBQSxjQUNBLE9BQUFrQixJQUNBQSxFQUFBQyxVQUFBLElBR0FOLEVBQUF4QyxRQUFBK0MsSUFDQSxJQUFBQyxFQUFBckMsU0FBQWdDLGNBQUEsTUFDQUssRUFBQUYsaUVBQ0FDLEVBQUFmLFFBQUFlLEVBQUFFLGdCQUFBRixFQUFBRyw4Q0FHQVIsRUFBQVMsWUFBQUgsS0FFQWxCLEVBQUFxQixZQUFBVCxJQWFBVSxDQUFBdEQsSUFPQSxTQUFBdUQsRUFBQWpFLEdBRUF1QixTQUFBMkMsaUJBQUEsU0FBQXRELFFBQUF1RCxHQUFBQSxFQUFBQyxpQkFBQW5DLEVBQUEsT0FFQUQsRUFBQWhDLEVBRUEsSUFBQXNELEVBQUEvQixTQUFBZ0MsY0FBQSxTQUNBVCxLQUNBOUMsRUFBQVksUUFBQSxDQUFBeUQsRUFBQUMsS0FDQXhCLEVBQUE3QixLQUFBb0QsRUFBQTdELFFBQ0EsSUFBQW9ELEVBQUFyQyxTQUFBZ0MsY0FBQSxNQUNBSyxFQUFBRix1Q0FDQVcsRUFBQUUsc0NBQ0FGLEVBQUFHLHNDQUNBQyxFQUFBSixFQUFBSyxpREFDQUQsRUFBQUosRUFBQU0sNENBQ0F6QyxFQUFBb0MscUNBMENBLFNBQUFNLEdBRUEsSUFBQUMsRUFBQTlDLEVBQUE2QyxFQUFBLElBRUEsT0FEQTdDLEdBQUE4QyxFQUNBSixFQUFBSSxHQTdDQUMsQ0FBQTVDLEVBQUFvQyx5QkFFQWhCLEVBQUFTLFlBQUFILEtBRUF0QixFQUFBeUIsWUFBQVQsR0FDQVQsRUFBQUMsR0FDQVQsR0FBQTBDLGNBQUExQyxHQUNBQSxFQUFBMkMsWUFBQSxJQUFBbkMsRUFBQUMsR0FBQSxNQVNBLFNBQUEyQixFQUFBRyxHQUNBLElBQUFLLEVBQUFDLFdBQUFOLEdBR0EsT0FBQUssRUFBQSxHQUFBLEdBQUFBLEVBQUEsR0FHQUEsS0FBQWhELEVBQUEsS0FBQWdELEVBQUFFLFFBQUEsTUFFQUMsUUFBQSwyQkFBQSxPQUNBSCxFQUFBLEtBQ0FoRCxFQUFBLEtBQUFnRCxLQUdBQSxLQUFBaEQsRUFBQSxLQUFBb0QsU0FBQUosTUFDQUcsUUFBQSwyQkFBQSxPQTFHQTVDLEVBQUFWLGlCQUFBLFNBQUF3RCxJQTZIQSxTQUFBQSxHQUVBLEdBREFBLEVBQUFDLGlCQUNBLEtBQUE5QyxFQUFBbUMsTUFBQSxDQUlBLElBSEE3QyxFQUFBVSxFQUFBbUMsTUFHQXRDLEVBQUFrRCxXQUFBQyxPQUFBLEdBQ0FuRCxFQUFBb0QsWUFBQXBELEVBQUFxRCxXQUVBMUIsRUFBQWpDLEtBdElBNEQsQ0FBQU4sSUFFQTNDLEVBbkJBLHFEQW1CQWxDLEtBQUFDLElBQ0F1RCxFQUFBdkQsR0FDQXBCLE1BQUFRLGFBQUFZIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3QgY2hhcnQgPSAoIGZ1bmN0aW9uICgpIHtcblxuICAgIGxldCBsYWJlbHMgICA9IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiXTtcbiAgICBsZXQgZGF0YXNldHMgPSBbXTtcbiAgICBcblxuICAgIGZ1bmN0aW9uIGdldENoYXJ0RGF0YSAoIGNoYXJ0RGF0YSApe1xuXG4gICAgICAgIGxldCBjdXJyZW5jaWVzID0gY2hhcnREYXRhLmZpbHRlciggKCBjZCwgaW5kZXggKSA9PiBpbmRleCA8PSA5ICk7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwoIGN1cnJlbmNpZXMubWFwKCBjZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZmV0Y2goIGBodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9oaXN0b2RheT9mc3ltPSR7Y2Quc3ltYm9sfSZ0c3ltPVVTRCZsaW1pdD02YCApXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCByZXMgPT4gcmVzLmpzb24oKSApXG4gICAgICAgIH0gKSApXG4gICAgICAgIC50aGVuKCByZXMgPT4ge1xuXG4gICAgICAgICAgICByZXMuZm9yRWFjaCggKCBkYXRhLCBpbmRleCApID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY2xvc2luZ1ByaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGRhdGEuRGF0YS5mb3JFYWNoKCBkID0+IGNsb3NpbmdQcmljZXMucHVzaCggZC5jbG9zZSApIClcbiAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKCB7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjdXJyZW5jaWVzW2luZGV4XS5zeW1ib2wsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGdldFJhbmRvbUNvbG9yKCksXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGNsb3NpbmdQcmljZXMsXG4gICAgICAgICAgICAgICAgfSApXG4gICAgICAgICAgICAgfSApXG5cbiAgICAgICAgICAgICBidWlsZENoYXJ0KCk7XG4gICAgICAgIH0gKVxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gYnVpbGRDaGFydCgpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbmN5LWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY29uc3QgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG4gICAgICAgICAgICAvLyBoZSB0eXBlIG9mIGNoYXJ0IHdlIHdhbnQgdG8gY3JlYXRlXG4gICAgICAgICAgICB0eXBlOiAnbGluZScsXG4gICAgXG4gICAgICAgICAgICAvLyBUaGUgZGF0YSBmb3Igb3VyIGRhdGFzZXRcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBsYWJlbHMsXG4gICAgICAgICAgICAgICAgZGF0YXNldHNcbiAgICAgICAgICAgIH0sXG4gICAgXG4gICAgICAgICAgICAvLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZ28gaGVyZVxuICAgICAgICAgICAgb3B0aW9uczoge31cbiAgICAgICAgfSApXG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBnZXRSYW5kb21Db2xvcigpIHtcbiAgICAgICAgcmV0dXJuIGByZ2JhKCR7Z2V0UmFuZG9tKCl9LCAke2dldFJhbmRvbSgpfSwgJHtnZXRSYW5kb20oKX0sIDAuOClgO1xuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gZ2V0UmFuZG9tKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMjU2KS50b1N0cmluZygpO1xuICAgIH1cblxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0Q2hhcnREYXRhXG4gICAgfVxufSApKClcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoICdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuXG4gICAgLy8gPT09PT0gR0xPQkFMUyA9PT09PSAvL1xuICAgIGxldCBpbnZlc3RBbW91bnQgICAgPSAwO1xuICAgIGxldCBhbGxDdXJyZW5jaWVzICAgPSBbXTtcbiAgICBsZXQgZmlhdCAgICAgICAgICAgID0gWyckJywgJ1VTRCddO1xuICAgIGNvbnN0IGMyMEluZGV4ICAgICAgPSBbIDEzLjQsIDEyLjMsIDEwLjUsIDEwLjIsIDkuMiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgNy42LCA1LjQsIDQuOSwgNC4zLCA0LCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAzLjgsIDMuNCwgMi4xLCAxLjcsIDEuNSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgMS41LCAxLjIsIDEuMiwgMC45LCAwLjkgXTtcblxuICAgIGNvbnN0IGMyMFVybCAgPSAnaHR0cHM6Ly9hcGkuY29pbm1hcmtldGNhcC5jb20vdjEvdGlja2VyLz9saW1pdD0yMCc7XG4gICAgY29uc3QgbmV3c1VybCA9ICdodHRwczovL21pbi1hcGkuY3J5cHRvY29tcGFyZS5jb20vZGF0YS9uZXdzLz9jYXRlZ29yaWVzPSc7XG5cbiAgICAvLyBudW1iZXIgb2YgbmV3cyBhcnRpY2xlcyB0byBzaG93XG4gICAgY29uc3QgbmV3c0xpbWl0ID0gNTtcblxuICAgIC8vID09PT09IE5ld3MgSW50ZXJ2YWwgPT09PT0gLy9cbiAgICBsZXQgbmV3c0ludGVydmFsO1xuXG4gICAgLy8gPT09PT0gUHV0IGFsbCBET00gdGFyZ2V0dGluZyBoZXJlID09PT09IC8vXG4gICAgY29uc3QgY3VycmVuY3lUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY3VycmVuY3ktdGFibGUnICk7XG4gICAgY29uc3QgZm9ybSAgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWZvcm0nICk7XG4gICAgY29uc3QgaW5wdXQgICAgICAgICA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaW52ZXN0LWlucHV0JyApO1xuICAgIGNvbnN0IG5ld3NUYWJsZSAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm5ld3MtdGFibGUnICk7XG5cblxuICAgIC8vID09PT09IERPTSBMaXN0ZW5lcnMgPT09PT0gLy8gXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKCAnc3VibWl0JywgKCBlICkgPT4gc3VibWl0Rm9ybSggZSApIClcblxuICAgIGdldERhdGEoYzIwVXJsKS50aGVuKCByZXMgPT4ge1xuICAgICAgICBidWlsZFRhYmxlKCByZXMgKTtcbiAgICAgICAgY2hhcnQuZ2V0Q2hhcnREYXRhKCByZXMgKTtcbiAgICB9IClcbiAgICBcbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3VybH0gU3RyaW5nICB1cmwgc3RyaW5nXG4gICAgICogQHJldHVybnMgeyBwcm9taXNlIH0gXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGF0YSggdXJsICkge1xuICAgICAgICByZXR1cm4gZmV0Y2goIHVybCApXG4gICAgICAgICAgICAgICAgLnRoZW4oIHJlcyA9PiByZXMuanNvbigpIClcbiAgICB9OyBcblxuICAgIFxuICAgIGZ1bmN0aW9uIHNob3dOZXdzKGFydGljbGVzKSB7XG4gICAgICAgIGxldCBhcnRpY2xlc1NhbXBsZSA9IGFydGljbGVzLnNsaWNlKDAsIG5ld3NMaW1pdCk7ICBcbiAgICAgICAgbGV0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3Rib2R5JyApO1xuICAgICAgICB0Ym9keS5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5ld3N0YWJsZVwiKTtcbiBcbiAgICAgICAgLy8gaWYgbmV3c3RhYmxlIGlzIGFscmVhZHkgcHJlc2VudCwgY2xlYXIgYmVmb3JlXG4gICAgICAgIC8vIGFwcGVuZGluZ1xuICAgICAgICBsZXQgbmV3c0JvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmV3c3RhYmxlJyk7XG4gICAgICAgIGlmIChuZXdzQm9keSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3c0JvZHkuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIH1cbiBcbiAgICAgICAgYXJ0aWNsZXNTYW1wbGUuZm9yRWFjaCgoaW5mbykgPT4ge1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgPHRkPjxhIGNsYXNzPVwiZm9udC13ZWlnaHQtYm9sZFwiIGhyZWY9XCIke2luZm8udXJsfVwiPiR7aW5mby50aXRsZX08L2E+IDxwPiR7aW5mby5zb3VyY2V9PC9wPlxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCggdHIgKTtcbiAgICAgICAgfSlcbiAgICAgICAgbmV3c1RhYmxlLmFwcGVuZENoaWxkKCB0Ym9keSApO1xuICAgIH1cblxuICAgIC8qKiBcbiAgICAgKiBjb25zdHJ1Y3QgbmV3cyBiYXNlZCBvbiB0b3AgMjAgY3J5cHRvXG4gICAgICogQHBhcmFtIHtjdXJyU3ltYm9sfSBBcnJheSBjdXJyZW5jeXN5bWJvbHNcbiAgICAgKiBlZzogWydCVEMnLCAnRVRIJ11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldE5ld3MoY3VyclN5bWJvbHMpIHtcbiAgICAgICAgbGV0IGN1cnJTdHJpbmcgPSBjdXJyU3ltYm9scy5qb2luKFwiLFwiKTtcbiAgICAgICAgXG4gICAgICAgIGZldGNoVXJsID0gbmV3c1VybC5jb25jYXQoY3VyclN0cmluZyk7XG5cbiAgICAgICAgZ2V0RGF0YShmZXRjaFVybCkudGhlbihyZXMgPT4gc2hvd05ld3MocmVzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtjdXJyZW5jaWVzfSBBcnJheSBhcnJheSBvZiBjdXJyZW5jaWVzIGRhdGEgIFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkVGFibGUoIGN1cnJlbmNpZXMgKSB7XG4gICAgICAgIC8vIEFkZCBmaWF0IHRvIHRoZWFkXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWF0JykuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS50ZXh0Q29udGVudCA9IGAgKCR7ZmlhdFsxXX0pYCk7XG4gICAgICAgIFxuICAgICAgICBhbGxDdXJyZW5jaWVzID0gY3VycmVuY2llcztcbiAgICAgICAgXG4gICAgICAgIGxldCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICd0Ym9keScgKTtcbiAgICAgICAgbGV0IGN1cnJTeW1ib2xzID0gW107XG4gICAgICAgIGN1cnJlbmNpZXMuZm9yRWFjaCggKCBjdXIsIGNvaW4gKSA9PiB7XG4gICAgICAgICAgICBjdXJyU3ltYm9scy5wdXNoKGN1ci5zeW1ib2wpO1xuICAgICAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3RyJyApO1xuICAgICAgICAgICAgdHIuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHsgY3VyLnJhbmsgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBjdXIubmFtZSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGZvcm1hdE51bSggY3VyLm1hcmtldF9jYXBfdXNkICkgfTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZD4keyBmb3JtYXROdW0oIGN1ci5wcmljZV91c2QgKSB9PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGMyMEluZGV4W2NvaW5dIH0lPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7IGNhbGN1bGF0ZUludmVzdG1lbnQoIGMyMEluZGV4W2NvaW5dICkgfTwvdGQ+XG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQoIHRyICkgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgIGN1cnJlbmN5VGFibGUuYXBwZW5kQ2hpbGQoIHRib2R5ICk7XG4gICAgICAgIGdldE5ld3MoY3VyclN5bWJvbHMpO1xuICAgICAgICBpZiggbmV3c0ludGVydmFsICkgY2xlYXJJbnRlcnZhbCggbmV3c0ludGVydmFsICk7XG4gICAgICAgIG5ld3NJbnRlcnZhbCA9ICBzZXRJbnRlcnZhbCggKCkgPT4gZ2V0TmV3cyggY3VyclN5bWJvbHMgKSwgMTIwMDAwICk7ICAgICAgICBcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge3ZhbHVlfSBOdW1iZXIgZnJvbSBjZWxsRGF0YVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IEZvcm1hdHRlZCB3aXRoIGNvbW1hcyBhbmQgZmlhdCBzeW1ib2wuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZm9ybWF0TnVtKCB2YWx1ZSApIHtcbiAgICAgICAgbGV0IG5ld051bSA9IHBhcnNlRmxvYXQoIHZhbHVlICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBmb3IgZmxvYXRcbiAgICAgICAgaWYgKG5ld051bSAlIDEgIT09IDAgJiYgbmV3TnVtID4gMSkge1xuICAgICAgICAgICAgLy8gQWRkIGZpYXQgY3VycmVuY3kgc3ltYm9sICRcbiAgICAgICAgICAgIC8vIElmIHByaWNlIGlzIG92ZXIgMSwgbGltaXQgZGVjaW1hbHMgdG8gdHdvIHBsYWNlc1xuICAgICAgICAgICAgbmV3TnVtID0gYCR7ZmlhdFswXX0ke25ld051bS50b0ZpeGVkKDIpfWA7XG4gICAgICAgICAgICAvLyBBZGQgY29tbWEgYWZ0ZXIgZXZlcnkgdGhyZWUgbnVtYmVyc1xuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKG5ld051bSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7bmV3TnVtfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiBtYXJrZXQgY2FwLCBubyBkZWNpbWFsIHBsYWNlXG4gICAgICAgICAgICBuZXdOdW0gPSBgJHtmaWF0WzBdfSR7cGFyc2VJbnQobmV3TnVtKX1gO1xuICAgICAgICAgICAgcmV0dXJuIG5ld051bSA9IG5ld051bS5yZXBsYWNlKC8oXFxkKSg/PShcXGRcXGRcXGQpKyg/IVxcZCkpL2csIFwiJDEsXCIpO1xuICAgICAgICB9XG4gICAgfSBcblxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHt2YWx1ZX0gTnVtYmVyIGN1cnJlbmN5J3MgaW5kZXggcGVyY2VudGFnZVxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZUludmVzdG1lbnQoIHZhbHVlICkge1xuICAgICAgICAvLyA9PT09PSBOZWVkIHRvIGZpZ3VyZSBvdXQgdGhlIGNhbGN1bGF0aW9ucyBoZXJlID09PT09IC8vXG4gICAgICAgIGxldCBhbW91bnQgPSBpbnZlc3RBbW91bnQgKiB2YWx1ZSAvIDEwMDtcbiAgICAgICAgaW52ZXN0QW1vdW50ID0gaW52ZXN0QW1vdW50IC0gYW1vdW50O1xuICAgICAgICByZXR1cm4gZm9ybWF0TnVtKCBhbW91bnQgKTsgXG4gICAgfVxuXG5cblxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0oIGUgKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYoIGlucHV0LnZhbHVlICE9PSAnJyApIHtcbiAgICAgICAgICAgIGludmVzdEFtb3VudCA9IGlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICAvLyA9PT09PSBSZW1vdmUgdGFibGUgYm9keSBhbmQgcmUtcmVuZGVyID09PT09IC8vXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVuY3lUYWJsZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW5jeVRhYmxlLnJlbW92ZUNoaWxkKGN1cnJlbmN5VGFibGUubGFzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1aWxkVGFibGUoIGFsbEN1cnJlbmNpZXMgKTtcbiAgICAgICAgfVxuICAgIH1cbn0gKVxuIl19
